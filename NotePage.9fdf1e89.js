parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"u48L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VerticalStackItemLayout=void 0;var e=require("../../../styled-components");const t=e.styled.div`
  flex-grow: ${({autoScale:e})=>e?1:void 0};
  height: 100%;
  overflow-y: hidden;
  position: relative;
`;exports.VerticalStackItemLayout=t;
},{"../../../styled-components":"SO6s"}],"ESLq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.VirtualKeyboardSpacer=void 0;var e=require("../../../styled-components");const i=264,r=e.styled.div`
  display: none;

  @media screen and (max-width: 480px) {
    display: ${({isVirtualKeyboardVisible:e})=>e?"block":void 0};
    height: ${({isVirtualKeyboardVisible:e})=>e?"calc(100% - 264px)":void 0};
  }
`;exports.VirtualKeyboardSpacer=r;
},{"../../../styled-components":"SO6s"}],"mRoZ":[function(require,module,exports) {

},{}],"aPQJ":[function(require,module,exports) {
"use strict";require("prosemirror-gapcursor/style/gapcursor.css"),require("prosemirror-view/style/prosemirror.css");
},{"prosemirror-gapcursor/style/gapcursor.css":"mRoZ","prosemirror-view/style/prosemirror.css":"mRoZ"}],"QEh5":[function(require,module,exports) {
"use strict";function e(e){e.preventDefault()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.preventDefault=e;
},{}],"6wHY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EditorMenu=void 0;var e=o(require("react")),t=require("../../../styled-components"),i=require("../../../utils/preventDefault");function o(e){return e&&e.__esModule?e:{default:e}}const r=t.styled.div`
  -webkit-overflow-scrolling: touch;
  bottom: 0;
  display: flex;
  flex-direction: column-reverse;
  font-size: ${({theme:e})=>e.fontSize.default};
  height: 100%;
  overflow-y: auto;
  padding: calc(2 * ${({theme:e})=>e.thinSpace});
  position: absolute;
  right: 0;
`,n=t.styled.div`
  align-items: center;
  background: ${({theme:e})=>e.buttonColorBg};
  border-radius: ${({theme:e})=>e.roundButtonRadius};
  color: ${({theme:e})=>e.buttonColorFg};
  cursor: pointer;
  display: flex;
  min-height: ${({theme:e})=>e.roundButtonSize};
  height: ${({theme:e})=>e.roundButtonSize};
  justify-content: center;
  opacity: ${({theme:e,active:t})=>t?e.activeOpacity:e.inactiveOpacity};
  padding: ${({theme:e})=>e.space};
  text-align: center;
  transition: ${({theme:e})=>e.transition};
  width: ${({theme:e})=>e.roundButtonSize};

  & + & {
    margin-bottom: ${({theme:e})=>e.space};
  }

  :hover {
    opacity: ${({theme:e})=>e.activeOpacity};
  }
`,a=({item:t,editorState:o,editorView:r})=>e.default.createElement(n,{key:t.shortTitle,active:t.active(o),onClick:e=>{e.preventDefault(),t.run(o,r.dispatch,r)},onMouseDown:i.preventDefault},t.shortTitle),u=({editorView:t,editorState:i,menuItems:o})=>e.default.createElement(r,null,o.map(o=>e.default.createElement(a,{key:o.shortTitle,editorView:t,editorState:i,item:o})));exports.EditorMenu=u;
},{"react":"1n8/","../../../styled-components":"SO6s","../../../utils/preventDefault":"QEh5"}],"mAgk":[function(require,module,exports) {
function t(t){this.content=t}t.prototype={constructor:t,find:function(t){for(var n=0;n<this.content.length;n+=2)if(this.content[n]===t)return n;return-1},get:function(t){var n=this.find(t);return-1==n?void 0:this.content[n+1]},update:function(n,e,r){var o=r&&r!=n?this.remove(r):this,i=o.find(n),c=o.content.slice();return-1==i?c.push(r||n,e):(c[i+1]=e,r&&(c[i]=r)),new t(c)},remove:function(n){var e=this.find(n);if(-1==e)return this;var r=this.content.slice();return r.splice(e,2),new t(r)},addToStart:function(n,e){return new t([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var r=this.remove(n).content.slice();return r.push(n,e),new t(r)},addBefore:function(n,e,r){var o=this.remove(e),i=o.content.slice(),c=o.find(n);return i.splice(-1==c?i.length:c,0,e,r),new t(i)},forEach:function(t){for(var n=0;n<this.content.length;n+=2)t(this.content[n],this.content[n+1])},prepend:function(n){return(n=t.from(n)).size?new t(n.content.concat(this.subtract(n).content)):this},append:function(n){return(n=t.from(n)).size?new t(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=t.from(n);for(var r=0;r<n.content.length;r+=2)e=e.remove(n.content[r]);return e},get size(){return this.content.length>>1}},t.from=function(n){if(n instanceof t)return n;var e=[];if(n)for(var r in n)e.push(r,n[r]);return new t(e)},module.exports=t;
},{}],"jjSS":[function(require,module,exports) {
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("orderedmap"));function n(t,e,r){for(var i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:r;var o=t.child(i),s=e.child(i);if(o!=s){if(!o.sameMarkup(s))return r;if(o.isText&&o.text!=s.text){for(var a=0;o.text[a]==s.text[a];a++)r++;return r}if(o.content.size||s.content.size){var h=n(o.content,s.content,r+1);if(null!=h)return h}r+=o.nodeSize}else r+=o.nodeSize}}function r(t,e,n,i){for(var o=t.childCount,s=e.childCount;;){if(0==o||0==s)return o==s?null:{a:n,b:i};var a=t.child(--o),h=e.child(--s),p=a.nodeSize;if(a!=h){if(!a.sameMarkup(h))return{a:n,b:i};if(a.isText&&a.text!=h.text){for(var f=0,c=Math.min(a.text.length,h.text.length);f<c&&a.text[a.text.length-f-1]==h.text[h.text.length-f-1];)f++,n--,i--;return{a:n,b:i}}if(a.content.size||h.content.size){var u=r(a.content,h.content,n-1,i-1);if(u)return u}n-=p,i-=p}else n-=p,i-=p}}var i=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},o={firstChild:{},lastChild:{},childCount:{}};i.prototype.nodesBetween=function(t,e,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],h=s+a.nodeSize;if(h>t&&!1!==n(a,r+s,i,o)&&a.content.size){var p=s+1;a.nodesBetween(Math.max(0,t-p),Math.min(a.content.size,e-p),n,r+p)}s=h}},i.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},i.prototype.textBetween=function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf&&r?(i+=r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)},0),i},i.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new i(r,this.size+t.size)},i.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,s=0;s<e;o++){var a=this.content[o],h=s+a.nodeSize;h>t&&((s<t||h>e)&&(a=a.isText?a.cut(Math.max(0,t-s),Math.min(a.text.length,e-s)):a.cut(Math.max(0,t-s-1),Math.min(a.content.size,e-s-1))),n.push(a),r+=a.nodeSize),s=h}return new i(n,r)},i.prototype.cutByIndex=function(t,e){return t==e?i.empty:0==t&&e==this.content.length?this:new i(this.content.slice(t,e))},i.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new i(r,o)},i.prototype.addToStart=function(t){return new i([t].concat(this.content),this.size+t.nodeSize)},i.prototype.addToEnd=function(t){return new i(this.content.concat(t),this.size+t.nodeSize)},i.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},o.firstChild.get=function(){return this.content.length?this.content[0]:null},o.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},o.childCount.get=function(){return this.content.length},i.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},i.prototype.maybeChild=function(t){return this.content[t]},i.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},i.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),n(this,t,e)},i.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),r(this,t,e,n)},i.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return a(0,t);if(t==this.size)return a(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=r+this.child(n).nodeSize;if(i>=t)return i==t||e>0?a(n+1,i):a(n,r);r=i}},i.prototype.toString=function(){return"<"+this.toStringInner()+">"},i.prototype.toStringInner=function(){return this.content.join(", ")},i.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null},i.fromJSON=function(t,e){if(!e)return i.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(e.map(t.nodeFromJSON))},i.fromArray=function(t){if(!t.length)return i.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new i(e||t,n)},i.from=function(t){return t?t instanceof i?t:Array.isArray(t)?this.fromArray(t):new i([t],t.nodeSize):i.empty},Object.defineProperties(i.prototype,o);var s={index:0,offset:0};function a(t,e){return s.index=t,s.offset=e,s}function h(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!h(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e&&h(t[i],e[i])))return!1;for(var o in e)if(!(o in t))return!1}return!0}i.empty=new i([],0);var p=function(t,e){this.type=t,this.attrs=e};function f(t){var e=Error.call(this,t);return e.__proto__=f.prototype,e}p.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},p.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},p.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},p.prototype.eq=function(t){return this==t||this.type==t.type&&h(this.attrs,t.attrs)},p.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},p.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},p.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},p.setFrom=function(t){if(!t||0==t.length)return p.none;if(t instanceof p)return[t];var e=t.slice();return e.sort(function(t,e){return t.type.rank-e.type.rank}),e},p.none=[],f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f.prototype.name="ReplaceError";var c=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},u={size:{}};function l(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),h=a.index,p=a.offset;if(o==e||s.isText){if(p!=n&&!t.child(h).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=h)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(l(s.content,e-o-1,n-o-1)))}function d(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var h=d(a.content,e-s-1,n);return h&&t.replaceChild(o,a.copy(h))}function y(t,e,n){if(n.openStart>t.depth)throw new f("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new f("Inconsistent open depths");return v(t,e,n,0)}function v(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=v(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=M(n,t);return w(o,S(t,a.start,a.end,e,r))}var h=t.parent,p=h.content;return w(h,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return w(o,C(t,e,r))}function m(t,e){if(!e.type.compatibleContent(t.type))throw new f("Cannot join "+e.type.name+" onto "+t.type.name)}function g(t,e,n){var r=t.node(n);return m(r,e.node(n)),r}function x(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function k(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(x(t.nodeAfter,r),o++));for(var a=o;a<s;a++)x(i.child(a),r);e&&e.depth==n&&e.textOffset&&x(e.nodeBefore,r)}function w(t,e){if(!t.type.validContent(e))throw new f("Invalid content for node "+t.type.name);return t.copy(e)}function S(t,e,n,r,o){var s=t.depth>o&&g(t,e,o+1),a=r.depth>o&&g(n,r,o+1),h=[];return k(null,t,o,h),s&&a&&e.index(o)==n.index(o)?(m(s,a),x(w(s,S(t,e,n,r,o+1)),h)):(s&&x(w(s,C(t,e,o+1)),h),k(e,n,o,h),a&&x(w(a,C(n,r,o+1)),h)),k(r,null,o,h),new i(h)}function C(t,e,n){var r=[];(k(null,t,n,r),t.depth>n)&&x(w(g(t,e,n+1),C(t,e,n+1)),r);return k(e,null,n,r),new i(r)}function M(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(i.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}u.size.get=function(){return this.content.size-this.openStart-this.openEnd},c.prototype.insertAt=function(t,e){var n=d(this.content,t+this.openStart,e,null);return n&&new c(n,this.openStart,this.openEnd)},c.prototype.removeBetween=function(t,e){return new c(l(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},c.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},c.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},c.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},c.fromJSON=function(t,e){if(!e)return c.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new c(i.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},c.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new c(t,n,r)},Object.defineProperties(c.prototype,u),c.empty=new c(i.empty,0,0);var O=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},b={parent:{},doc:{},textOffset:{},nodeAfter:{},nodeBefore:{}};O.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},b.parent.get=function(){return this.node(this.depth)},b.doc.get=function(){return this.node(0)},O.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},O.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},O.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},O.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},O.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},O.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},O.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},b.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},b.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},b.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},O.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return p.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},O.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},O.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},O.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new N(this,t,n)},O.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},O.prototype.max=function(t){return t.pos>this.pos?t:this},O.prototype.min=function(t){return t.pos<this.pos?t:this},O.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},O.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,i=e,o=t;;){var s=o.content.findIndex(i),a=s.index,h=s.offset,p=i-h;if(n.push(o,a,r+h),!p)break;if((o=o.child(a)).isText)break;i=p-1,r+=h+1}return new O(e,n,i)},O.resolveCached=function(t,e){for(var n=0;n<T.length;n++){var r=T[n];if(r.pos==e&&r.doc==t)return r}var i=T[z]=O.resolve(t,e);return z=(z+1)%I,i},Object.defineProperties(O.prototype,b);var T=[],z=0,I=12,N=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},E={start:{},end:{},parent:{},startIndex:{},endIndex:{}};E.start.get=function(){return this.$from.before(this.depth+1)},E.end.get=function(){return this.$to.after(this.depth+1)},E.parent.get=function(){return this.$from.node(this.depth)},E.startIndex.get=function(){return this.$from.index(this.depth)},E.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(N.prototype,E);var R=Object.create(null),F=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||i.empty,this.marks=r||p.none},J={nodeSize:{},childCount:{},textContent:{},firstChild:{},lastChild:{},isBlock:{},isTextblock:{},inlineContent:{},isInline:{},isText:{},isLeaf:{},isAtom:{}};J.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},J.childCount.get=function(){return this.content.childCount},F.prototype.child=function(t){return this.content.child(t)},F.prototype.maybeChild=function(t){return this.content.maybeChild(t)},F.prototype.forEach=function(t){this.content.forEach(t)},F.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},F.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},J.textContent.get=function(){return this.textBetween(0,this.content.size,"")},F.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},J.firstChild.get=function(){return this.content.firstChild},J.lastChild.get=function(){return this.content.lastChild},F.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},F.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},F.prototype.hasMarkup=function(t,e,n){return this.type==t&&h(this.attrs,e||t.defaultAttrs||R)&&p.sameSet(this.marks,n||p.none)},F.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},F.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},F.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},F.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return c.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o).content.cut(r.pos-s,i.pos-s);return new c(a,r.depth-o,i.depth-o)},F.prototype.replace=function(t,e,n){return y(this.resolve(t),this.resolve(e),n)},F.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(!(e=e.maybeChild(r)))return null;if(i==t||e.isText)return e;t-=i+1}},F.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},F.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},F.prototype.resolve=function(t){return O.resolveCached(this,t)},F.prototype.resolveNoCache=function(t){return O.resolve(this,t)},F.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,function(t){return n.isInSet(t.marks)&&(r=!0),!r}),r},J.isBlock.get=function(){return this.type.isBlock},J.isTextblock.get=function(){return this.type.isTextblock},J.inlineContent.get=function(){return this.type.inlineContent},J.isInline.get=function(){return this.type.isInline},J.isText.get=function(){return this.type.isText},J.isLeaf.get=function(){return this.type.isLeaf},J.isAtom.get=function(){return this.type.isAtom},F.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),D(this.marks,t)},F.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},F.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=i.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var s=this.contentMatchAt(t).matchFragment(n,r,o),a=s&&s.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var h=r;h<o;h++)if(!this.type.allowsMarks(n.child(h).marks))return!1;return!0},F.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd},F.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},F.prototype.defaultContentType=function(t){return this.contentMatchAt(t).defaultType},F.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach(function(t){return t.check()})},F.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(t){return t.toJSON()})),t},F.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=i.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(F.prototype,J);var A=function(t){function e(e,n,r,i){if(t.call(this,e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{},nodeSize:{}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):D(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(F);function D(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var j=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},P={inlineContent:{},defaultType:{},edgeCount:{}};j.parse=function(t,e){var n=new q(t,e);if(null==n.next)return j.empty;var r=W(n);n.next&&n.err("Unexpected trailing text");var i=V(Y(r));return B(i,n),i},j.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},j.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r},P.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},P.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},j.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},j.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(s,a){var h=s.matchFragment(t,n);if(h&&(!e||h.validEnd))return i.from(a.map(function(t){return t.createAndFill()}));for(var p=0;p<s.next.length;p+=2){var f=s.next[p],c=s.next[p+1];if(!f.isText&&!f.hasRequiredAttrs()&&-1==r.indexOf(c)){r.push(c);var u=o(c,a.concat(f));if(u)return u}}}(this,[])},j.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},j.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var h=i.next[a];h.isLeaf||h.hasRequiredAttrs()||h.name in e||r.type&&!i.next[a+1].validEnd||(n.push({match:h.contentMatch,type:h,via:r}),e[h.name]=!0)}}},P.edgeCount.get=function(){return this.next.length>>1},j.prototype.edge=function(t){var e=t<<1;if(e>this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},j.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map(function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)r+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return r}).join("\n")},Object.defineProperties(j.prototype,P),j.empty=new j(!0);var q=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},$={next:{}};function W(t){var e=[];do{e.push(H(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function H(t){var e=[];do{e.push(L(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function L(t){for(var e=X(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=K(t,e)}return e}function G(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function K(t,e){var n=G(t),r=n;return t.eat(",")&&(r="}"!=t.next?G(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Q(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function X(t){if(t.eat("(")){var e=W(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=Q(t,t.next).map(function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}});return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function Y(t){var e=[[]];return i(function t(e,o){if("choice"==e.type)return e.exprs.reduce(function(e,n){return e.concat(t(n,o))},[]);if("seq"==e.type)for(var s=0;;s++){var a=t(e.exprs[s],o);if(s==e.exprs.length-1)return a;i(a,o=n())}else{if("star"==e.type){var h=n();return r(o,h),i(t(e.expr,h),h),[r(h)]}if("plus"==e.type){var p=n();return i(t(e.expr,o),p),i(t(e.expr,p),p),[r(p)]}if("opt"==e.type)return[r(o)].concat(t(e.expr,o));if("range"==e.type){for(var f=o,c=0;c<e.min;c++){var u=n();i(t(e.expr,f),u),f=u}if(-1==e.max)i(t(e.expr,f),f);else for(var l=e.min;l<e.max;l++){var d=n();r(f,d),i(t(e.expr,f),d),f=d}return[r(f)]}if("name"==e.type)return[r(o,null,e.value)]}}(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach(function(t){return t.to=e})}}function Z(t,e){return t-e}function U(t,e){var n=[];return function e(r){var i=t[r];if(1==i.length&&!i[0].term)return e(i[0].to);n.push(r);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,h=s.to;a||-1!=n.indexOf(h)||e(h)}}(e),n.sort(Z)}function V(t){var e=Object.create(null);return function n(r){var i=[];r.forEach(function(e){t[e].forEach(function(e){var n=e.term,r=e.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];U(t,r).forEach(function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)})}})});var o=e[r.join(",")]=new j(r.indexOf(t.length-1)>-1);for(var s=0;s<i.length;s+=2){var a=i[s+1].sort(Z);o.next.push(i[s],e[a.join(",")]||n(a))}return o}(U(t,0))}function B(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var h=i.next[a],p=i.next[a+1];s.push(h.name),!o||h.isText||h.hasRequiredAttrs()||(o=!1),-1==r.indexOf(p)&&r.push(p)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}function _(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function tt(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function et(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new it(t[n]);return e}$.next.get=function(){return this.tokens[this.pos]},q.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},q.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(q.prototype,$);var nt=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=et(n.attrs),this.defaultAttrs=_(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},rt={isInline:{},isTextblock:{},isLeaf:{},isAtom:{}};rt.isInline.get=function(){return!this.isBlock},rt.isTextblock.get=function(){return this.isBlock&&this.inlineContent},rt.isLeaf.get=function(){return this.contentMatch==j.empty},rt.isAtom.get=function(){return this.isLeaf||this.spec.atom},nt.prototype.hasRequiredAttrs=function(t){for(var e in this.attrs)if(this.attrs[e].isRequired&&(!t||!(e in t)))return!0;return!1},nt.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},nt.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:tt(this.attrs,t)},nt.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new F(this,this.computeAttrs(t),i.from(e),p.setFrom(n))},nt.prototype.createChecked=function(t,e,n){if(e=i.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new F(this,this.computeAttrs(t),e,p.setFrom(n))},nt.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=i.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(i.empty,!0);return o?new F(this,t,e.append(o),p.setFrom(n)):null},nt.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},nt.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},nt.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},nt.prototype.allowedMarks=function(t){var e;if(null==this.markSet)return t;for(var n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:p.empty:t},nt.compile=function(t,e){var n=Object.create(null);t.forEach(function(t,r){return n[t]=new nt(t,e,r)});var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(nt.prototype,rt);var it=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},ot={isRequired:{}};ot.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(it.prototype,ot);var st=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=et(r.attrs),this.rank=e,this.excluded=null;var i=_(this.attrs);this.instance=i&&new p(this,i)};st.prototype.create=function(t){return!t&&this.instance?this.instance:new p(this,tt(this.attrs,t))},st.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach(function(t,i){return n[t]=new st(t,r++,e,i)}),n},st.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},st.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},st.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var at=function(t){for(var n in this.spec={},t)this.spec[n]=t[n];this.spec.nodes=e.from(t.nodes),this.spec.marks=e.from(t.marks),this.nodes=nt.compile(this.spec.nodes,this),this.marks=st.compile(this.spec.marks,this);var r=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=r[s]||(r[s]=j.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?ht(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var h in this.marks){var p=this.marks[h],f=p.spec.excludes;p.excluded=null==f?[p]:""==f?[]:ht(this,f.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ht(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(var a in t.marks){var h=t.marks[a];("_"==i||h.spec.group&&h.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=h)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}at.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof nt))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},at.prototype.text=function(t,e){var n=this.nodes.text;return new A(n,n.defaultAttrs,t,p.setFrom(e))},at.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},at.prototype.nodeFromJSON=function(t){return F.fromJSON(this,t)},at.prototype.markFromJSON=function(t){return p.fromJSON(this,t)},at.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var pt=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})};pt.prototype.parse=function(t,e){void 0===e&&(e={});var n=new gt(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},pt.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new gt(this,e,!0);return n.addAll(t,null,e.from,e.to),c.maxOpen(n.finish())},pt.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(wt(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var i=r.getAttrs(t);if(!1===i)continue;r.attrs=i}return r}}},pt.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var i=this.styles[r];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var o=i.getAttrs(e);if(!1===o)continue;i.attrs=o}return i}}},pt.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var i=e[r];if((null==i.priority?50:i.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach(function(t){n(t=Ct(t)),t.mark=e})};for(var i in t.marks)r(i);var o;for(var s in t.nodes)o=void 0,(o=t.nodes[s].spec.parseDOM)&&o.forEach(function(t){n(t=Ct(t)),t.node=s});return e},pt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new pt(t,pt.schemaRules(t)))};var ft={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ct={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ut={ol:!0,ul:!0},lt=1,dt=2,yt=4;function vt(t){return(t?lt:0)|("full"===t?dt:0)}var mt=function(t,e,n,r,i,o){this.type=t,this.attrs=e,this.solid=r,this.match=i||(o&yt?null:t.contentMatch),this.options=o,this.content=[],this.marks=n,this.activeMarks=p.none};mt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(i.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},mt.prototype.finish=function(t){if(!(this.options&lt)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/\s+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=i.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r};var gt=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.pendingMarks=[];var r,i=e.topNode,o=vt(e.preserveWhitespace)|(n?yt:0);r=i?new mt(i.type,i.attrs,p.none,!0,e.topMatch||i.type.contentMatch,o):new mt(n?null:t.schema.topNodeType,null,p.none,!0,null,o),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},xt={top:{},currentPos:{}};function kt(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&ut.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function wt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function St(t){for(var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];e=n.exec(t);)r.push(e[1],e[2].trim());return r}function Ct(t){var e={};for(var n in t)e[n]=t[n];return e}xt.top.get=function(){return this.nodes[this.open]},gt.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(St(e)):null;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i])}},gt.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/\S/.test(e)){if(n.options&lt)n.options&dt||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/\s+/g," "),/^\s/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/\s$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},gt.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();ut.hasOwnProperty(e)&&kt(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:ct.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip){n&&n.skip.nodeType&&(t=n.skip);var r,i=this.top,o=this.needsBlock;ft.hasOwnProperty(e)&&(r=!0,i.type||(this.needsBlock=!0)),this.addAll(t),r&&this.sync(i),this.needsBlock=o}else this.addElementByRule(t,n)},gt.prototype.readStyles=function(t){for(var e=p.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},gt.prototype.addElementByRule=function(t,e){var n,r,i,o=this;e.node?(r=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(r.create(e.attrs)):n=this.enter(r,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var s=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(function(t){return o.insertNode(t)});else{var a=e.contentElement;"string"==typeof a?a=t.querySelector(a):"function"==typeof a&&(a=a(t)),a||(a=t),this.findAround(t,a,!0),this.addAll(a,n)}return n&&(this.sync(s),this.open--),i&&this.removePendingMark(i),!0},gt.prototype.addAll=function(t,e,n,r){for(var i=n||0,o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o),e&&ft.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},gt.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},gt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));n.content.push(t.mark(r))}},gt.prototype.applyPendingMarks=function(t){for(var e=0;e<this.pendingMarks.length;e++){var n=this.pendingMarks[e];t.type&&!t.type.allowsMarkType(n.type)||n.type.isInSet(t.activeMarks)||(t.activeMarks=n.addToSet(t.activeMarks),this.pendingMarks.splice(e--,1))}},gt.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&(this.applyPendingMarks(this.top),this.enterInner(t,e,!0,n)),r},gt.prototype.enterInner=function(t,e,n,r){this.closeExtra();var i=this.top;i.match=i.match&&i.match.matchType(t,e);var o=null==r?i.options&~yt:vt(r);i.options&yt&&0==i.content.length&&(o|=yt),this.nodes.push(new mt(t,e,i.activeMarks,n,null,o)),this.open++},gt.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},gt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},gt.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},gt.prototype.addPendingMark=function(t){this.pendingMarks.push(t)},gt.prototype.removePendingMark=function(t){var e=this.pendingMarks.lastIndexOf(t);if(e>-1)this.pendingMarks.splice(e,1);else{var n=this.top;n.activeMarks=t.removeFromSet(n.activeMarks)}},xt.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},gt.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},gt.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},gt.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},gt.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},gt.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var h=n[t];if(""==h){if(t==n.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var p=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!p||p.name!=h&&-1==p.groups.indexOf(h))return!1;a--}return!0};return s(n.length-1,this.open)},gt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},Object.defineProperties(gt.prototype,xt);var Mt=function(t,e){this.nodes=t||{},this.marks=e||{}};function Ot(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function bt(t){return t.document||window.document}Mt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=bt(e).createDocumentFragment());var i=n,o=null;return t.forEach(function(t){if(o||t.marks.length){o||(o=[]);for(var n=0,s=0;n<o.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(o[n]))break;n+=2,s++}else s++}for(;n<o.length;)i=o.pop(),o.pop();for(;s<t.marks.length;){var h=t.marks[s++],p=r.serializeMark(h,t.isInline,e);p&&(o.push(h,i),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(r.serializeNode(t,e))}),n},Mt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=Mt.renderSpec(bt(e),this.nodes[t.type.name](t)),r=n.dom,i=n.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,i,e):this.serializeFragment(t.content,e,i)}return r},Mt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n},Mt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Mt.renderSpec(bt(n),r(t,e))},Mt.renderSpec=function(t,e){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var n=t.createElement(e[0]),r=null,i=e[1],o=1;if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i))for(var s in o=2,i)"style"==s?n.style.cssText=i[s]:null!=i[s]&&n.setAttribute(s,i[s]);for(var a=o;a<e.length;a++){var h=e[a];if(0===h){if(a<e.length-1||a>o)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var p=Mt.renderSpec(t,h),f=p.dom,c=p.contentDOM;if(n.appendChild(f),c){if(r)throw new RangeError("Multiple content holes");r=c}}return{dom:n,contentDOM:r}},Mt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Mt(this.nodesFromSchema(t),this.marksFromSchema(t)))},Mt.nodesFromSchema=function(t){var e=Ot(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Mt.marksFromSchema=function(t){return Ot(t.marks)},exports.Node=F,exports.ResolvedPos=O,exports.NodeRange=N,exports.Fragment=i,exports.Slice=c,exports.ReplaceError=f,exports.Mark=p,exports.Schema=at,exports.NodeType=nt,exports.MarkType=st,exports.ContentMatch=j,exports.DOMParser=pt,exports.DOMSerializer=Mt;
},{"orderedmap":"mAgk"}],"aJvy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("prosemirror-model"),e=65535,r=Math.pow(2,16);function n(t,e){return t+e*r}function o(t){return t&e}function i(t){return(t-(t&e))/r}var p=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null),this.pos=t,this.deleted=e,this.recover=r},a=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};a.prototype.recover=function(t){var e=0,r=o(t);if(!this.inverted)for(var n=0;n<r;n++)e+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*r]+e+i(t)},a.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},a.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},a.prototype._map=function(t,e,r){for(var o=0,i=this.inverted?2:1,a=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?o:0);if(c>t)break;var h=this.ranges[s+i],f=this.ranges[s+a],l=c+h;if(t<=l){var u=c+o+((h?t==c?-1:t==l?1:e:e)<0?0:f);if(r)return u;var d=n(s/3,t-c);return new p(u,e<0?t!=c:t!=l,d)}o+=f-h}return r?t+o:new p(t+o)},a.prototype.touches=function(t,e){for(var r=0,n=o(e),i=this.inverted?2:1,p=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>t)break;var c=this.ranges[a+i];if(t<=s+c&&a==3*n)return!0;r+=this.ranges[a+p]-c}return!1},a.prototype.forEach=function(t){for(var e=this.inverted?2:1,r=this.inverted?1:2,n=0,o=0;n<this.ranges.length;n+=3){var i=this.ranges[n],p=i-(this.inverted?o:0),a=i+(this.inverted?0:o),s=this.ranges[n+e],c=this.ranges[n+r];t(p,p+s,a,a+c),o+=c-s}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(t){return 0==t?a.empty:new a(t<0?[0,-t,0]:[0,0,t])},a.empty=new a([]);var s=function(t,e,r,n){this.maps=t||[],this.from=r||0,this.to=null==n?this.maps.length:n,this.mirror=e};function c(t){var e=Error.call(this,t);return e.__proto__=c.prototype,e}s.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new s(this.maps,this.mirror,t,e)},s.prototype.copy=function(){return new s(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},s.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},s.prototype.appendMapping=function(t){for(var e=0,r=this.maps.length;e<t.maps.length;e++){var n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?r+n:null)}},s.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},s.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},s.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,r=this.maps.length+t.maps.length;e>=0;e--){var n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?r-n-1:null)}},s.prototype.invert=function(){var t=new s;return t.appendMappingInverted(this),t},s.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,e);return t},s.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},s.prototype._map=function(t,e,r){for(var n=!1,o=null,i=this.from;i<this.to;i++){var a=this.maps[i],s=o&&o[i];if(null!=s&&a.touches(t,s))t=a.recover(s);else{var c=a.mapResult(t,e);if(null!=c.recover){var h=this.getMirror(i);if(null!=h&&h>i&&h<this.to){if(c.deleted){i=h,t=this.maps[h].recover(c.recover);continue}(o||(o=Object.create(null)))[h]=c.recover}}c.deleted&&(n=!0),t=c.pos}}return r?t:new p(t,n)},c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="TransformError";var h=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new s},f={before:{},docChanged:{}};function l(){throw new Error("Override me")}f.before.get=function(){return this.docs.length?this.docs[0]:this.doc},h.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new c(e.failed);return this},h.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},f.docChanged.get=function(){return this.steps.length>0},h.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(h.prototype,f);var u=Object.create(null),d=function(){};d.prototype.apply=function(t){return l()},d.prototype.getMap=function(){return a.empty},d.prototype.invert=function(t){return l()},d.prototype.map=function(t){return l()},d.prototype.merge=function(t){return null},d.prototype.toJSON=function(){return l()},d.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=u[e.stepType];if(!r)throw new RangeError("No step type "+e.stepType+" defined");return r.fromJSON(t,e)},d.jsonID=function(t,e){if(t in u)throw new RangeError("Duplicate use of step JSON ID "+t);return u[t]=e,e.prototype.jsonID=t,e};var m=function(t,e){this.doc=t,this.failed=e};m.ok=function(t){return new m(t,null)},m.fail=function(t){return new m(null,t)},m.fromReplace=function(e,r,n,o){try{return m.ok(e.replace(r,n,o))}catch(i){if(i instanceof t.ReplaceError)return m.fail(i.message);throw i}};var v=function(e){function r(t,r,n,o){e.call(this),this.from=t,this.to=r,this.slice=n,this.structure=!!o}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(t){return this.structure&&g(t,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(t,this.from,this.to,this.slice)},r.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},r.prototype.invert=function(t){return new r(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted?null:new r(e.pos,Math.max(e.pos,n.pos),this.slice)},r.prototype.merge=function(e){if(!(e instanceof r)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?t.Slice.empty:new t.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new r(e.from,this.to,n,this.structure)}var o=this.slice.size+e.slice.size==0?t.Slice.empty:new t.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new r(this.from,this.to+(e.to-e.from),o,this.structure)},r.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},r.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new r(n.from,n.to,t.Slice.fromJSON(e,n.slice),!!n.structure)},r}(d);d.jsonID("replace",v);var y=function(e){function r(t,r,n,o,i,p,a){e.call(this),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=o,this.slice=i,this.insert=p,this.structure=!!a}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(t){if(this.structure&&(g(t,this.from,this.gapFrom)||g(t,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return m.fail("Gap is not a flat range");var r=this.slice.insertAt(this.insert,e.content);return r?m.fromReplace(t,this.from,this.to,r):m.fail("Content does not fit in gap")},r.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},r.prototype.invert=function(t){var e=this.gapTo-this.gapFrom;return new r(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return e.deleted&&n.deleted||o<e.pos||i>n.pos?null:new r(e.pos,n.pos,o,i,this.slice,this.insert,this.structure)},r.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},r.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new r(n.from,n.to,n.gapFrom,n.gapTo,t.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},r}(d);function g(t,e,r){for(var n=t.resolve(e),o=r-e,i=n.depth;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0)for(var p=n.node(i).maybeChild(n.indexAfter(i));o>0;){if(!p||p.isLeaf)return!0;p=p.firstChild,o--}return!1}function S(t,e,r){return(0==e||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function w(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),r=t.depth;;--r){var n=t.$from.node(r),o=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&n.canReplace(o,i,e))return r;if(0==r||n.type.spec.isolating||!S(n,o,i))break}}function x(t,e,r,n){void 0===n&&(n=t);var o=C(t,e),i=o&&M(n,e);return i?o.map(k).concat({type:e,attrs:r}).concat(i.map(k)):null}function k(t){return{type:t,attrs:null}}function C(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;var p=i.length?i[0]:e;return r.canReplaceWith(n,o,p)?i:null}function M(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.child(n),p=e.contentMatch.findWrapping(i.type);if(!p)return null;for(var a=(p.length?p[p.length-1]:e).contentMatch,s=n;a&&s<o;s++)a=a.matchType(r.child(s).type);return a&&a.validEnd?p:null}function b(t,e,r){var n=t.resolve(e),o=n.index();return n.parent.canReplaceWith(o,o+1,r)}function E(t,e,r,n){void 0===r&&(r=1);var o=t.resolve(e),i=o.depth-r,p=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!p.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,s=r-2;a>i;a--,s--){var c=o.node(a),h=o.index(a);if(c.type.spec.isolating)return!1;var f=c.content.cutByIndex(h,c.childCount),l=n&&n[s]||c;if(l!=c&&(f=f.replaceChild(0,l.type.create(l.attrs))),!c.canReplace(h+1,c.childCount)||!l.type.validContent(f))return!1}var u=o.indexAfter(i),d=n&&n[0];return o.node(i).canReplaceWith(u,u,d?d.type:o.node(i+1).type)}function R(t,e){var r=t.resolve(e),n=r.index();return T(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function T(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function F(t,e,r){void 0===r&&(r=-1);for(var n=t.resolve(e),o=n.depth;;o--){var i=void 0,p=void 0;if(o==n.depth?(i=n.nodeBefore,p=n.nodeAfter):r>0?(i=n.node(o+1),p=n.node(o).maybeChild(n.index(o)+1)):(i=n.node(o).maybeChild(n.index(o)-1),p=n.node(o+1)),i&&!i.isTextblock&&T(i,p))return e;if(0==o)break;e=r<0?n.before(o):n.after(o)}}function O(t,e,r){var n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(0==n.parentOffset)for(var o=n.depth-1;o>=0;o--){var i=n.index(o);if(n.node(o).canReplaceWith(i,i,r))return n.before(o+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(var p=n.depth-1;p>=0;p--){var a=n.indexAfter(p);if(n.node(p).canReplaceWith(a,a,r))return n.after(p+1);if(a<n.node(p).childCount)return null}}function A(t,e,r){var n=t.resolve(e);if(!r.content.size)return e;for(var o=r.content,i=0;i<r.openStart;i++)o=o.firstChild.content;for(var p=1;p<=(0==r.openStart&&r.size?2:1);p++)for(var a=n.depth;a>=0;a--){var s=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,c=n.index(a)+(s>0?1:0);if(1==p?n.node(a).canReplace(c,c,o):n.node(a).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==s?n.pos:s<0?n.before(a+1):n.after(a+1)}return null}function I(e,r,n){for(var o=[],i=0;i<e.childCount;i++){var p=e.child(i);p.content.size&&(p=p.copy(I(p.content,r,p))),p.isInline&&(p=r(p,n,i)),o.push(p)}return t.Fragment.fromArray(o)}d.jsonID("replaceAround",y),h.prototype.lift=function(e,r){for(var n=e.$from,o=e.$to,i=e.depth,p=n.before(i+1),a=o.after(i+1),s=p,c=a,h=t.Fragment.empty,f=0,l=i,u=!1;l>r;l--)u||n.index(l)>0?(u=!0,h=t.Fragment.from(n.node(l).copy(h)),f++):s--;for(var d=t.Fragment.empty,m=0,v=i,g=!1;v>r;v--)g||o.after(v+1)<o.end(v)?(g=!0,d=t.Fragment.from(o.node(v).copy(d)),m++):c++;return this.step(new y(s,c,p,a,new t.Slice(h.append(d),f,m),h.size-f,!0))},h.prototype.wrap=function(e,r){for(var n=t.Fragment.empty,o=r.length-1;o>=0;o--)n=t.Fragment.from(r[o].type.create(r[o].attrs,n));var i=e.start,p=e.end;return this.step(new y(i,p,i,p,new t.Slice(n,0,0),r.length,!0))},h.prototype.setBlockType=function(e,r,n,o){var i=this;if(void 0===r&&(r=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var p=this.steps.length;return this.doc.nodesBetween(e,r,function(e,r){if(e.isTextblock&&!e.hasMarkup(n,o)&&b(i.doc,i.mapping.slice(p).map(r),n)){i.clearIncompatible(i.mapping.slice(p).map(r,1),n);var a=i.mapping.slice(p),s=a.map(r,1),c=a.map(r+e.nodeSize,1);return i.step(new y(s,c,s+1,c-1,new t.Slice(t.Fragment.from(n.create(o,null,e.marks)),0,0),1,!0)),!1}}),this},h.prototype.setNodeMarkup=function(e,r,n,o){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");r||(r=i.type);var p=r.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,p);if(!r.validContent(i.content))throw new RangeError("Invalid content for node type "+r.name);return this.step(new y(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new t.Slice(t.Fragment.from(p),0,0),1,!0))},h.prototype.split=function(e,r,n){void 0===r&&(r=1);for(var o=this.doc.resolve(e),i=t.Fragment.empty,p=t.Fragment.empty,a=o.depth,s=o.depth-r,c=r-1;a>s;a--,c--){i=t.Fragment.from(o.node(a).copy(i));var h=n&&n[c];p=t.Fragment.from(h?h.type.create(h.attrs,p):o.node(a).copy(p))}return this.step(new v(e,e,new t.Slice(i.append(p),r,r,!0)))},h.prototype.join=function(e,r){void 0===r&&(r=1);var n=new v(e-r,e+r,t.Slice.empty,!0);return this.step(n)};var N=function(e){function r(t,r,n){e.call(this),this.from=t,this.to=r,this.mark=n}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(e){var r=this,n=e.slice(this.from,this.to),o=e.resolve(this.from),i=o.node(o.sharedDepth(this.to)),p=new t.Slice(I(n.content,function(t,e){return e.type.allowsMarkType(r.mark.type)?t.mark(r.mark.addToSet(t.marks)):t},i),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,p)},r.prototype.invert=function(){return new z(this.from,this.to,this.mark)},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new r(e.pos,n.pos,this.mark)},r.prototype.merge=function(t){if(t instanceof r&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new r(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},r.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},r.fromJSON=function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new r(e.from,e.to,t.markFromJSON(e.mark))},r}(d);d.jsonID("addMark",N);var z=function(e){function r(t,r,n){e.call(this),this.from=t,this.to=r,this.mark=n}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(e){var r=this,n=e.slice(this.from,this.to),o=new t.Slice(I(n.content,function(t){return t.mark(r.mark.removeFromSet(t.marks))}),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,o)},r.prototype.invert=function(){return new N(this.from,this.to,this.mark)},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new r(e.pos,n.pos,this.mark)},r.prototype.merge=function(t){if(t instanceof r&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new r(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},r.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},r.fromJSON=function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new r(e.from,e.to,t.markFromJSON(e.mark))},r}(d);function _(e,r,n,o){if(void 0===n&&(n=r),void 0===o&&(o=t.Slice.empty),r==n&&!o.size)return null;var i=e.resolve(r),p=e.resolve(n);if($(i,p,o))return new v(r,n,o);var a=B(i,H(i,o)),s=P(i,p,a);if(!s)return null;if(a.size!=s.size&&L(i,p,a)){for(var c=p.depth,h=p.after(c);c>1&&h==p.end(--c);)++h;var f=P(i,e.resolve(h),a);if(f)return new y(r,h,n,p.end(),f,a.size)}return s.size||r!=n?new v(r,n,s):null}function J(e,r,n,o){var i=t.Fragment.empty,p=0,a=n[r];if(e.depth>r){var s=J(e,r+1,n,o||a);p=s.openEnd+1,i=t.Fragment.from(e.node(r+1).copy(s.content))}return a&&(i=i.append(a.content),p=a.openEnd),o&&(i=i.append(e.node(r).contentMatchAt(e.indexAfter(r)).fillBefore(t.Fragment.empty,!0)),p=0),{content:i,openEnd:p}}function B(e,r){var n=J(e,0,r,!1),o=n.content,i=n.openEnd;return new t.Slice(o,e.depth,i||0)}function W(t,e,r,n,o,i,p){var a,s=t.childCount,c=s-(p>0?1:0),h=i<0?e:r.node(o);a=i<0?h.contentMatchAt(c):1==s&&p>0?h.contentMatchAt(i?r.index(o):r.indexAfter(o)):h.contentMatchAt(r.indexAfter(o)).matchFragment(t,s>0&&i?1:0,c);var f=n.node(o);if(p>0&&o<n.depth){var l=f.content.cutByIndex(n.indexAfter(o)).addToStart(t.lastChild),u=a.fillBefore(l,!0);if(u&&u.size&&i>0&&1==s&&(u=null),u){var d=W(t.lastChild.content,t.lastChild,r,n,o+1,1==s?i-1:-1,p-1);if(d){var m=t.lastChild.copy(d);return u.size?t.cutByIndex(0,s-1).append(u).addToEnd(m):t.replaceChild(s-1,m)}}}p>0&&(a=a.matchType((1==s&&i>0?r.node(o+1):t.lastChild).type));var v=n.index(o);if(v==f.childCount&&!f.type.compatibleContent(e.type))return null;for(var y=a.fillBefore(f.content,!0,v),g=v;y&&g<f.content.childCount;g++)h.type.allowsMarks(f.content.child(g).marks)||(y=null);if(!y)return null;if(p>0){var S=D(t.lastChild,p-1,r,o+1,1==s?i-1:-1);t=t.replaceChild(s-1,S)}return t=t.append(y),n.depth>o&&(t=t.addToEnd(j(n,o+1))),t}function D(e,r,n,o,i){var p,a=e.content,s=a.childCount;if(p=i>=0?n.node(o).contentMatchAt(n.indexAfter(o)).matchFragment(a,i>0?1:0,s):e.contentMatchAt(s),r>0){var c=D(a.lastChild,r-1,n,o+1,1==s?i-1:-1);a=a.replaceChild(s-1,c)}return e.copy(a.append(p.fillBefore(t.Fragment.empty,!0)))}function j(t,e){var r=t.node(e),n=r.contentMatchAt(0).fillBefore(r.content,!0,t.index(e));return t.depth>e&&(n=n.addToEnd(j(t,e+1))),r.copy(n)}function q(e,r,n){for(;r>0&&n>0&&1==e.childCount;)e=e.firstChild.content,r--,n--;return new t.Slice(e,r,n)}function P(t,e,r){var n=W(r.content,t.node(0),t,e,0,r.openStart,r.openEnd);return n?q(n,r.openStart,e.depth):null}function $(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}function L(t,e,r){if(!e.parent.isTextblock)return!1;var n,o=r.openEnd?G(r.content,r.openEnd):t.node(t.depth-(r.openStart-r.openEnd));if(!o.isTextblock)return!1;for(var i=e.index();i<e.parent.childCount;i++)if(!o.type.allowsMarks(e.parent.child(i).marks))return!1;return r.openEnd?n=o.contentMatchAt(o.childCount):(n=o.contentMatchAt(o.childCount),r.size&&(n=n.matchFragment(r.content,r.openStart?1:0))),(n=n.matchFragment(e.parent.content,e.index()))&&n.validEnd}function G(t,e){for(var r=1;r<e;r++)t=t.lastChild.content;return t.lastChild}function H(t,e){for(var r=new K(t),n=1;e.size&&n<=3;n++)e=r.placeSlice(e.content,e.openStart,e.openEnd,n);for(;r.open.length;)r.closeNode();return r.placed}d.jsonID("removeMark",z),h.prototype.addMark=function(t,e,r){var n=this,o=[],i=[],p=null,a=null;return this.doc.nodesBetween(t,e,function(n,s,c){if(n.isInline){var h=n.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){for(var f=Math.max(s,t),l=Math.min(s+n.nodeSize,e),u=r.addToSet(h),d=0;d<h.length;d++)h[d].isInSet(u)||(p&&p.to==f&&p.mark.eq(h[d])?p.to=l:o.push(p=new z(f,l,h[d])));a&&a.to==f?a.to=l:i.push(a=new N(f,l,r))}}}),o.forEach(function(t){return n.step(t)}),i.forEach(function(t){return n.step(t)}),this},h.prototype.removeMark=function(e,r,n){var o=this;void 0===n&&(n=null);var i=[],p=0;return this.doc.nodesBetween(e,r,function(o,a){if(o.isInline){p++;var s=null;if(n instanceof t.MarkType){var c=n.isInSet(o.marks);c&&(s=[c])}else n?n.isInSet(o.marks)&&(s=[n]):s=o.marks;if(s&&s.length)for(var h=Math.min(a+o.nodeSize,r),f=0;f<s.length;f++){for(var l=s[f],u=void 0,d=0;d<i.length;d++){var m=i[d];m.step==p-1&&l.eq(i[d].style)&&(u=m)}u?(u.to=h,u.step=p):i.push({style:l,from:Math.max(a,e),to:h,step:p})}}}),i.forEach(function(t){return o.step(new z(t.from,t.to,t.style))}),this},h.prototype.clearIncompatible=function(e,r,n){void 0===n&&(n=r.contentMatch);for(var o=this.doc.nodeAt(e),i=[],p=e+1,a=0;a<o.childCount;a++){var s=o.child(a),c=p+s.nodeSize,h=n.matchType(s.type,s.attrs);if(h){n=h;for(var f=0;f<s.marks.length;f++)r.allowsMarkType(s.marks[f].type)||this.step(new z(p,c,s.marks[f]))}else i.push(new v(p,c,t.Slice.empty));p=c}if(!n.validEnd){var l=n.fillBefore(t.Fragment.empty,!0);this.replace(p,p,new t.Slice(l,0,0))}for(var u=i.length-1;u>=0;u--)this.step(i[u]);return this},h.prototype.replace=function(e,r,n){void 0===r&&(r=e),void 0===n&&(n=t.Slice.empty);var o=_(this.doc,e,r,n);return o&&this.step(o),this},h.prototype.replaceWith=function(e,r,n){return this.replace(e,r,new t.Slice(t.Fragment.from(n),0,0))},h.prototype.delete=function(e,r){return this.replace(e,r,t.Slice.empty)},h.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var K=function(e){this.open=[];for(var r=0;r<=e.depth;r++){var n=e.node(r),o=n.contentMatchAt(e.indexAfter(r));this.open.push({parent:n,match:o,content:t.Fragment.empty,wrapper:!1,openEnd:0,depth:r})}this.placed=[]};function Q(t,e,r){var n=t.content;if(e>1){var o=Q(t.firstChild,e-1,1==t.childCount?r-1:0);n=t.content.replaceChild(0,o)}var i=t.type.contentMatch.fillBefore(n,0==r);return t.copy(i.append(n))}function U(e,r){var n=e.content;if(r>1){var o=U(e.lastChild,r-1);n=e.content.replaceChild(e.childCount-1,o)}var i=e.contentMatchAt(e.childCount).fillBefore(t.Fragment.empty,!0);return e.copy(n.append(i))}function V(t,e){return e?t.replaceChild(t.childCount-1,U(t.lastChild,e)):t}function X(t,e,r,n,o){if(e<r){var i=t.firstChild;t=t.replaceChild(0,i.copy(X(i.content,e+1,r,n,i)))}return e>n&&(t=o.contentMatchAt(0).fillBefore(t,!0).append(t)),t}function Y(t,e){for(var r=[],n=Math.min(t.depth,e.depth);n>=0;n--){var o=t.start(n);if(o<t.pos-(t.depth-n)||e.end(n)>e.pos+(e.depth-n)||t.node(n).type.spec.isolating||e.node(n).type.spec.isolating)break;o==e.start(n)&&r.push(n)}return r}K.prototype.placeSlice=function(e,r,n,o,i){if(r>0){var p=e.firstChild,a=this.placeSlice(p.content,Math.max(0,r-1),n&&1==e.childCount?n-1:0,o,p);a.content!=p.content&&(a.content.size?(e=e.replaceChild(0,p.copy(a.content)),r=a.openStart+1):(1==e.childCount&&(n=0),e=e.cutByIndex(1),r=0))}var s=this.placeContent(e,r,n,o,i);if(o>2&&s.size&&0==r){for(var c=0;c<s.content.childCount;c++){var h=s.content.child(c);this.placeContent(h.content,0,n&&c==s.content.childCount.length-1?n-1:0,o,h)}s=t.Fragment.empty}return s},K.prototype.placeContent=function(e,r,n,o,i){for(var p=0;p<e.childCount;p++){for(var a=e.child(p),s=!1,c=p==e.childCount-1,h=this.open.length-1;h>=0;h--){var f=this.open[h],l=void 0;if(o>1&&(l=f.match.findWrapping(a.type))&&(!i||!l.length||l[l.length-1]!=i.type)){for(;this.open.length-1>h;)this.closeNode();for(var u=0;u<l.length;u++)f.match=f.match.matchType(l[u]),h++,f={parent:l[u].create(),match:l[u].contentMatch,content:t.Fragment.empty,wrapper:!0,openEnd:0,depth:h+u},this.open.push(f)}var d=f.match.matchType(a.type);if(!d){var m=f.match.fillBefore(t.Fragment.from(a));if(!m){if(i&&f.match.matchType(i.type))break;continue}for(var v=0;v<m.childCount;v++){var y=m.child(v);this.addNode(f,y,0),d=f.match.matchFragment(y)}}for(;this.open.length-1>h;)this.closeNode();a=a.mark(f.parent.type.allowedMarks(a.marks)),r&&(a=Q(a,r,c?n:0),r=0),this.addNode(f,a,c?n:0),f.match=d,c&&(n=0),s=!0;break}if(!s)break}return this.open.length>1&&(p>0&&p==e.childCount||i&&this.open[this.open.length-1].parent.type==i.type)&&this.closeNode(),new t.Slice(e.cutByIndex(p),r,n)},K.prototype.addNode=function(t,e,r){t.content=V(t.content,t.openEnd).addToEnd(e),t.openEnd=r},K.prototype.closeNode=function(){var t=this.open.pop();0==t.content.size||(t.wrapper?this.addNode(this.open[this.open.length-1],t.parent.copy(t.content),t.openEnd+1):this.placed[t.depth]={depth:t.depth,content:t.content,openEnd:t.openEnd})},h.prototype.replaceRange=function(e,r,n){if(!n.size)return this.deleteRange(e,r);var o=this.doc.resolve(e),i=this.doc.resolve(r);if($(o,i,n))return this.step(new v(e,r,n));var p=Y(o,this.doc.resolve(r));0==p[p.length-1]&&p.pop();var a=-(o.depth+1);p.unshift(a);for(var s=o.depth,c=o.pos-1;s>0;s--,c--){var h=o.node(s).type.spec;if(h.defining||h.isolating)break;p.indexOf(s)>-1?a=s:o.before(s)==c&&p.splice(1,0,-s)}for(var f=p.indexOf(a),l=[],u=n.openStart,d=n.content,m=0;;m++){var y=d.firstChild;if(l.push(y),m==n.openStart)break;d=y.content}u>0&&l[u-1].type.spec.defining&&o.node(f).type!=l[u-1].type?u-=1:u>=2&&l[u-1].isTextblock&&l[u-2].type.spec.defining&&o.node(f).type!=l[u-2].type&&(u-=2);for(var g=n.openStart;g>=0;g--){var S=(g+u+1)%(n.openStart+1),w=l[S];if(w)for(var x=0;x<p.length;x++){var k=p[(x+f)%p.length],C=!0;k<0&&(C=!1,k=-k);var M=o.node(k-1),b=o.index(k-1);if(M.canReplaceWith(b,b,w.type,w.marks))return this.replace(o.before(k),C?i.after(k):r,new t.Slice(X(n.content,0,n.openStart,S),S,n.openEnd))}}return this.replace(e,r,n)},h.prototype.replaceRangeWith=function(e,r,n){if(!n.isInline&&e==r&&this.doc.resolve(e).parent.content.size){var o=O(this.doc,e,n.type);null!=o&&(e=r=o)}return this.replaceRange(e,r,new t.Slice(t.Fragment.from(n),0,0))},h.prototype.deleteRange=function(t,e){for(var r=this.doc.resolve(t),n=this.doc.resolve(e),o=Y(r,n),i=0;i<o.length;i++){var p=o[i],a=i==o.length-1;if(a&&0==p||r.node(p).type.contentMatch.validEnd)return this.delete(r.start(p),n.end(p));if(p>0&&(a||r.node(p-1).canReplace(r.index(p-1),n.indexAfter(p-1))))return this.delete(r.before(p),n.after(p))}for(var s=1;s<=r.depth;s++)if(t-r.start(s)==r.depth-s&&e>r.end(s))return this.delete(r.before(s),e);return this.delete(t,e)},exports.Transform=h,exports.TransformError=c,exports.Step=d,exports.StepResult=m,exports.joinPoint=F,exports.canJoin=R,exports.canSplit=E,exports.insertPoint=O,exports.dropPoint=A,exports.liftTarget=w,exports.findWrapping=x,exports.StepMap=a,exports.MapResult=p,exports.Mapping=s,exports.AddMarkStep=N,exports.RemoveMarkStep=z,exports.ReplaceStep=v,exports.ReplaceAroundStep=y,exports.replaceStep=_;
},{"prosemirror-model":"jjSS"}],"QIdp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("prosemirror-model"),e=require("prosemirror-transform"),r=Object.create(null),n=function(t,e,r){this.ranges=r||[new i(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},o={anchor:{},head:{},from:{},to:{},$from:{},$to:{},empty:{}};o.anchor.get=function(){return this.$anchor.pos},o.head.get=function(){return this.$head.pos},o.from.get=function(){return this.$from.pos},o.to.get=function(){return this.$to.pos},o.$from.get=function(){return this.ranges[0].$from},o.$to.get=function(){return this.ranges[0].$to},o.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},n.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},n.prototype.replace=function(e,r){void 0===r&&(r=t.Slice.empty);for(var n=r.content.lastChild,o=null,i=0;i<r.openEnd;i++)o=n,n=n.lastChild;for(var s=e.steps.length,a=this.ranges,c=0;c<a.length;c++){var p=a[c],u=p.$from,h=p.$to,f=e.mapping.slice(s);e.replaceRange(f.map(u.pos),f.map(h.pos),c?t.Slice.empty:r),0==c&&l(e,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}},n.prototype.replaceWith=function(t,e){for(var r=t.steps.length,n=this.ranges,o=0;o<n.length;o++){var i=n[o],s=i.$from,a=i.$to,c=t.mapping.slice(r),p=c.map(s.pos),u=c.map(a.pos);o?t.deleteRange(p,u):(t.replaceRangeWith(p,u,e),l(t,r,e.isInline?-1:1))}},n.findFrom=function(t,e,r){var n=t.parent.inlineContent?new s(t):f(t.node(0),t.parent,t.pos,t.index(),e,r);if(n)return n;for(var o=t.depth-1;o>=0;o--){var i=e<0?f(t.node(0),t.node(o),t.before(o+1),t.index(o),e,r):f(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,r);if(i)return i}},n.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new u(t.node(0))},n.atStart=function(t){return f(t,t,0,0,1)||new u(t)},n.atEnd=function(t){return f(t,t,t.content.size,t.childCount,-1)||new u(t)},n.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=r[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},n.jsonID=function(t,e){if(t in r)throw new RangeError("Duplicate use of selection JSON ID "+t);return r[t]=e,e.prototype.jsonID=t,e},n.prototype.getBookmark=function(){return s.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(n.prototype,o),n.prototype.visible=!0;var i=function(t,e){this.$from=t,this.$to=e},s=function(e){function r(t,r){void 0===r&&(r=t),e.call(this,t,r)}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={$cursor:{}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},r.prototype.map=function(t,n){var o=t.resolve(n.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=t.resolve(n.map(this.anchor));return new r(i.parent.inlineContent?i:o,o)},r.prototype.replace=function(r,n){if(void 0===n&&(n=t.Slice.empty),e.prototype.replace.call(this,r,n),n==t.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&r.ensureMarks(o)}},r.prototype.eq=function(t){return t instanceof r&&t.anchor==this.anchor&&t.head==this.head},r.prototype.getBookmark=function(){return new a(this.anchor,this.head)},r.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},r.fromJSON=function(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new r(t.resolve(e.anchor),t.resolve(e.head))},r.create=function(t,e,r){void 0===r&&(r=e);var n=t.resolve(e);return new this(n,r==e?n:t.resolve(r))},r.between=function(t,n,o){var i=t.pos-n.pos;if(o&&!i||(o=i>=0?1:-1),!n.parent.inlineContent){var s=e.findFrom(n,o,!0)||e.findFrom(n,-o,!0);if(!s)return e.near(n,o);n=s.$head}return t.parent.inlineContent||(0==i?t=n:(t=(e.findFrom(t,-o,!0)||e.findFrom(t,o,!0)).$anchor).pos<n.pos!=i<0&&(t=n)),new r(t,n)},Object.defineProperties(r.prototype,n),r}(n);n.jsonID("text",s);var a=function(t,e){this.anchor=t,this.head=e};a.prototype.map=function(t){return new a(t.map(this.anchor),t.map(this.head))},a.prototype.resolve=function(t){return s.between(t.resolve(this.anchor),t.resolve(this.head))};var c=function(e){function r(t){var r=t.nodeAfter,n=t.node(0).resolve(t.pos+r.nodeSize);e.call(this,t,n),this.node=r}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.map=function(t,n){var o=n.mapResult(this.anchor),i=o.deleted,s=o.pos,a=t.resolve(s);return i?e.near(a):new r(a)},r.prototype.content=function(){return new t.Slice(t.Fragment.from(this.node),0,0)},r.prototype.eq=function(t){return t instanceof r&&t.anchor==this.anchor},r.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},r.prototype.getBookmark=function(){return new p(this.anchor)},r.fromJSON=function(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new r(t.resolve(e.anchor))},r.create=function(t,e){return new this(t.resolve(e))},r.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},r}(n);c.prototype.visible=!1,n.jsonID("node",c);var p=function(t){this.anchor=t};p.prototype.map=function(t){var e=t.mapResult(this.anchor),r=e.deleted,n=e.pos;return r?new a(n,n):new p(n)},p.prototype.resolve=function(t){var e=t.resolve(this.anchor),r=e.nodeAfter;return r&&c.isSelectable(r)?new c(e):n.near(e)};var u=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return h},e}(n);n.jsonID("all",u);var h={map:function(){return this},resolve:function(t){return new u(t)}};function f(t,e,r,n,o,i){if(e.inlineContent)return s.create(t,r);for(var a=n-(o>0?0:1);o>0?a<e.childCount:a>=0;a+=o){var p=e.child(a);if(p.isAtom){if(!i&&c.isSelectable(p))return c.create(t,r-(o<0?p.nodeSize:0))}else{var u=f(t,p,r+o,o<0?p.childCount:0,o,i);if(u)return u}r+=p.nodeSize*o}}function l(t,r,o){var i=t.steps.length-1;if(!(i<r)){var s,a=t.steps[i];if(a instanceof e.ReplaceStep||a instanceof e.ReplaceAroundStep)t.mapping.maps[i].forEach(function(t,e,r,n){null==s&&(s=n)}),t.setSelection(n.near(t.doc.resolve(s),o))}}var d=1,y=2,m=4,v=function(e){function r(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r;var n={selection:{},selectionSet:{},storedMarksSet:{},isGeneric:{},scrolledIntoView:{}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},r.prototype.setSelection=function(t){return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|d)&~y,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&d)>0},r.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=y,this},r.prototype.ensureMarks=function(e){return t.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},r.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},r.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&y)>0},r.prototype.addStep=function(t,r){e.prototype.addStep.call(this,t,r),this.updated=this.updated&~y,this.storedMarks=null},r.prototype.setTime=function(t){return this.time=t,this},r.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},r.prototype.replaceSelectionWith=function(e,r){var n=this.selection;return!1!==r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||t.Mark.none))),n.replaceWith(this,e),this},r.prototype.deleteSelection=function(){return this.selection.replace(this),this},r.prototype.insertText=function(t,e,r){void 0===r&&(r=e);var n=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(n.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,r);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=r==e?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(e,r,n.text(t,o))},r.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},r.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},r.prototype.scrollIntoView=function(){return this.updated|=m,this},n.scrolledIntoView.get=function(){return(this.updated&m)>0},Object.defineProperties(r.prototype,n),r}(e.Transform);function g(t,e){return e&&t?t.bind(e):t}var S=function(t,e,r){this.name=t,this.init=g(e.init,r),this.apply=g(e.apply,r)},k=[new S("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new S("selection",{init:function(t,e){return t.selection||n.atStart(e.doc)},apply:function(t){return t.selection}}),new S("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new S("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],w=function(t,e){var r=this;this.schema=t,this.fields=k.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach(function(t){if(r.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");r.plugins.push(t),r.pluginsByKey[t.key]=t,t.spec.state&&r.fields.push(new S(t.key,t.spec.state,t))})},O=function(t){this.config=t},$={schema:{},plugins:{},tr:{}};$.schema.get=function(){return this.config.schema},$.plugins.get=function(){return this.config.plugins},O.prototype.apply=function(t){return this.applyTransaction(t).state},O.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=e){var n=this.config.plugins[r];if(n.spec.filterTransaction&&!n.spec.filterTransaction.call(n,t,this))return!1}return!0},O.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],r=this.applyInner(t),n=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=n?n[i].n:0,c=n?n[i].state:this,p=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,r);if(p&&r.filterTransaction(p,i)){if(p.setMeta("appendedTransaction",t),!n){n=[];for(var u=0;u<this.config.plugins.length;u++)n.push(u<i?{state:r,n:e.length}:{state:this,n:0})}e.push(p),r=r.applyInner(p),o=!0}n&&(n[i]={state:r,n:e.length})}}if(!o)return{state:r,transactions:e}}},O.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new O(this.config),r=this.config.fields,n=0;n<r.length;n++){var o=r[n];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<M.length;i++)M[i](this,t,e);return e},$.tr.get=function(){return new v(this)},O.create=function(t){for(var e=new w(t.schema||t.doc.type.schema,t.plugins),r=new O(e),n=0;n<e.fields.length;n++)r[e.fields[n].name]=e.fields[n].init(t,r);return r},O.prototype.reconfigure=function(t){for(var e=new w(t.schema||this.schema,t.plugins),r=e.fields,n=new O(e),o=0;o<r.length;o++){var i=r[o].name;n[i]=this.hasOwnProperty(i)?this[i]:r[o].init(t,n)}return n},O.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(function(t){return t.toJSON()})),t&&"object"==typeof t)for(var r in t){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var n=t[r],o=n.spec.state;o&&o.toJSON&&(e[r]=o.toJSON.call(n,this[n.key]))}return e},O.fromJSON=function(e,r,o){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var i=new w(e.schema,e.plugins),s=new O(i);return i.fields.forEach(function(i){if("doc"==i.name)s.doc=t.Node.fromJSON(e.schema,r.doc);else if("selection"==i.name)s.selection=n.fromJSON(s.doc,r.selection);else if("storedMarks"==i.name)r.storedMarks&&(s.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(o)for(var a in o){var c=o[a],p=c.spec.state;if(c.key==i.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(r,a))return void(s[i.name]=p.fromJSON.call(c,e,r[a],s))}s[i.name]=i.init(e,s)}}),s},O.addApplyListener=function(t){M.push(t)},O.removeApplyListener=function(t){var e=M.indexOf(t);e>-1&&M.splice(e,1)},Object.defineProperties(O.prototype,$);var M=[];function b(t,e,r){for(var n in t){var o=t[n];o instanceof Function?o=o.bind(e):"handleDOMEvents"==n&&(o=b(o,e,{})),r[n]=o}return r}var N=function(t){this.props={},t.props&&b(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:x("plugin")};N.prototype.getState=function(t){return t[this.key]};var J=Object.create(null);function x(t){return t in J?t+"$"+ ++J[t]:(J[t]=0,t+"$")}var T=function(t){void 0===t&&(t="key"),this.key=x(t)};T.prototype.get=function(t){return t.config.pluginsByKey[this.key]},T.prototype.getState=function(t){return t[this.key]},exports.Selection=n,exports.SelectionRange=i,exports.TextSelection=s,exports.NodeSelection=c,exports.AllSelection=u,exports.Transaction=v,exports.EditorState=O,exports.Plugin=N,exports.PluginKey=T;
},{"prosemirror-model":"jjSS","prosemirror-transform":"aJvy"}],"B80I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-transform"),t=require("prosemirror-model"),n=require("prosemirror-state");function r(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function o(t,r,o){var c=t.selection.$cursor;if(!c||(o?!o.endOfTextblock("backward",t):c.parentOffset>0))return!1;var l=a(c);if(!l){var s=c.blockRange(),f=s&&e.liftTarget(s);return null!=f&&(r&&r(t.tr.lift(s,f).scrollIntoView()),!0)}var p=l.nodeBefore;if(!p.type.spec.isolating&&b(t,l,r))return!0;if(0==c.parent.content.size&&(i(p,"end")||n.NodeSelection.isSelectable(p))){if(r){var d=t.tr.deleteRange(c.before(),c.after());d.setSelection(i(p,"end")?n.Selection.findFrom(d.doc.resolve(d.mapping.map(l.pos,-1)),-1):n.NodeSelection.create(d.doc,l.pos-p.nodeSize)),r(d.scrollIntoView())}return!0}return!(!p.isAtom||l.depth!=c.depth-1)&&(r&&r(t.tr.delete(l.pos-p.nodeSize,l.pos).scrollIntoView()),!0)}function i(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function c(e,t,r){var o=e.selection.$cursor;if(!o||(r?!r.endOfTextblock("backward",e):o.parentOffset>0))return!1;var i=a(o),c=i&&i.nodeBefore;return!(!c||!n.NodeSelection.isSelectable(c))&&(t&&t(e.tr.setSelection(n.NodeSelection.create(e.doc,i.pos-c.nodeSize)).scrollIntoView()),!0)}function a(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function l(e,t,r){var o=e.selection.$cursor;if(!o||(r?!r.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var c=f(o);if(!c)return!1;var a=c.nodeAfter;if(b(e,c,t))return!0;if(0==o.parent.content.size&&(i(a,"start")||n.NodeSelection.isSelectable(a))){if(t){var l=e.tr.deleteRange(o.before(),o.after());l.setSelection(i(a,"start")?n.Selection.findFrom(l.doc.resolve(l.mapping.map(c.pos)),1):n.NodeSelection.create(l.doc,l.mapping.map(c.pos))),t(l.scrollIntoView())}return!0}return!(!a.isAtom||c.depth!=o.depth-1)&&(t&&t(e.tr.delete(c.pos,c.pos+a.nodeSize).scrollIntoView()),!0)}function s(e,t,r){var o=e.selection.$cursor;if(!o||(r?!r.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var i=f(o),c=i&&i.nodeAfter;return!(!c||!n.NodeSelection.isSelectable(c))&&(t&&t(e.tr.setSelection(n.NodeSelection.create(e.doc,i.pos)).scrollIntoView()),!0)}function f(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function p(t,r){var o,i=t.selection,c=i instanceof n.NodeSelection;if(c){if(i.node.isTextblock||!e.canJoin(t.doc,i.from))return!1;o=i.from}else if(null==(o=e.joinPoint(t.doc,i.from,-1)))return!1;if(r){var a=t.tr.join(o);c&&a.setSelection(n.NodeSelection.create(a.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),r(a.scrollIntoView())}return!0}function d(t,r){var o,i=t.selection;if(i instanceof n.NodeSelection){if(i.node.isTextblock||!e.canJoin(t.doc,i.to))return!1;o=i.to}else if(null==(o=e.joinPoint(t.doc,i.to,1)))return!1;return r&&r(t.tr.join(o).scrollIntoView()),!0}function u(t,n){var r=t.selection,o=r.$from,i=r.$to,c=o.blockRange(i),a=c&&e.liftTarget(c);return null!=a&&(n&&n(t.tr.lift(c,a).scrollIntoView()),!0)}function v(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function m(e,t){var r=e.selection,o=r.$head,i=r.$anchor;if(!o.parent.type.spec.code||!o.sameParent(i))return!1;var c=o.node(-1),a=o.indexAfter(-1),l=c.contentMatchAt(a).defaultType;if(!c.canReplaceWith(a,a,l))return!1;if(t){var s=o.after(),f=e.tr.replaceWith(s,s,l.createAndFill());f.setSelection(n.Selection.near(f.doc.resolve(s),1)),t(f.scrollIntoView())}return!0}function x(e,t){var r=e.selection,o=r.$from,i=r.$to;if(o.parent.inlineContent||i.parent.inlineContent)return!1;var c=o.parent.contentMatchAt(i.indexAfter()).defaultType;if(!c||!c.isTextblock)return!1;if(t){var a=(!o.parentOffset&&i.index()<i.parent.childCount?o:i).pos,l=e.tr.insert(a,c.createAndFill());l.setSelection(n.TextSelection.create(l.doc,a+1)),t(l.scrollIntoView())}return!0}function S(t,n){var r=t.selection.$cursor;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var o=r.before();if(e.canSplit(t.doc,o))return n&&n(t.tr.split(o).scrollIntoView()),!0}var i=r.blockRange(),c=i&&e.liftTarget(i);return null!=c&&(n&&n(t.tr.lift(i,c).scrollIntoView()),!0)}function g(r,o){var i=r.selection,c=i.$from,a=i.$to;if(r.selection instanceof n.NodeSelection&&r.selection.node.isBlock)return!(!c.parentOffset||!e.canSplit(r.doc,c.pos))&&(o&&o(r.tr.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;if(o){var l=a.parentOffset==a.parent.content.size,s=r.tr;r.selection instanceof n.TextSelection&&s.deleteSelection();var f=0==c.depth?null:c.node(-1).contentMatchAt(c.indexAfter(-1)).defaultType,p=l&&f?[{type:f}]:null,d=e.canSplit(s.doc,c.pos,1,p);p||d||!e.canSplit(s.doc,s.mapping.map(c.pos),1,f&&[{type:f}])||(p=[{type:f}],d=!0),d&&(s.split(s.mapping.map(c.pos),1,p),l||c.parentOffset||c.parent.type==f||!c.node(-1).canReplace(c.index(-1),c.indexAfter(-1),t.Fragment.from(f.create(),c.parent))||s.setNodeMarkup(s.mapping.map(c.before()),f)),o(s.scrollIntoView())}return!0}function h(e,t){return g(e,t&&function(n){var r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&n.ensureMarks(r),t(n)})}function k(e,t){var r,o=e.selection,i=o.$from,c=o.to,a=i.sharedDepth(c);return 0!=a&&(r=i.before(a),t&&t(e.tr.setSelection(n.NodeSelection.create(e.doc,r))),!0)}function w(e,t){return t&&t(e.tr.setSelection(new n.AllSelection(e.doc))),!0}function y(t,n,r){var o=n.nodeBefore,i=n.nodeAfter,c=n.index();return!!(o&&i&&o.type.compatibleContent(i.type))&&(!o.content.size&&n.parent.canReplace(c-1,c)?(r&&r(t.tr.delete(n.pos-o.nodeSize,n.pos).scrollIntoView()),!0):!(!n.parent.canReplace(c,c+1)||!i.isTextblock&&!e.canJoin(t.doc,n.pos))&&(r&&r(t.tr.clearIncompatible(n.pos,o.type,o.contentMatchAt(o.childCount)).join(n.pos).scrollIntoView()),!0))}function b(r,o,i){var c,a,l=o.nodeBefore,s=o.nodeAfter;if(l.type.spec.isolating||s.type.spec.isolating)return!1;if(y(r,o,i))return!0;if(o.parent.canReplace(o.index(),o.index()+1)&&(c=(a=l.contentMatchAt(l.childCount)).findWrapping(s.type))&&a.matchType(c[0]||s.type).validEnd){if(i){for(var f=o.pos+s.nodeSize,p=t.Fragment.empty,d=c.length-1;d>=0;d--)p=t.Fragment.from(c[d].create(null,p));p=t.Fragment.from(l.copy(p));var u=r.tr.step(new e.ReplaceAroundStep(o.pos-1,f,o.pos,f,new t.Slice(p,1,0),c.length,!0)),v=f+2*c.length;e.canJoin(u.doc,v)&&u.join(v),i(u.scrollIntoView())}return!0}var m=n.Selection.findFrom(o,1),x=m&&m.$from.blockRange(m.$to),S=x&&e.liftTarget(x);return null!=S&&S>=o.depth&&(i&&i(r.tr.lift(x,S).scrollIntoView()),!0)}function I(t,n){return function(r,o){var i=r.selection,c=i.$from,a=i.$to,l=c.blockRange(a),s=l&&e.findWrapping(l,t,n);return!!s&&(o&&o(r.tr.wrap(l,s).scrollIntoView()),!0)}}function M(e,t){return function(n,r){var o=n.selection,i=o.from,c=o.to,a=!1;return n.doc.nodesBetween(i,c,function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)a=!0;else{var i=n.doc.resolve(o),c=i.index();a=i.parent.canReplaceWith(c,c+1,e)}}),!!a&&(r&&r(n.tr.setBlockType(i,c,e,t).scrollIntoView()),!0)}}function A(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,c=o.$to,a=0==i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,c.pos,function(e){if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)}),a)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if(i)return i.v}return!1}function $(e,t){return function(n,r){var o=n.selection,i=o.empty,c=o.$cursor,a=o.ranges;if(i&&!c||!A(n.doc,a,e))return!1;if(r)if(c)e.isInSet(n.storedMarks||c.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{for(var l=!1,s=n.tr,f=0;!l&&f<a.length;f++){var p=a[f],d=p.$from,u=p.$to;l=n.doc.rangeHasMark(d.pos,u.pos,e)}for(var v=0;v<a.length;v++){var m=a[v],x=m.$from,S=m.$to;l?s.removeMark(x.pos,S.pos,e):s.addMark(x.pos,S.pos,e.create(t))}r(s.scrollIntoView())}return!0}}function V(t,n){return function(r){if(!r.isGeneric)return t(r);for(var o=[],i=0;i<r.mapping.maps.length;i++){for(var c=r.mapping.maps[i],a=0;a<o.length;a++)o[a]=c.map(o[a]);c.forEach(function(e,t,n,r){return o.push(n,r)})}for(var l=[],s=0;s<o.length;s+=2)for(var f=o[s],p=o[s+1],d=r.doc.resolve(f),u=d.sharedDepth(p),v=d.node(u),m=d.indexAfter(u),x=d.after(u+1);x<=p;++m){var S=v.maybeChild(m);if(!S)break;if(m&&-1==l.indexOf(x)){var g=v.child(m-1);g.type==S.type&&n(g,S)&&l.push(x)}x+=S.nodeSize}l.sort(function(e,t){return e-t});for(var h=l.length-1;h>=0;h--)e.canJoin(r.doc,l[h])&&r.join(l[h]);t(r)}}function B(e,t){if(Array.isArray(t)){var n=t;t=function(e){return n.indexOf(e.type.name)>-1}}return function(n,r){return e(n,r&&V(r,t))}}function N(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}var C=N(r,o,c),O=N(r,l,s),z={Enter:N(v,x,S,g),"Mod-Enter":m,Backspace:C,"Mod-Backspace":C,Delete:O,"Mod-Delete":O,"Mod-a":w},T={"Ctrl-h":z.Backspace,"Alt-Backspace":z["Mod-Backspace"],"Ctrl-d":z.Delete,"Ctrl-Alt-Backspace":z["Mod-Delete"],"Alt-Delete":z["Mod-Delete"],"Alt-d":z["Mod-Delete"]};for(var R in z)T[R]=z[R];var j="undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform(),F=j?T:z;exports.deleteSelection=r,exports.joinBackward=o,exports.selectNodeBackward=c,exports.joinForward=l,exports.selectNodeForward=s,exports.joinUp=p,exports.joinDown=d,exports.lift=u,exports.newlineInCode=v,exports.exitCode=m,exports.createParagraphNear=x,exports.liftEmptyBlock=S,exports.splitBlock=g,exports.splitBlockKeepMarks=h,exports.selectParentNode=k,exports.selectAll=w,exports.wrapIn=I,exports.setBlockType=M,exports.toggleMark=$,exports.autoJoin=B,exports.chainCommands=N,exports.pcBaseKeymap=z,exports.macBaseKeymap=T,exports.baseKeymap=F;
},{"prosemirror-transform":"aJvy","prosemirror-model":"jjSS","prosemirror-state":"QIdp"}],"19n2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("prosemirror-state"),e=require("prosemirror-transform");function o(e){return void 0===e&&(e={}),new t.Plugin({view:function(t){return new i(t,e)}})}var i=function(t,e){var o=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map(function(e){var i=function(t){return o[e](t)};return t.dom.addEventListener(e,i),{name:e,handler:i}})};i.prototype.destroy=function(){var t=this;this.handlers.forEach(function(e){var o=e.name,i=e.handler;return t.editorView.dom.removeEventListener(o,i)})},i.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&this.updateOverlay()},i.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.remove(),this.element=null):this.updateOverlay())},i.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var o=e.nodeBefore,i=e.nodeAfter;if(o||i){var r=this.editorView.nodeDOM(this.cursorPos-(o?o.nodeSize:0)).getBoundingClientRect(),s=o?r.bottom:r.top;o&&i&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:r.left,right:r.right,top:s-this.width/2,bottom:s+this.width/2}}}if(!t){var n=this.editorView.coordsAtPos(this.cursorPos);t={left:n.left-this.width/2,right:n.left+this.width/2,top:n.top,bottom:n.bottom}}var l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var d=l==document.body&&"static"==getComputedStyle(l).position?{left:-pageXOffset,top:-pageYOffset}:l.getBoundingClientRect();this.element.style.left=t.left-d.left+"px",this.element.style.top=t.top-d.top+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},i.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return e.setCursor(null)},t)},i.prototype.dragover=function(t){var o=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(o){var i=o.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(i=e.dropPoint(this.editorView.state.doc,i,this.editorView.dragging.slice))&&(i=o.pos),this.setCursor(i),this.scheduleRemoval(5e3)}},i.prototype.dragend=function(){this.scheduleRemoval(20)},i.prototype.drop=function(){this.scheduleRemoval(20)},i.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)},exports.dropCursor=o;
},{"prosemirror-state":"QIdp","prosemirror-transform":"aJvy"}],"e1CH":[function(require,module,exports) {
for(var e={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},t={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},r="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),o="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),n="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),a="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),i=r&&(a||+r[1]<57)||n&&a,f=0;f<10;f++)e[48+f]=e[96+f]=String(f);for(f=1;f<=24;f++)e[f+111]="F"+f;for(f=65;f<=90;f++)e[f]=String.fromCharCode(f+32),t[f]=String.fromCharCode(f);for(var g in e)t.hasOwnProperty(g)||(t[g]=e[g]);function d(r){var n=!(i&&(r.ctrlKey||r.altKey||r.metaKey)||o&&r.shiftKey&&r.key&&1==r.key.length)&&r.key||(r.shiftKey?t:e)[r.keyCode]||r.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}module.exports=d,d.base=e,d.shift=t;
},{}],"JyXL":[function(require,module,exports) {
"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("w3c-keyname")),r=require("prosemirror-state"),n="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function i(e){var t,r,i,a,o=e.split(/-(?!$)/),f=o[o.length-1];"Space"==f&&(f=" ");for(var s=0;s<o.length-1;s++){var u=o[s];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))t=!0;else if(/^(c|ctrl|control)$/i.test(u))r=!0;else if(/^s(hift)?$/i.test(u))i=!0;else{if(!/^mod$/i.test(u))throw new Error("Unrecognized modifier name: "+u);n?a=!0:r=!0}}return t&&(f="Alt-"+f),r&&(f="Ctrl-"+f),a&&(f="Meta-"+f),i&&(f="Shift-"+f),f}function a(e){var t=Object.create(null);for(var r in e)t[i(r)]=e[r];return t}function o(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==r&&t.shiftKey&&(e="Shift-"+e),e}function f(e){return new r.Plugin({props:{handleKeyDown:s(e)}})}function s(e){var r=a(e);return function(e,n){var i,a=t(n),f=1==a.length&&" "!=a,s=r[o(a,n,!f)];if(s&&s(e.state,e.dispatch,e))return!0;if(f&&(n.shiftKey||n.altKey||n.metaKey)&&(i=t.base[n.keyCode])&&i!=a){var u=r[o(i,n,!0)];if(u&&u(e.state,e.dispatch,e))return!0}return!1}}exports.keymap=f,exports.keydownHandler=s;
},{"w3c-keyname":"e1CH","prosemirror-state":"QIdp"}],"zSD1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("prosemirror-model"),e=require("prosemirror-state"),n=require("prosemirror-transform"),i={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var r=/Edge\/(\d+)/.exec(navigator.userAgent),o=/MSIE \d/.test(navigator.userAgent),s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);i.mac=/Mac/.test(navigator.platform);var a=i.ie=!!(o||s||r);i.ie_version=o?document.documentMode||6:s?+s[1]:r?+r[1]:null,i.gecko=!a&&/gecko\/(\d+)/i.test(navigator.userAgent),i.gecko_version=i.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var c=!a&&/Chrome\/(\d+)/.exec(navigator.userAgent);i.chrome=!!c,i.chrome_version=c&&+c[1],i.ios=!a&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),i.android=/Android \d/.test(navigator.userAgent),i.webkit=!a&&"WebkitAppearance"in document.documentElement.style,i.safari=/Apple Computer/.test(navigator.vendor),i.webkit_version=i.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var l=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},h=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},p=function(t,e,n){var i=document.createRange();return i.setEnd(t,null==n?t.nodeValue.length:n),i.setStart(t,e||0),i},u=function(t,e,n,i){return n&&(f(t,e,n,i,-1)||f(t,e,n,i,1))},d=/^(img|br|input|textarea|hr)$/i;function f(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:v(t))||3==t.nodeType&&"\ufeff"==t.nodeValue){var o=t.parentNode;if(1!=o.nodeType||m(t)||d.test(t.nodeName)||"false"==t.contentEditable)return!1;e=l(t)+(r<0?0:1),t=o}else{if(1!=t.nodeType)return!1;t=t.childNodes[e+(r<0?-1:0)],e=r<0?v(t):0}}}function v(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function m(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}var y=function(t){var e=t.isCollapsed;return e&&i.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function g(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function b(t,e){return"number"==typeof t?t:t[e]}function D(t,e,n){for(var i=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument,s=o.defaultView,a=n||t.dom;a;a=h(a))if(1==a.nodeType){var c=a==o.body||1!=a.nodeType,l=c?g(s):a.getBoundingClientRect(),p=0,u=0;if(e.top<l.top+b(i,"top")?u=-(l.top-e.top+b(r,"top")):e.bottom>l.bottom-b(i,"bottom")&&(u=e.bottom-l.bottom+b(r,"bottom")),e.left<l.left+b(i,"left")?p=-(l.left-e.left+b(r,"left")):e.right>l.right-b(i,"right")&&(p=e.right-l.right+b(r,"right")),(p||u)&&(c?s.scrollBy(p,u):(u&&(a.scrollTop+=u),p&&(a.scrollLeft+=p))),c)break}}function M(t){for(var e,n,i=t.dom.getBoundingClientRect(),r=Math.max(0,i.top),o=t.dom.ownerDocument,s=(i.left+i.right)/2,a=r+1;a<Math.min(innerHeight,i.bottom);a+=5){var c=t.root.elementFromPoint(s,a);if(c!=t.dom&&t.dom.contains(c)){var l=c.getBoundingClientRect();if(l.top>=r-20){e=c,n=l.top;break}}}for(var p=[],u=t.dom;u&&(p.push({dom:u,top:u.scrollTop,left:u.scrollLeft}),u!=o.body);u=h(u));return{refDOM:e,refTop:n,stack:p}}function O(t){for(var e=t.refDOM,n=t.refTop,i=t.stack,r=e?e.getBoundingClientRect().top:0,o=0==r?0:r-n,s=0;s<i.length;s++){var a=i[s],c=a.dom,l=a.top,h=a.left;c.scrollTop!=l+o&&(c.scrollTop=l+o),c.scrollLeft!=h&&(c.scrollLeft=h)}}function C(t,e){for(var n,i,r=2e8,o=0,s=e.top,a=e.top,c=t.firstChild,l=0;c;c=c.nextSibling,l++){var h=void 0;if(1==c.nodeType)h=c.getClientRects();else{if(3!=c.nodeType)continue;h=p(c).getClientRects()}for(var u=0;u<h.length;u++){var d=h[u];if(d.top<=s&&d.bottom>=a){s=Math.max(d.bottom,s),a=Math.min(d.top,a);var f=d.left>e.left?d.left-e.left:d.right<e.left?e.left-d.right:0;if(f<r){n=c,r=f,i=f&&3==n.nodeType?{left:d.right<e.left?d.right:d.left,top:e.top}:e,1==c.nodeType&&f&&(o=l+(e.left>=(d.left+d.right)/2?1:0));continue}}!n&&(e.left>=d.right&&e.top>=d.top||e.left>=d.left&&e.top>=d.bottom)&&(o=l+1)}}return n&&3==n.nodeType?S(n,i):!n||r&&1==n.nodeType?{node:t,offset:o}:C(n,i)}function S(t,e){for(var n=t.nodeValue.length,i=document.createRange(),r=0;r<n;r++){i.setEnd(t,r+1),i.setStart(t,r);var o=P(i,1);if(o.top!=o.bottom&&(o.left-1<=e.left&&o.right+1>=e.left&&o.top-1<=e.top&&o.bottom+1>=e.top))return{node:t,offset:r+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function T(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function w(t,e,n){if(!t.dom.contains(1!=e.nodeType?e.parentNode:e))return null;var i=C(e,n),r=i.node,o=i.offset,s=-1;if(1==r.nodeType&&!r.firstChild){var a=r.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function N(t,e,n,i){for(var r=-1,o=e;o!=t.dom;){var s=t.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>i.left||a.top>i.top)r=s.posBefore;else{if(!(a.right<i.left||a.bottom<i.top))break;r=s.posAfter}}o=s.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,n)}function x(t,e){var n,i,r=t.root;if(r.caretPositionFromPoint){var o,s=r.caretPositionFromPoint(e.left,e.top);if(s)n=(o=s).offsetNode,i=o.offset}if(!n&&r.caretRangeFromPoint){var a,c=r.caretRangeFromPoint(e.left,e.top);if(c)n=(a=c).startContainer,i=a.startOffset}var l,h=r.elementFromPoint(e.left,e.top+1);if(!h)return null;if(h=T(h,e),n&&(n==t.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(l=N(t,n,i,e))),null==l&&null==(l=w(t,h,e)))return null;var p=t.docView.nearestDesc(h,!0);return{pos:l,inside:p?p.posAtStart-p.border:-1}}function P(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function k(t,e){var n,i,r=t.docView.domFromPos(e),o=r.node,s=r.offset;if(3==o.nodeType)s<o.nodeValue.length&&(i=P(p(o,s,s+1),-1),n="left"),i&&i.left!=i.right||!s||(i=P(p(o,s-1,s),1),n="right");else if(o.firstChild){if(s<o.childNodes.length){var a=o.childNodes[s];i=P(3==a.nodeType?p(a):a,-1),n="left"}if((!i||i.top==i.bottom)&&s){var c=o.childNodes[s-1];i=P(3==c.nodeType?p(c):c,1),n="right"}}else i=o.getBoundingClientRect(),n="left";var l=i[n];return{top:i.top,bottom:i.bottom,left:l,right:l}}function E(t,e,n){var i=t.state,r=t.root.activeElement;i==e&&t.inDOMChange||t.updateState(e),r!=t.dom&&t.focus();try{return n()}finally{i!=e&&t.updateState(i),r!=t.dom&&r.focus()}}function V(t,e,n){var i=e.selection,r="up"==n?i.$anchor.min(i.$head):i.$anchor.max(i.$head);return!!r.depth&&E(t,e,function(){for(var e=t.docView.domFromPos(r.pos).node;;){var i=t.docView.nearestDesc(e,!0);if(!i||i.node.isBlock)break;e=i.dom.parentNode}for(var o=k(t,r.pos),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=p(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==n?l.bottom<o.top+1:l.top>o.bottom-1))return!1}}return!0})}var A=/[\u0590-\u08ac]/;function R(t,e,n){var i=e.selection.$head;if(!i.parent.isTextblock||!i.depth)return!1;var r=i.parentOffset,o=!r,s=r==i.parent.content.size,a=getSelection();return A.test(i.parent.textContent)&&a.modify?E(t,e,function(){var e=a.getRangeAt(0),r=a.focusNode,o=a.focusOffset;a.modify("move",n,"character");var s=!t.docView.domAfterPos(i.before()).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(e),s}):"left"==n||"backward"==n?o:s}var z=null,F=null,_=!1;function L(t,e,n){return z==e&&F==n?_:(z=e,F=n,_="up"==n||"down"==n?V(t,e,n):R(t,e,n))}var B=0,K=1,q=2,H=3,W=function(t,e,n,i){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=i,this.dirty=B},U={beforePosition:{},size:{},border:{},posBefore:{},posAtStart:{},posAfter:{},posAtEnd:{},contentLost:{}};W.prototype.matchesWidget=function(){return!1},W.prototype.matchesMark=function(){return!1},W.prototype.matchesNode=function(){return!1},W.prototype.matchesHack=function(){return!1},U.beforePosition.get=function(){return!1},W.prototype.parseRule=function(){return null},W.prototype.stopEvent=function(){return!1},U.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},U.border.get=function(){return 0},W.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},W.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var i=this.children[e];if(i==t)return n;n+=i.size}},U.posBefore.get=function(){return this.parent.posBeforeChild(this)},U.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},U.posAfter.get=function(){return this.posBefore+this.size},U.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},W.prototype.localPosFromDOM=function(t,e,n){var i;if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var s,a;if(t==this.contentDOM)s=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&(!(a=s.pmViewDesc)||a.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){i=!1;break}if(c.parentNode.firstChild!=c)break}if(null==i&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){i=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==i?n>0:i)?this.posAtEnd:this.posAtStart},W.prototype.nearestDesc=function(t,e){for(var n=!0,i=t;i;i=i.parentNode){var r=this.getDesc(i);if(r&&(!e||r.node)){if(!n||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(t):r.nodeDOM==t))return r;n=!1}}},W.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},W.prototype.posFromDOM=function(t,e,n){for(var i=t;;i=i.parentNode){var r=this.getDesc(i);if(r)return r.localPosFromDOM(t,e,n)}},W.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var i=this.children[e],r=n+i.size;if(n==t&&r!=n){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(t<r)return i.descAt(t-n-i.border);n=r}},W.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,n=0;;n++){if(e==t){for(;n<this.children.length&&this.children[n].beforePosition;)n++;return{node:this.contentDOM,offset:n}}if(n==this.children.length)throw new Error("Invalid position "+t);var i=this.children[n],r=e+i.size;if(t<r)return i.domFromPos(t-e-i.border);e=r}},W.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var i=-1,r=-1,o=0,s=0;;s++){var a=this.children[s],c=o+a.size;if(-1==i&&t<=c){var h=o+a.border;if(t>=h&&e<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t-h,e-h,n+h);t=n+o;for(var p=s;p>0;p--){var u=this.children[p-1];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(1)){i=l(u.dom)+1;break}t-=u.size}-1==i&&(i=0)}if(i>-1&&e<=c){e=n+c;for(var d=s+1;d<this.children.length;d++){var f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){r=l(f.dom);break}e+=f.size}-1==r&&(r=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:t,to:e,fromOffset:i,toOffset:r}},W.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},W.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,i=e.offset;if(1!=n.nodeType||i==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[i]},W.prototype.setSelection=function(t,e,n,i){for(var r=Math.min(t,e),o=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(r>a&&o<l)return c.setSelection(t-a-c.border,e-a-c.border,n,i);a=l}var h=this.domFromPos(t),p=this.domFromPos(e),d=n.getSelection(),f=document.createRange();if(i||!u(h.node,h.offset,d.anchorNode,d.anchorOffset)||!u(p.node,p.offset,d.focusNode,d.focusOffset)){if(d.extend)f.setEnd(h.node,h.offset),f.collapse(!1);else{if(t>e){var v=h;h=p,p=v}f.setEnd(p.node,p.offset),f.setStart(h.node,h.offset)}d.removeAllRanges(),d.addRange(f),d.extend&&d.extend(p.node,p.offset)}},W.prototype.ignoreMutation=function(t){return!this.contentDOM},U.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},W.prototype.markDirty=function(t,e){for(var n=0,i=0;i<this.children.length;i++){var r=this.children[i],o=n+r.size;if(n==o?t<=o&&e>=n:t<o&&e>n){var s=n+r.border,a=o-r.border;if(t>=s&&e<=a)return this.dirty=t==n||e==o?q:K,void(t==s&&e==a&&r.contentLost?r.dirty=H:r.markDirty(t-s,e-s));r.dirty=H}n=o}this.dirty=q},Object.defineProperties(W.prototype,U);var j=[],X=function(t){function e(e,n,i,r){var o,s=n.type.toDOM;if("function"==typeof s&&(s=s(i,function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:r})),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,j,s,null),this.widget=n,o=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return this.dirty==B&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},Object.defineProperties(e.prototype,n),e}(W),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){for(var e,n=this.dom.firstChild;n;n=n.nextSibling){var i=void 0;if(3==n.nodeType){var r=n.nodeValue.replace(/\ufeff/g,"");if(!r)continue;i=document.createTextNode(r)}else{if("\ufeff"==n.textContent)continue;i=n.cloneNode(!0)}e||(e=document.createDocumentFragment()),e.appendChild(i)}return e?{skip:e}:t.prototype.parseRule.call(this)},e.prototype.ignoreMutation=function(){return!1},e}(X),G=function(e){function n(t,n,i,r){e.call(this,t,[],i,r),this.mark=n}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.create=function(e,i,r,o){var s=o.nodeViews[i.type.name],a=s&&s(i,o,r);return a&&a.dom||(a=t.DOMSerializer.renderSpec(document,i.type.spec.toDOM(i,r))),new n(e,i,a.dom,a.contentDOM||a.dom)},n.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},n.prototype.matchesMark=function(t){return this.dirty!=H&&this.mark.eq(t)},n.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),this.dirty!=B){for(var i=this.parent;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=B}},n}(W),J=function(e){function n(t,n,i,r,o,s,a,c,l){e.call(this,t,n.isLeaf?j:[],o,s),this.nodeDOM=a,this.node=n,this.outerDeco=i,this.innerDeco=r,s&&this.updateChildren(c,l)}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={size:{},border:{}};return n.create=function(e,i,r,o,s,a){var c,l=s.nodeViews[i.type.name],h=l&&l(i,s,function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:a},r),p=h&&h.dom,u=h&&h.contentDOM;if(i.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(i.text);else if(!p){var d;p=(d=t.DOMSerializer.renderSpec(document,i.type.spec.toDOM(i))).dom,u=d.contentDOM}u||i.isText||"BR"==p.nodeName||(p.contentEditable=!1,i.type.spec.draggable&&(p.draggable=!0));var f=p;return p=st(p,r,i),h?c=new $(e,i,r,o,p,u,f,h,s):i.isText?new Z(e,i,r,o,p,f,s):new n(e,i,r,o,p,u,f,s,a+1)},n.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var n={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(n.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?n.contentElement=this.contentDOM:n.getContent=function(){return e.contentDOM?t.Fragment.empty:e.node.content},n},n.prototype.matchesNode=function(t,e,n){return this.dirty==B&&t.eq(this.node)&&at(e,this.outerDeco)&&n.eq(this.innerDeco)},r.size.get=function(){return this.node.nodeSize},r.border.get=function(){return this.node.isLeaf?0:1},n.prototype.updateChildren=function(e,n){var i=this,r=new lt(this),o=this.node.inlineContent;ut(this.node,this.innerDeco,function(s,a){s.spec.marks?r.syncToMarks(s.spec.marks,o,e):s.type.side>=0&&r.syncToMarks(a==i.node.childCount?t.Mark.none:i.node.child(a).marks,o,e),r.placeWidget(s,e,n)},function(t,i,s,a){r.syncToMarks(t.marks,o,e),r.findNodeMatch(t,i,s,a)||r.updateNextNode(t,i,s,e,a)||r.addNode(t,i,s,e,n),n+=t.nodeSize}),r.syncToMarks(j,o,e),this.node.isTextblock&&r.addTextblockHacks(),r.destroyRest(),(r.changed||this.dirty==q)&&this.renderChildren()},n.prototype.renderChildren=function(){tt(this.contentDOM,this.children,n.is),i.ios&&dt(this.dom)},n.prototype.update=function(t,e,n,i){return!(this.dirty==H||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,i),!0)},n.prototype.updateInner=function(t,e,n,i){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=B},n.prototype.updateOuterDeco=function(t){if(!at(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=rt(this.dom,this.nodeDOM,it(this.outerDeco,this.node,e),it(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},n.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode")},n.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode")},Object.defineProperties(n.prototype,r),n}(W);function Q(t,e,n,i,r){return st(i,e,t),new J(null,t,e,n,i,i,i,r,0)}var Z=function(t){function e(e,n,i,r,o,s,a){t.call(this,e,n,i,r,o,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){var t=this.nodeDOM.parentNode;return t?{skip:t}:{ignore:!0}},e.prototype.update=function(t,e){return!(this.dirty==H||this.dirty!=B&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==B&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text),this.node=t,this.dirty=B,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,i){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,i)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type},e}(J),I=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return this.dirty==B},e}(W),$=function(t){function e(e,n,i,r,o,s,a,c,l){t.call(this,e,n,i,r,o,s,a,l),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,i,r){if(this.dirty==H)return!1;if(this.spec.update){var o=this.spec.update(e,n);return o&&this.updateInner(e,n,i,r),o}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,i,r)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,i,r){this.spec.setSelection?this.spec.setSelection(e,n,i):t.prototype.setSelection.call(this,e,n,i,r)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(J);function tt(t,e){for(var n=t.firstChild,i=0;i<e.length;i++){var r=e[i],o=r.dom;if(o.parentNode==t){for(;o!=n;)n=ct(n);n=n.nextSibling}else t.insertBefore(o,n);if(r instanceof G){var s=n?n.previousSibling:t.lastChild;tt(r.contentDOM,r.children),n=s?s.nextSibling:t.firstChild}}for(;n;)n=ct(n)}function et(t){t&&(this.nodeName=t)}et.prototype=Object.create(null);var nt=[new et];function it(t,e,n){if(0==t.length)return nt;for(var i=n?nt[0]:new et,r=[i],o=0;o<t.length;o++){var s=t[o].type.attrs,a=i;if(s)for(var c in s.nodeName&&r.push(a=new et(s.nodeName)),s){var l=s[c];null!=l&&(n&&1==r.length&&r.push(a=i=new et(e.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return r}function rt(t,e,n,i){if(n==nt&&i==nt)return e;for(var r=e,o=0;o<i.length;o++){var s=i[o],a=n[o];if(o){var c=void 0;a&&a.nodeName==s.nodeName&&r!=t&&(c=e.parentNode)&&c.tagName.toLowerCase()==s.nodeName?r=c:((c=document.createElement(s.nodeName)).appendChild(r),r=c)}ot(r,a||nt[0],s)}return r}function ot(t,e,n){for(var i in e)"class"==i||"style"==i||"nodeName"==i||i in n||t.removeAttribute(i);for(var r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){for(var o=e.class?e.class.split(" "):j,s=n.class?n.class.split(" "):j,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&t.classList.remove(o[a]);for(var c=0;c<s.length;c++)-1==o.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style)for(var l,h=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=h.exec(e.style);)t.style[l[1].toLowerCase()]="";n.style&&(t.style.cssText+=n.style)}}function st(t,e,n){return rt(t,t,nt,it(e,n,1!=t.nodeType))}function at(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ct(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var lt=function(t){this.top=t,this.index=0,this.stack=[],this.changed=!1,this.preMatched=ht(t.node.content,t.children)};function ht(t,e){for(var n=[],i=t.childCount,r=e.length-1;i>0&&r>=0;r--){var o=e[r],s=o.node;if(s){if(s!=t.child(i-1))break;n[--i]=o}}return n}function pt(t,e){return t.type.side-e.type.side}function ut(t,e,n,i){var r=e.locals(t),o=0;if(0!=r.length)for(var s=0,a=[],c=null,l=0;;){if(s<r.length&&r[s].to==o){for(var h=r[s++],p=void 0;s<r.length&&r[s].to==o;)(p||(p=[h])).push(r[s++]);if(p){p.sort(pt);for(var u=0;u<p.length;u++)n(p[u],l)}else n(h,l)}var d=void 0;if(c)d=c,c=null;else{if(!(l<t.childCount))break;d=t.child(l++)}for(var f=0;f<a.length;f++)a[f].to<=o&&a.splice(f--,1);for(;s<r.length&&r[s].from==o;)a.push(r[s++]);var v=o+d.nodeSize;if(d.isText){var m=v;s<r.length&&r[s].from<m&&(m=r[s].from);for(var y=0;y<a.length;y++)a[y].to<m&&(m=a[y].to);m<v&&(c=d.cut(m-o),d=d.cut(0,m-o),v=m)}i(d,a.length?a.slice():j,e.forChild(o,d),l-1),o=v}else for(var g=0;g<t.childCount;g++){var b=t.child(g);i(b,r,e.forChild(o,b),g),o+=b.nodeSize}}function dt(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function ft(t,n){var i=t.selection,r=i.$anchor,o=i.$head,s=n>0?r.max(o):r.min(o),a=s.parent.inlineContent?s.depth?t.doc.resolve(n>0?s.after():s.before()):null:s;return a&&e.Selection.findFrom(a,n)}function vt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function mt(t,n){var i=t.state.selection;if(i instanceof e.TextSelection){if(i.empty){if(t.endOfTextblock(n>0?"right":"left")){var r=ft(t.state,n);return!!(r&&r instanceof e.NodeSelection)&&vt(t,r)}var o,s=i.$head,a=s.textOffset?null:n<0?s.nodeBefore:s.nodeAfter;if(a&&e.NodeSelection.isSelectable(a)){var c=n<0?s.pos-a.nodeSize:s.pos;if(a.isAtom||(o=t.docView.descAt(c))&&!o.contentDOM)return vt(t,new e.NodeSelection(n<0?t.state.doc.resolve(s.pos-a.nodeSize):s))}return!1}return!1}if(i instanceof e.NodeSelection&&i.node.isInline)return vt(t,new e.TextSelection(n>0?i.$to:i.$from));var l=ft(t.state,n);return!!l&&vt(t,l)}function yt(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function gt(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function bt(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,s,a=!1;for(i.gecko&&1==n.nodeType&&r<yt(n)&&gt(n.childNodes[r])&&(a=!0);;)if(r>0)if(1!=n.nodeType){if(3!=n.nodeType||"\ufeff"!=n.nodeValue.charAt(r-1))break;i.ie&&i.ie_version<=11&&(a=!0),o=n,s=--r}else{var c=n.childNodes[r-1];if(gt(c))o=n,s=--r;else{if(3!=c.nodeType)break;r=(n=c).nodeValue.length}}else{if(Mt(n))break;for(var h=n.previousSibling;h&&gt(h);)o=n.parentNode,s=l(h),h=h.previousSibling;if(h)r=yt(n=h);else{if((n=n.parentNode)==t.dom)break;r=0}}a?Ot(t,e,n,r):o&&Ot(t,e,o,s)}}function Dt(t){var e=t.root.getSelection(),n=e.focusNode,i=e.focusOffset;if(n){for(var r,o,s=yt(n);;)if(i<s){if(1!=n.nodeType)break;if(!gt(n.childNodes[i]))break;r=n,o=++i}else{if(Mt(n))break;for(var a=n.nextSibling;a&&gt(a);)r=a.parentNode,o=l(a)+1,a=a.nextSibling;if(a)i=0,s=yt(n=a);else{if((n=n.parentNode)==t.dom)break;i=s=0}}r&&Ot(t,e,r,o)}}function Mt(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Ot(t,e,n,i){if(y(e)){var r=document.createRange();r.setEnd(n,i),r.setStart(n,i),e.removeAllRanges(),e.addRange(r)}else e.extend&&e.extend(n,i);t.selectionReader.storeDOMState(t.selection)}function Ct(t,n){var i=t.state.selection;if(i instanceof e.TextSelection&&!i.empty)return!1;var r=i.$from,o=i.$to;if(!r.parent.inlineContent||t.endOfTextblock(n<0?"up":"down")){var s=ft(t.state,n);if(s&&s instanceof e.NodeSelection)return vt(t,s)}if(!r.parent.inlineContent){var a=e.Selection.findFrom(n<0?r:o,n);return!a||vt(t,a)}return!1}function St(t,n){if(!(t.state.selection instanceof e.TextSelection))return!0;var i=t.state.selection,r=i.$head,o=i.$anchor,s=i.empty;if(!r.sameParent(o))return!0;if(!s)return!1;if(t.endOfTextblock(n>0?"forward":"backward"))return!0;var a=!r.textOffset&&(n<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return n<0?c.delete(r.pos-a.nodeSize,r.pos):c.delete(r.pos,r.pos+a.nodeSize),t.dispatch(c),!0}return!1}function Tt(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function wt(t){if(i.chrome&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Tt(t,o,!0),setTimeout(function(){return Tt(t,o,!1)},20)}}}function Nt(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function xt(t,e){var n=e.keyCode,r=Nt(e);return 8==n||i.mac&&72==n&&"c"==r?St(t,-1)||bt(t):46==n||i.mac&&68==n&&"c"==r?St(t,1)||Dt(t):13==n||27==n||(37==n?mt(t,-1)||bt(t):39==n?mt(t,1)||Dt(t):38==n?Ct(t,-1)||bt(t):40==n?wt(t)||Ct(t,1)||Dt(t):r==(i.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}lt.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},lt.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},lt.prototype.syncToMarks=function(t,e,n){for(var i=0,r=this.stack.length>>1,o=Math.min(r,t.length);i<o&&(i==r-1?this.top:this.stack[i+1<<1]).matchesMark(t[i]);)i++;for(;i<r;)this.destroyRest(),this.top.dirty=B,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[r])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.top.children.splice(this.index,s-this.index)),this.top=this.top.children[this.index];else{var c=G.create(this.top,t[r],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,r++}},lt.prototype.findNodeMatch=function(t,e,n,i){for(var r=this.index,o=this.top.children,s=Math.min(o.length,r+5);r<s;r++){var a=o[r],c=void 0;if(a.matchesNode(t,e,n)&&(-1==(c=this.preMatched.indexOf(a))||c==i))return this.destroyBetween(this.index,r),this.index++,!0}return!1},lt.prototype.updateNextNode=function(t,e,n,i,r){if(this.index==this.top.children.length)return!1;var o=this.top.children[this.index];if(o instanceof J){var s=this.preMatched.indexOf(o);if(s>-1&&s!=r)return!1;var a=o.dom;if(o.update(t,e,n,i))return o.dom!=a&&(this.changed=!0),this.index++,!0}return!1},lt.prototype.addNode=function(t,e,n,i,r){this.top.children.splice(this.index++,0,J.create(this.top,t,e,n,i,r)),this.changed=!0},lt.prototype.placeWidget=function(t,e,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(t))this.index++;else{var i=new(t.spec.isCursorWrapper?Y:X)(this.top,t,e,n);this.top.children.splice(this.index++,0,i),this.changed=!0}},lt.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof G;)t=t.children[t.children.length-1];if(!t||!(t instanceof Z)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new I(this.top,j,e,null)),this.changed=!0}};var Pt=function(t,e,n){this.prev=t,this.mapping=e,this.state=n},kt=function(t){this.seen=[new Pt(null,null,t)],e.EditorState.addApplyListener(this.track=this.track.bind(this))};kt.prototype.destroy=function(){e.EditorState.removeApplyListener(this.track)},kt.prototype.find=function(t){for(var e=this.seen.length-1;e>=0;e--){var n=this.seen[e];if(n.state==t)return n}},kt.prototype.track=function(t,e,n){var i=this.seen.length<200?this.find(t):null;i&&this.seen.push(new Pt(i,e.docChanged?e.mapping:null,n))},kt.prototype.getMapping=function(t,e){var i=this.find(t);if(!i)return null;for(var r=[],o=i;o;o=o.prev)o.mapping&&r.push(o.mapping);for(var s=e||new n.Mapping,a=r.length-1;a>=0;a--)s.appendMapping(r[a]);return s};var Et=function(t){var e=this;this.view=t,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastSelection=t.state.selection,this.ignoreUpdates=!1,this.suppressUpdates=!1,this.poller=Rt(this),this.focusFunc=function(){return e.poller.start(Wt(e.view))}.bind(this),this.blurFunc=this.poller.stop,t.dom.addEventListener("focus",this.focusFunc),t.dom.addEventListener("blur",this.blurFunc),t.editable||this.poller.start(!1)};Et.prototype.destroy=function(){this.view.dom.removeEventListener("focus",this.focusFunc),this.view.dom.removeEventListener("blur",this.blurFunc),this.poller.stop()},Et.prototype.poll=function(t){this.poller.poll(t)},Et.prototype.editableChanged=function(){this.view.editable?Wt(this.view)||this.poller.stop():this.poller.start()},Et.prototype.domChanged=function(){var t=this.view.root.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastHeadNode||t.focusOffset!=this.lastHeadOffset},Et.prototype.storeDOMState=function(t){var e=this.view.root.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastHeadNode=e.focusNode,this.lastHeadOffset=e.focusOffset,this.lastSelection=t},Et.prototype.clearDOMState=function(){this.lastAnchorNode=this.lastSelection=null},Et.prototype.readFromDOM=function(t){if(!this.ignoreUpdates&&this.domChanged()&&Wt(this.view)){if(this.suppressUpdates)return zt(this.view);if(this.view.inDOMChange||this.view.domObserver.flush(),!this.view.inDOMChange){var n,i,r=this.view.root.getSelection(),o=this.view.state.doc,s=this.view.docView.nearestDesc(r.focusNode),a=s&&0==s.size,c=this.view.docView.posFromDOM(r.focusNode,r.focusOffset),l=o.resolve(c);if(y(r)){for(n=l;s&&!s.node;)s=s.parent;if(s&&s.node.isAtom&&e.NodeSelection.isSelectable(s.node)&&s.parent){var h=s.posBefore;i=new e.NodeSelection(c==h?l:o.resolve(h))}}else n=o.resolve(this.view.docView.posFromDOM(r.anchorNode,r.anchorOffset));if(!i){var p="pointer"==t||this.view.state.selection.head<l.pos&&!a?1:-1;i=Ht(this.view,n,l,p)}if(this.view.state.selection.eq(i))zt(this.view);else{var u=this.view.state.tr.setSelection(i);"pointer"==t?u.setMeta("pointer",!0):"key"==t&&u.scrollIntoView(),this.view.dispatch(u)}}}};var Vt=function(t){var e=this;this.listening=!1,this.curOrigin=null,this.originTime=0,this.reader=t,this.readFunc=function(){return t.readFromDOM(e.originTime>Date.now()-50?e.curOrigin:null)}};Vt.prototype.poll=function(t){this.curOrigin=t,this.originTime=Date.now()},Vt.prototype.start=function(t){this.listening||(this.reader.view.dom.ownerDocument.addEventListener("selectionchange",this.readFunc),this.listening=!0,t&&this.readFunc())},Vt.prototype.stop=function(){this.listening&&(this.reader.view.dom.ownerDocument.removeEventListener("selectionchange",this.readFunc),this.listening=!1)};var At=function(t){this.polling=null,this.reader=t,this.pollFunc=this.doPoll.bind(this,null)};function Rt(t){return new("onselectionchange"in document?Vt:At)(t)}function zt(t,n,r){var o=t.state.selection;if(Kt(t,o),t.editable&&!t.hasFocus()){if(!n)return;i.gecko&&i.gecko_version<=55&&(t.selectionReader.ignoreUpdates=!0,t.dom.focus(),t.selectionReader.ignoreUpdates=!1)}else if(!t.editable&&!Ut(t)&&!n)return;var s=t.selectionReader;if(!s.lastSelection||!s.lastSelection.eq(o)||s.domChanged()){if(s.ignoreUpdates=!0,t.cursorWrapper)Bt(t);else{var a,c,l=o.anchor,h=o.head;!Ft||o instanceof e.TextSelection||(o.$from.parent.inlineContent||(a=_t(t,o.from)),o.empty||o.$from.parent.inlineContent||(c=_t(t,o.to))),t.docView.setSelection(l,h,t.root,r),Ft&&(a&&(a.contentEditable="false"),c&&(c.contentEditable="false")),o.visible?t.dom.classList.remove("ProseMirror-hideselection"):l!=h&&(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Lt(t))}s.storeDOMState(o),s.ignoreUpdates=!1}}At.prototype.doPoll=function(t){var e=this.reader.view;e.focused||!e.editable?(this.reader.readFromDOM(t),this.polling=setTimeout(this.pollFunc,100)):this.polling=null},At.prototype.poll=function(t){clearTimeout(this.polling),this.polling=setTimeout(t?this.doPoll.bind(this,t):this.pollFunc,0)},At.prototype.start=function(){null==this.polling&&this.poll()},At.prototype.stop=function(){clearTimeout(this.polling),this.polling=null};var Ft=i.safari||i.chrome&&i.chrome_version<63;function _t(t,e){var n=t.docView.domFromPos(e),i=n.node,r=n.offset,o=r<i.childNodes.length?i.childNodes[r]:null,s=r?i.childNodes[r-1]:null;if(!(o&&"false"!=o.contentEditable||s&&"false"!=s.contentEditable)){if(o)return o.contentEditable="true",o;if(s)return s.contentEditable="true",s}}function Lt(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),i=n.anchorNode,r=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==i&&n.anchorOffset==r||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}function Bt(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom;n.setEnd(r,r.childNodes.length),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!t.state.selection.visible&&i.ie&&i.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function Kt(t,n){if(n instanceof e.NodeSelection){var i=t.docView.descAt(n.from);i!=t.lastSelectedViewDesc&&(qt(t),i&&i.selectNode(),t.lastSelectedViewDesc=i)}else qt(t)}function qt(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function Ht(t,n,i,r){return t.someProp("createSelectionBetween",function(e){return e(t,n,i)})||e.TextSelection.between(n,i,r)}function Wt(t){return(!t.editable||t.root.activeElement==t.dom)&&Ut(t)}function Ut(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function jt(t){return!1===t.type.spec.inclusive}function Xt(t){var e=t.selection,n=e.$head,i=e.$anchor,r=e.visible,o=n.pos!=i.pos||r&&!n.parent.inlineContent?null:n;return o&&(!r||t.storedMarks||0==o.parent.content.length||o.parentOffset&&!o.textOffset&&o.nodeBefore.marks.some(jt))?o:null}var Yt=function t(e,i){var r=this;this.view=e,this.state=e.state,this.composing=i,this.from=this.to=null,this.typeOver=!1,this.timeout=i?null:setTimeout(function(){return r.finish()},t.commitTimeout),this.trackMappings=new kt(e.state),this.mapping=new n.Mapping,this.mappingTo=e.state};function Gt(e,n,r){var o=e.docView.parseRange(r.from,r.to),s=o.node,a=o.fromOffset,c=o.toOffset,l=o.from,h=o.to,p=e.root.getSelection(),u=null,d=p.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(u=[{node:d,offset:p.anchorOffset}],y(p)||u.push({node:p.focusNode,offset:p.focusOffset})),i.chrome&&8===e.lastKeyCode)for(var f=c;f>a;f--){var v=s.childNodes[f-1],m=v.pmViewDesc;if("BR"==v.nodeType&&!m){c=f;break}if(!m||m.size)break}var g=n.doc,b=e.someProp("domParser")||t.DOMParser.fromSchema(e.state.schema),D=g.resolve(l),M=null,O=b.parse(s,{topNode:D.parent,topMatch:D.parent.contentMatchAt(D.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!D.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:Jt(b,D),context:D});if(u&&null!=u[0].pos){var C=u[0].pos,S=u[1]&&u[1].pos;null==S&&(S=C),M={anchor:C+l,head:S+l}}return{doc:O,sel:M,from:l,to:h}}function Jt(t,e){return function(n){var r=n.pmViewDesc;if(r)return r.parseRule();if("BR"==n.nodeName&&n.parentNode){if(i.safari&&/^(ul|ol)$/i.test(n.parentNode.nodeName))return t.matchTag(document.createElement("li"),e);if(n.parentNode.lastChild==n||i.safari&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}}}function Qt(t,e){for(var n=e||0;n<t.depth;n++)if(t.index(n)+1<t.node(n).childCount)return!1;return t.parentOffset==t.parent.content.size}function Zt(t,e){for(var n=e||0;n<t.depth;n++)if(t.index(0)>0)return!1;return 0==t.parentOffset}function It(t){var e=t.$anchor.min(t.$head),n=t.$anchor.max(t.$head);if(e.sameParent(n)&&e.parent.inlineContent&&e.parentOffset&&n.parentOffset<n.parent.content.size){var i=Math.max(0,e.parentOffset),r=e.parent.content.size,o=Math.min(r,n.parentOffset);if(i>0&&(i=e.parent.childBefore(i).offset),o<r){var s=e.parent.childAfter(o);o=s.offset+s.node.nodeSize}var a=e.start();return{from:a+i,to:a+o}}for(var c=0;;c++){var l=Zt(e,c+1),h=Qt(n,c+1);if(l||h||e.index(c)!=n.index(c)||n.node(c).isTextblock){var p=e.before(c+1),u=n.after(c+1);return l&&e.index(c)>0&&(p-=e.node(c).child(e.index(c)-1).nodeSize),h&&n.index(c)+1<n.node(c).childCount&&(u+=n.node(c).child(n.index(c)+1).nodeSize),{from:p,to:u}}}}function $t(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function te(t,n,r,o,s){var a,c,l=Gt(t,r,o),h=r.doc,p=h.slice(l.from,l.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(a=r.selection.to,c="end"):(a=r.selection.from,c="start"),t.lastKeyCode=null;var u=oe(p.content,l.doc.content,l.from,a,c);if(u){var d,f=l.doc.resolveNoCache(u.start-l.from),v=l.doc.resolveNoCache(u.endB-l.from);if(!(!f.sameParent(v)&&f.pos<l.doc.content.size&&(d=e.Selection.findFrom(l.doc.resolve(f.pos+1),1,!0))&&d.head==v.pos&&t.someProp("handleKeyDown",function(e){return e(t,$t(13,"Enter"))})))if(r.selection.anchor>u.start&&ie(h,u.start,u.endA,f,v)&&t.someProp("handleKeyDown",function(e){return e(t,$t(8,"Backspace"))}))i.android&&i.chrome&&(t.selectionReader.suppressUpdates=!0,setTimeout(function(){return t.selectionReader.suppressUpdates=!1},50));else{var m,y,g,b,D=n.map(u.start),M=n.map(u.endA,-1);if(f.sameParent(v)&&f.parent.inlineContent)if(f.pos==v.pos)m=t.state.tr.delete(D,M),y=h.resolve(u.start).marksAcross(h.resolve(u.endA));else if(u.endA==u.endB&&(b=h.resolve(u.start))&&(g=ne(f.parent.content.cut(f.parentOffset,v.parentOffset),b.parent.content.cut(b.parentOffset,u.endA-b.start()))))m=t.state.tr,"add"==g.type?m.addMark(D,M,g.mark):m.removeMark(D,M,g.mark);else if(f.parent.child(f.index()).isText&&f.index()==v.index()-(v.textOffset?0:1)){var O=f.parent.textBetween(f.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",function(e){return e(t,D,M,O)}))return;m=t.state.tr.insertText(O,D,M)}if(m||(m=t.state.tr.replace(D,M,l.doc.slice(u.start-l.from,u.endB-l.from))),l.sel){var C=ee(t,m.doc,n,l.sel);C&&m.setSelection(C)}y&&m.ensureMarks(y),t.dispatch(m.scrollIntoView())}}else if(s){var S=t.state,T=S.selection;t.dispatch(S.tr.replaceSelectionWith(S.schema.text(S.doc.textBetween(T.from,T.to)),!0).scrollIntoView())}else if(l.sel){var w=ee(t,t.state.doc,n,l.sel);w&&!w.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(w))}}function ee(t,e,n,i){return Math.max(i.anchor,i.head)>e.content.size?null:Ht(t,e.resolve(n.map(i.anchor)),e.resolve(n.map(i.head)))}function ne(e,n){for(var i,r,o,s=e.firstChild.marks,a=n.firstChild.marks,c=s,l=a,h=0;h<a.length;h++)c=a[h].removeFromSet(c);for(var p=0;p<s.length;p++)l=s[p].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],i="add",o=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],i="remove",o=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var u=[],d=0;d<n.childCount;d++)u.push(o(n.child(d)));if(t.Fragment.from(u).eq(e))return{mark:r,type:i}}function ie(t,e,n,i,r){if(!i.parent.isTextblock||n-e<=r.pos-i.pos||re(i,!0,!1)<r.pos)return!1;var o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=t.resolve(re(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||re(s,!0,!1)<n)&&i.parent.content.cut(i.parentOffset).eq(s.parent.content)}function re(t,e,n){for(var i=t.depth,r=e?t.end():t.pos;i>0&&(e||t.indexAfter(i)==t.node(i).childCount);)i--,r++,e=!1;if(n)for(var o=t.node(i).maybeChild(t.indexAfter(i));o&&!o.isLeaf;)o=o.firstChild,r++;return r}function oe(t,e,n,i,r){var o=t.findDiffStart(e,n);if(null==o)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b;"end"==r&&(i-=a+Math.max(0,o-Math.min(a,c))-o);if(a<o&&t.size<e.size)c=(o-=i<=o&&i>=a?o-i:0)+(c-a),a=o;else if(c<o){a=(o-=i<=o&&i>=c?o-i:0)+(a-c),c=o}return{start:o,endA:a,endB:c}}function se(e,n){for(var i=[],r=n.content,o=n.openStart,s=n.openEnd;o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,s--;var a=r.firstChild;i.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=e.someProp("clipboardSerializer")||t.DOMSerializer.fromSchema(e.state.schema),l=document.createElement("div");l.appendChild(c.serializeFragment(r));for(var h,p=l.firstChild;p&&1==p.nodeType&&(h=ue[p.nodeName.toLowerCase()]);){for(var u=h.length-1;u>=0;u--){for(var d=document.createElement(h[u]);l.firstChild;)d.appendChild(l.firstChild);l.appendChild(d)}p=l.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",o+" "+s+" "+JSON.stringify(i)),{dom:l,text:e.someProp("clipboardTextSerializer",function(t){return t(n)})||n.content.textBetween(0,n.content.size,"\n\n")}}function ae(e,n,i,r,o){var s,a,c=o.parent.type.spec.code;if(!i&&!n)return null;var l=n&&(r||c||!i);if(l){if(e.someProp("transformPastedText",function(t){n=t(n)}),c)return new t.Slice(t.Fragment.from(e.state.schema.text(n)),0,0);var h=e.someProp("clipboardTextParser",function(t){return t(n,o)});h?a=h:(s=document.createElement("div"),n.trim().split(/(?:\r\n?|\n)+/).forEach(function(t){s.appendChild(document.createElement("p")).textContent=t}))}else e.someProp("transformPastedHTML",function(t){return i=t(i)}),s=fe(i);var p=s&&s.querySelector("[data-pm-slice]"),u=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!a){var d=e.someProp("clipboardParser")||e.someProp("domParser")||t.DOMParser.fromSchema(e.state.schema);a=d.parseSlice(s,{preserveWhitespace:!(!l&&!u),context:o})}return a=u?ve(new t.Slice(a.content,Math.min(a.openStart,+u[1]),Math.min(a.openEnd,+u[2])),u[3]):t.Slice.maxOpen(ce(a.content,o),!1),e.someProp("transformPasted",function(t){a=t(a)}),a}function ce(e,n){if(e.childCount<2)return e;for(var i=function(i){var r=n.node(i).contentMatchAt(n.index(i)),o=void 0,s=[];if(e.forEach(function(t){if(s){var e,n=r.findWrapping(t.type);if(!n)return s=null;if(e=s.length&&o.length&&he(n,o,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=pe(s[s.length-1],o.length));var i=le(t,n);s.push(i),r=r.matchType(i.type,i.attrs),o=n}}}),s)return{v:t.Fragment.from(s)}},r=n.depth;r>=0;r--){var o=i(r);if(o)return o.v}return e}function le(e,n,i){void 0===i&&(i=0);for(var r=n.length-1;r>=i;r--)e=n[r].create(null,t.Fragment.from(e));return e}function he(e,n,i,r,o){if(o<e.length&&o<n.length&&e[o]==n[o]){var s=he(e,n,i,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==e.length-1?i.type:e[o+1]))return r.copy(r.content.append(t.Fragment.from(le(i,e,o+1))))}}function pe(e,n){if(0==n)return e;var i=e.content.replaceChild(e.childCount-1,pe(e.lastChild,n-1)),r=e.contentMatchAt(e.childCount).fillBefore(t.Fragment.empty,!0);return e.copy(i.append(r))}Yt.prototype.addRange=function(t,e){null==this.from?(this.from=t,this.to=e):(this.from=Math.min(t,this.from),this.to=Math.max(e,this.to))},Yt.prototype.changedRange=function(){if(null==this.from)return It(this.state.selection);var t=this.state.doc.resolve(Math.min(this.from,this.state.selection.from)),e=this.state.doc.resolve(this.to),n=t.sharedDepth(this.to);return{from:t.before(n+1),to:e.after(n+1)}},Yt.prototype.markDirty=function(t){null==this.from?this.view.docView.markDirty((t=t||this.changedRange()).from,t.to):this.view.docView.markDirty(this.from,this.to)},Yt.prototype.stateUpdated=function(t){return this.trackMappings.getMapping(t,this.mapping)?(this.trackMappings.destroy(),this.trackMappings=new kt(t),this.mappingTo=t,!0):(this.markDirty(),this.destroy(),!1)},Yt.prototype.finish=function(t){if(clearTimeout(this.timeout),!this.composing||t){this.view.domObserver.flush();var n=this.changedRange();this.markDirty(n),this.destroy();var i=this.state.selection,r=this.typeOver&&i instanceof e.TextSelection&&!i.empty&&i.$head.sameParent(i.$anchor);te(this.view,this.mapping,this.state,n,r),this.view.docView.dirty&&this.view.updateState(this.view.state)}},Yt.prototype.destroy=function(){clearTimeout(this.timeout),this.trackMappings.destroy(),this.view.inDOMChange=null},Yt.prototype.compositionEnd=function(){var t=this;this.composing&&(this.composing=!1,this.timeout=setTimeout(function(){return t.finish()},50))},Yt.start=function(t,e){return t.inDOMChange?e&&(clearTimeout(t.inDOMChange.timeout),t.inDOMChange.composing=!0):t.inDOMChange=new Yt(t,e),t.inDOMChange},Yt.commitTimeout=20;var ue={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},de=null;function fe(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,i=(de||(de=document.implementation.createHTMLDocument("title"))).createElement("div"),r=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),o=0;(n=r&&ue[r[1].toLowerCase()])&&(t=n.map(function(t){return"<"+t+">"}).join("")+t+n.map(function(t){return"</"+t+">"}).reverse().join(""),o=n.length),i.innerHTML=t;for(var s=0;s<o;s++)i=i.firstChild;return i}function ve(e,n){if(!e.size)return e;var i,r=e.content.firstChild.type.schema;try{i=JSON.parse(n)}catch(h){return e}for(var o=e.content,s=e.openStart,a=e.openEnd,c=i.length-2;c>=0;c-=2){var l=r.nodes[i[c]];if(!l||l.hasRequiredAttrs())break;o=t.Fragment.from(l.create(i[c+1],o)),s++,a++}return new t.Slice(o,s,a)}var me={childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0},ye=i.ie&&i.ie_version<=11,ge=function(t){var e=this;this.view=t,this.observer=window.MutationObserver&&new window.MutationObserver(function(t){return e.registerMutations(t)}),ye&&(this.onCharData=function(t){return e.registerMutation({target:t.target,type:"characterData",oldValue:t.prevValue})})};ge.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,me),ye&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData)},ge.prototype.stop=function(){this.observer&&(this.flush(),this.observer.disconnect()),ye&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)},ge.prototype.flush=function(){this.observer&&this.registerMutations(this.observer.takeRecords())},ge.prototype.registerMutations=function(t){for(var e=0;e<t.length;e++)this.registerMutation(t[e])},ge.prototype.registerMutation=function(t){if(this.view.editable){var e=this.view.docView.nearestDesc(t.target);if(("attributes"!=t.type||e!=this.view.docView&&"contenteditable"!=t.attributeName)&&e&&!e.ignoreMutation(t)){var n,i;if("childList"==t.type){var r=t.previousSibling&&t.previousSibling.parentNode==t.target?l(t.previousSibling)+1:0;if(-1==r)return;n=e.localPosFromDOM(t.target,r,-1);var o=t.nextSibling&&t.nextSibling.parentNode==t.target?l(t.nextSibling):t.target.childNodes.length;if(-1==o)return;i=e.localPosFromDOM(t.target,o,1)}else"attributes"==t.type?(n=e.posAtStart-e.border,i=e.posAtEnd+e.border):(n=e.posAtStart,i=e.posAtEnd,t.target.nodeValue==t.oldValue&&(Yt.start(this.view).typeOver=!0));Yt.start(this.view).addRange(n,i)}}};var be={},De={};function Me(t){t.shiftKey=!1,t.mouseDown=null,t.inDOMChange=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.domObserver=new ge(t),t.domObserver.start(),t.eventHandlers=Object.create(null);var e=function(e){var n=be[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!Te(t,e)||Se(t,e)||!t.editable&&e.type in De||n(t,e)})};for(var n in be)e(n);Ce(t)}function Oe(t){for(var e in t.domObserver.stop(),t.inDOMChange&&t.inDOMChange.destroy(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e])}function Ce(t){t.someProp("handleDOMEvents",function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return Se(t,e)})})}function Se(t,e){return t.someProp("handleDOMEvents",function(n){var i=n[e.type];return!!i&&(i(t,e)||e.defaultPrevented)})}function Te(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function we(t,e){Se(t,e)||!be[e.type]||!t.editable&&e.type in De||be[e.type](t,e)}function Ne(t){return{left:t.clientX,top:t.clientY}}De.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,t.inDOMChange){if(t.inDOMChange.composing)return;t.inDOMChange.finish()}t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),t.someProp("handleKeyDown",function(n){return n(t,e)})||xt(t,e)?e.preventDefault():t.selectionReader.poll("key")},De.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},De.keypress=function(t,n){if(!(t.inDOMChange||!n.charCode||n.ctrlKey&&!n.altKey||i.mac&&n.metaKey))if(t.someProp("handleKeyPress",function(e){return e(t,n)}))n.preventDefault();else{var r=t.state.selection;if(!(r instanceof e.TextSelection&&r.$from.sameParent(r.$to))){var o=String.fromCharCode(n.charCode);t.someProp("handleTextInput",function(e){return e(t,r.$from.pos,r.$to.pos,o)})||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}}};var xe={time:0,x:0,y:0,type:""};function Pe(t,e){var n=e.x-t.clientX,i=e.y-t.clientY;return n*n+i*i<100}function ke(t,e,n,i,r){if(-1==i)return!1;for(var o=t.state.doc.resolve(i),s=function(i){if(t.someProp(e,function(e){return i>o.depth?e(t,n,o.nodeAfter,o.before(i),r,!0):e(t,n,o.node(i),o.before(i),r,!1)}))return{v:!0}},a=o.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Ee(t,e,n){t.focused||t.focus();var i=t.state.tr.setSelection(e);"pointer"==n&&i.setMeta("pointer",!0),t.dispatch(i)}function Ve(t,n){if(-1==n)return!1;var i=t.state.doc.resolve(n),r=i.nodeAfter;return!!(r&&r.isAtom&&e.NodeSelection.isSelectable(r))&&(Ee(t,new e.NodeSelection(i),"pointer"),!0)}function Ae(t,n){if(-1==n)return!1;var i,r,o=t.state.selection;o instanceof e.NodeSelection&&(i=o.node);for(var s=t.state.doc.resolve(n),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(e.NodeSelection.isSelectable(c)){r=i&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=r&&(Ee(t,e.NodeSelection.create(t.state.doc,r),"pointer"),!0)}function Re(t,e,n,i,r){return ke(t,"handleClickOn",e,n,i)||t.someProp("handleClick",function(n){return n(t,e,i)})||(r?Ae(t,n):Ve(t,n))}function ze(t,e,n,i){return ke(t,"handleDoubleClickOn",e,n,i)||t.someProp("handleDoubleClick",function(n){return n(t,e,i)})}function Fe(t,e,n,i){return ke(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",function(n){return n(t,e,i)})||_e(t,n)}function _e(t,n){var i=t.state.doc;if(-1==n)return!!i.inlineContent&&(Ee(t,e.TextSelection.create(i,0,i.content.size),"pointer"),!0);for(var r=i.resolve(n),o=r.depth+1;o>0;o--){var s=o>r.depth?r.nodeAfter:r.node(o),a=r.before(o);if(s.inlineContent)Ee(t,e.TextSelection.create(i,a+1,a+1+s.content.size),"pointer");else{if(!e.NodeSelection.isSelectable(s))continue;Ee(t,e.NodeSelection.create(i,a),"pointer")}return!0}}function Le(t){return!!t.inDOMChange&&(t.inDOMChange.finish(!0),!0)}var Be=i.mac?"metaKey":"ctrlKey";be.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=Le(t),i=Date.now(),r="singleClick";i-xe.time<500&&Pe(e,xe)&&!e[Be]&&("singleClick"==xe.type?r="doubleClick":"doubleClick"==xe.type&&(r="tripleClick")),xe={time:i,x:e.clientX,y:e.clientY,type:r};var o=t.posAtCoords(Ne(e));o&&("singleClick"==r?t.mouseDown=new Ke(t,o,e,n):("doubleClick"==r?ze:Fe)(t,o.pos,o.inside,e)?e.preventDefault():t.selectionReader.poll("pointer"))};var Ke=function(t,n,r,o){var s,a,c=this;if(this.view=t,this.pos=n,this.event=r,this.flushed=o,this.selectNode=r[Be],this.allowDefault=r.shiftKey,n.inside>-1)s=t.state.doc.nodeAt(n.inside),a=n.inside;else{var l=t.state.doc.resolve(n.pos);s=l.parent,a=l.depth?l.before():0}this.mightDrag=null,this.target=o?null:r.target,(s.type.spec.draggable&&!1!==s.type.spec.selectable||t.state.selection instanceof e.NodeSelection&&a==t.state.selection.from)&&(this.mightDrag={node:s,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&i.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){return c.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),t.selectionReader.poll("pointer")};function qe(t,e){var n=e.ownerDocument,i=n.body.appendChild(n.createElement("div"));i.appendChild(e),i.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=n.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(function(){n.body.removeChild(i),t.focus()},50)}Ke.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Ke.prototype.up=function(t){this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)&&(this.allowDefault?(i.ie&&Xt(this.view.state)&&this.view.updateState(this.view.state),this.view.selectionReader.poll("pointer")):Re(this.view,this.pos.pos,this.pos.inside,t,this.selectNode)?t.preventDefault():this.flushed?(Ee(this.view,e.Selection.near(this.view.state.doc.resolve(this.pos.pos)),"pointer"),t.preventDefault()):this.view.selectionReader.poll("pointer"))},Ke.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),this.view.selectionReader.poll("pointer")},be.touchdown=function(t){Le(t),t.selectionReader.poll("pointer")},be.contextmenu=function(t){return Le(t)},De.compositionstart=De.compositionupdate=function(t){Yt.start(t,!0)},De.compositionend=function(t,e){if(!t.inDOMChange){if(!e.data)return;Yt.start(t,!0)}t.inDOMChange.compositionEnd()},De.input=function(t){var e=Yt.start(t);e.composing||e.finish()};var He=i.ie&&i.ie_version<15||i.ios&&i.webkit_version<604;function We(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function Ue(t,e){var n=t.dom.ownerDocument,i=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=n.body.appendChild(n.createElement(i?"textarea":"div"));i||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(function(){t.focus(),n.body.removeChild(r),i?je(t,r.value,null,e):je(t,r.textContent,r.innerHTML,e)},50)}function je(t,e,n,i){var r=ae(t,e,n,t.shiftKey,t.state.selection.$from);if(!r)return!1;if(t.someProp("handlePaste",function(e){return e(t,i,r)}))return!0;var o=We(r),s=o?t.state.tr.replaceSelectionWith(o,t.shiftKey):t.state.tr.replaceSelection(r);return t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}be.copy=De.cut=function(t,e){var n=t.state.selection,i="cut"==e.type;if(!n.empty){var r=He?null:e.clipboardData,o=se(t,n.content()),s=o.dom,a=o.text;r?(e.preventDefault(),r.clearData(),r.setData("text/html",s.innerHTML),r.setData("text/plain",a)):qe(t,s),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},De.paste=function(t,e){var n=He?null:e.clipboardData;n&&(je(t,n.getData("text/plain"),n.getData("text/html"),e)||n.files.length>0)?e.preventDefault():Ue(t,e)};var Xe=function(t,e){this.slice=t,this.move=e},Ye=i.mac?"altKey":"ctrlKey";for(var Ge in be.dragstart=function(t,n){var i=t.mouseDown;if(i&&i.done(),n.dataTransfer){var r=t.state.selection,o=r.empty?null:t.posAtCoords(Ne(n));if(o&&o.pos>=r.from&&o.pos<=(r instanceof e.NodeSelection?r.to-1:r.to))   ;else if(i&&i.mightDrag)t.dispatch(t.state.tr.setSelection(e.NodeSelection.create(t.state.doc,i.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){var s=t.docView.nearestDesc(n.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(e.NodeSelection.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=se(t,a),l=c.dom,h=c.text;n.dataTransfer.clearData(),n.dataTransfer.setData(He?"Text":"text/html",l.innerHTML),He||n.dataTransfer.setData("text/plain",h),t.dragging=new Xe(a,!n[Ye])}},be.dragend=function(t){window.setTimeout(function(){return t.dragging=null},50)},De.dragover=De.dragenter=function(t,e){return e.preventDefault()},De.drop=function(t,i){var r=t.dragging;if(t.dragging=null,i.dataTransfer){var o=t.posAtCoords(Ne(i));if(o){var s=t.state.doc.resolve(o.pos);if(s){var a=r&&r.slice||ae(t,i.dataTransfer.getData(He?"Text":"text/plain"),He?null:i.dataTransfer.getData("text/html"),!1,s);if(a&&(i.preventDefault(),!t.someProp("handleDrop",function(e){return e(t,i,a,r&&r.move)}))){var c=a?n.dropPoint(t.state.doc,s.pos,a):s.pos;null==c&&(c=s.pos);var l=t.state.tr;r&&r.move&&l.deleteSelection();var h=l.mapping.map(c),p=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,u=l.doc;if(p?l.replaceRangeWith(h,h,a.content.firstChild):l.replaceRange(h,h,a),!l.doc.eq(u)){var d=l.doc.resolve(h);p&&e.NodeSelection.isSelectable(a.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(a.content.firstChild)?l.setSelection(new e.NodeSelection(d)):l.setSelection(Ht(t,d,l.doc.resolve(l.mapping.map(c)))),t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}}}}}},be.focus=function(t){t.focused||(t.dom.classList.add("ProseMirror-focused"),t.focused=!0)},be.blur=function(t){t.focused&&(t.dom.classList.remove("ProseMirror-focused"),t.focused=!1)},De)be[Ge]=De[Ge];function Je(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var i in e)if(!(i in t))return!1;return!0}var Qe=function(t,e){this.spec=e||nn,this.side=this.spec.side||0,this.toDOM=t};Qe.prototype.map=function(t,e,n,i){var r=t.mapResult(e.from+i,this.side<0?-1:1),o=r.pos;return r.deleted?null:new $e(o-n,o-n,this)},Qe.prototype.valid=function(){return!0},Qe.prototype.eq=function(t){return this==t||t instanceof Qe&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Je(this.spec,t.spec))};var Ze=function(t,e){this.spec=e||nn,this.attrs=t};Ze.prototype.map=function(t,e,n,i){var r=t.map(e.from+i,this.spec.inclusiveStart?-1:1)-n,o=t.map(e.to+i,this.spec.inclusiveEnd?1:-1)-n;return r>=o?null:new $e(r,o,this)},Ze.prototype.valid=function(t,e){return e.from<e.to},Ze.prototype.eq=function(t){return this==t||t instanceof Ze&&Je(this.attrs,t.attrs)&&Je(this.spec,t.spec)},Ze.is=function(t){return t.type instanceof Ze};var Ie=function(t,e){this.spec=e||nn,this.attrs=t};Ie.prototype.map=function(t,e,n,i){var r=t.mapResult(e.from+i,1);if(r.deleted)return null;var o=t.mapResult(e.to+i,-1);return o.deleted||o.pos<=r.pos?null:new $e(r.pos-n,o.pos-n,this)},Ie.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),i=n.index,r=n.offset;return r==e.from&&r+t.child(i).nodeSize==e.to},Ie.prototype.eq=function(t){return this==t||t instanceof Ie&&Je(this.attrs,t.attrs)&&Je(this.spec,t.spec)};var $e=function(t,e,n){this.from=t,this.to=e,this.type=n},tn={spec:{}};$e.prototype.copy=function(t,e){return new $e(t,e,this.type)},$e.prototype.eq=function(t){return this.type.eq(t.type)&&this.from==t.from&&this.to==t.to},$e.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},$e.widget=function(t,e,n){return new $e(t,t,new Qe(e,n))},$e.inline=function(t,e,n,i){return new $e(t,e,new Ze(n,i))},$e.node=function(t,e,n,i){return new $e(t,e,new Ie(n,i))},tn.spec.get=function(){return this.type.spec},Object.defineProperties($e.prototype,tn);var en=[],nn={},rn=function(t,e){this.local=t&&t.length?t:en,this.children=e&&e.length?e:en};rn.create=function(t,e){return e.length?un(e,t,0,nn):on},rn.prototype.find=function(t,e,n){var i=[];return this.findInner(null==t?0:t,null==e?1e9:e,i,0,n),i},rn.prototype.findInner=function(t,e,n,i,r){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=e&&s.to>=t&&(!r||r(s.spec))&&n.push(s.copy(s.from+i,s.to+i))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,i+c,r)}},rn.prototype.map=function(t,e,n){return this==on||0==t.maps.length?this:this.mapInner(t,e,0,0,n||nn)},rn.prototype.mapInner=function(t,e,n,i,r){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,i);a&&a.type.valid(e,a)?(o||(o=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?an(this.children,o,t,e,n,i,r):o?new rn(o.sort(dn)):on},rn.prototype.add=function(t,e){return e.length?this==on?rn.create(t,e):this.addInner(t,e,0):this},rn.prototype.addInner=function(t,e,n){var i,r=this,o=0;t.forEach(function(t,s){var a,c=s+n;if(a=hn(e,t,c)){for(i||(i=r.children.slice());o<i.length&&i[o]<s;)o+=3;i[o]==s?i[o+2]=i[o+2].addInner(t,a,c+1):i.splice(o,0,s,s+t.nodeSize,un(a,t,c+1,nn)),o+=3}});var s=cn(o?pn(e):e,-n);return new rn(s.length?this.local.concat(s).sort(dn):this.local,i||this.children)},rn.prototype.remove=function(t){return 0==t.length||this==on?this:this.removeInner(t,0)},rn.prototype.removeInner=function(t,e){for(var n=this.children,i=this.local,r=0;r<n.length;r+=3){for(var o=void 0,s=n[r]+e,a=n[r+1]+e,c=0,l=void 0;c<t.length;c++)(l=t[c])&&l.from>s&&l.to<a&&(t[c]=null,(o||(o=[])).push(l));if(o){n==this.children&&(n=this.children.slice());var h=n[r+2].removeInner(o,s+1);h!=on?n[r+2]=h:(n.splice(r,3),r-=3)}}if(i.length)for(var p=0,u=void 0;p<t.length;p++)if(u=t[p])for(var d=0;d<i.length;d++)i[d].type.eq(u.type)&&(i==this.local&&(i=this.local.slice()),i.splice(d--,1));return n==this.children&&i==this.local?this:i.length||n.length?new rn(i,n):on},rn.prototype.forChild=function(t,e){var n,i;if(this==on)return this;if(e.isLeaf)return rn.empty;for(var r=0;r<this.children.length;r+=3)if(this.children[r]>=t){this.children[r]==t&&(n=this.children[r+2]);break}for(var o=t+1,s=o+e.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>o&&c.type instanceof Ze){var l=Math.max(o,c.from)-o,h=Math.min(s,c.to)-o;l<h&&(i||(i=[])).push(c.copy(l,h))}}if(i){var p=new rn(i.sort(dn));return n?new sn([p,n]):p}return n||on},rn.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof rn)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!1},rn.prototype.locals=function(t){return fn(this.localsInner(t))},rn.prototype.localsInner=function(t){if(this==on)return en;if(t.inlineContent||!this.local.some(Ze.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Ze||e.push(this.local[n]);return e};var on=new rn;rn.empty=on,rn.removeOverlap=fn;var sn=function(t){this.members=t};function an(t,e,n,i,r,o,s){for(var a=t.slice(),c=function(t,e,n,i){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||t>c+o||(e>=a[s]+o?a[s+1]=-1:(l=i-n-(e-t)+(o-r))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var h=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var u=n.map(a[p]+o),d=u-r;if(d<0||d>=i.content.size){h=!0;continue}var f=n.map(t[p+1]+o,-1)-r,v=i.content.findIndex(d),m=v.index,y=v.offset,g=i.maybeChild(m);if(g&&y==d&&y+g.nodeSize==f){var b=a[p+2].mapInner(n,g,u+1,a[p]+o+1,s);b!=on?(a[p]=d,a[p+1]=f,a[p+2]=b):(a[p+1]=-2,h=!0)}else h=!0}if(h){var D=un(ln(a,t,e||[],n,r,o,s),i,0,s);e=D.local;for(var M=0;M<a.length;M+=3)a[M+1]<0&&(a.splice(M,3),M-=3);for(var O=0,C=0;O<D.children.length;O+=3){for(var S=D.children[O];C<a.length&&a[C]<S;)C+=3;a.splice(C,0,D.children[O],D.children[O+1],D.children[O+2])}}return new rn(e&&e.sort(dn),a)}function cn(t,e){if(!e||!t.length)return t;for(var n=[],i=0;i<t.length;i++){var r=t[i];n.push(new $e(r.from+e,r.to+e,r.type))}return n}function ln(t,e,n,i,r,o,s){function a(t,e){for(var o=0;o<t.local.length;o++){var c=t.local[o].map(i,r,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[o].spec)}for(var l=0;l<t.children.length;l+=3)a(t.children[l+2],t.children[l]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+o+1);return n}function hn(t,e,n){if(e.isLeaf)return null;for(var i=n+e.nodeSize,r=null,o=0,s=void 0;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<i&&((r||(r=[])).push(s),t[o]=null);return r}function pn(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function un(t,e,n,i){var r=[],o=!1;e.forEach(function(e,s){var a=hn(t,e,s+n);if(a){o=!0;var c=un(a,e,n+s+1,i);c!=on&&r.push(s,s+e.nodeSize,c)}});for(var s=cn(o?pn(t):t,-n).sort(dn),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(i.onRemove&&i.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new rn(s,r):on}function dn(t,e){return t.from-e.from||t.to-e.to}function fn(t){for(var e=t,n=0;n<e.length-1;n++){var i=e[n];if(i.from!=i.to)for(var r=n+1;r<e.length;r++){var o=e[r];if(o.from!=i.from){o.from<i.to&&(e==t&&(e=t.slice()),e[n]=i.copy(i.from,o.from),vn(e,r,i.copy(o.from,i.to)));break}o.to!=i.to&&(e==t&&(e=t.slice()),e[r]=o.copy(o.from,i.to),vn(e,r+1,o.copy(i.to,o.to)))}}return e}function vn(t,e,n){for(;e<t.length&&dn(n,t[e])>0;)e++;t.splice(e,0,n)}function mn(t){var e=[];return t.someProp("decorations",function(n){var i=n(t.state);i&&i!=on&&e.push(i)}),t.cursorWrapper&&e.push(rn.create(t.state.doc,[t.cursorWrapper.deco])),sn.from(e)}sn.prototype.forChild=function(t,e){if(e.isLeaf)return rn.empty;for(var n=[],i=0;i<this.members.length;i++){var r=this.members[i].forChild(t,e);r!=on&&(r instanceof sn?n=n.concat(r.members):n.push(r))}return sn.from(n)},sn.prototype.eq=function(t){if(!(t instanceof sn)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},sn.prototype.locals=function(t){for(var e,n=!0,i=0;i<this.members.length;i++){var r=this.members[i].localsInner(t);if(r.length)if(e){n&&(e=e.slice(),n=!1);for(var o=0;o<r.length;o++)e.push(r[o])}else e=r}return e?fn(n?e:e.sort(dn)):en},sn.from=function(t){switch(t.length){case 0:return on;case 1:return t[0];default:return new sn(t)}};var yn=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=On(this),this.redraw=!1,this.cursorWrapper=null,Mn(this),this.nodeViews=Tn(this),this.docView=Q(this.state.doc,bn(this),mn(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,Me(this),this.selectionReader=new Et(this),this.pluginViews=[],this.updatePluginViews()},gn={props:{},root:{}};function bn(t){var e=Object.create(null);return e.class="ProseMirror"+(t.focused?" ProseMirror-focused":""),e.contenteditable=String(t.editable),t.someProp("attributes",function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var i in n)"class"==i?e.class+=" "+n[i]:e[i]||"contenteditable"==i||"nodeName"==i||(e[i]=String(n[i]))}),[$e.node(0,t.state.doc.content.size,e)]}function Dn(t){var e=document.createElement("span");return e.textContent="\ufeff",t||(e.style.position="absolute",e.style.left="-100000px"),e}function Mn(e){var n=Xt(e.state);if(!n||i.ie&&e.mouseDown)e.cursorWrapper=null;else{var r,o=e.state.selection.visible,s=e.state.storedMarks||n.marks();e.cursorWrapper&&t.Mark.sameSet(e.cursorWrapper.deco.spec.marks,s)&&"\ufeff"==e.cursorWrapper.dom.textContent&&e.cursorWrapper.deco.spec.visible==o?e.cursorWrapper.deco.pos!=n.pos&&(r=e.cursorWrapper.dom):r=Dn(o),r&&(e.cursorWrapper={dom:r,deco:$e.widget(n.pos,r,{isCursorWrapper:!0,marks:s,raw:!0,visible:o})})}}function On(t){return!t.someProp("editable",function(e){return!1===e(t.state)})}function Cn(t){var e=t.getSelection(),n=e.focusOffset,i=e.focusNode;return i&&3!=i.nodeType?[i,n,1==i.nodeType?i.childNodes[n-1]:null,1==i.nodeType?i.childNodes[n]:null]:null}function Sn(t,e){var n=Cn(e);if(!n||3==n[0].nodeType)return!1;for(var i=0;i<t.length;i++)if(n[i]!=t[i])return!0;return!1}function Tn(t){var e={};return t.someProp("nodeViews",function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}),e}function wn(t,e){var n=0,i=0;for(var r in t){if(t[r]!=e[r])return!0;n++}for(var o in e)i++;return n!=i}gn.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},yn.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Ce(this),this._props=t;var e=Tn(this);wn(e,this.nodeViews)&&(this.nodeViews=e,this.redraw=!0),this.updateState(t.state)},yn.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var i in e.state=this.state,t)e[i]=t[i];this.update(e)},yn.prototype.updateState=function(t){var n=this,r=this.state;if(this.state=t,r.plugins!=t.plugins&&Ce(this),this.domObserver.flush(),!this.inDOMChange||!this.inDOMChange.stateUpdated(t)){var o=this.editable;this.editable=On(this),Mn(this);var s=mn(this),a=bn(this),c=r.config!=t.config?"reset":t.scrollToSelection>r.scrollToSelection?"to selection":"preserve",l=this.redraw||!this.docView.matchesNode(t.doc,a,s),h=l||!t.selection.eq(r.selection)||this.selectionReader.domChanged(),p="preserve"==c&&h&&M(this);if(h){this.domObserver.stop();var u=!1;if(l){var d=i.chrome&&Cn(this.root);!this.redraw&&this.docView.update(t.doc,a,s,this)||(this.docView.destroy(),this.docView=Q(t.doc,a,s,this.dom,this),this.redraw=!1),this.selectionReader.clearDOMState(),d&&(u=Sn(d,this.root))}zt(this,!1,u),this.domObserver.start()}if(o!=this.editable&&this.selectionReader.editableChanged(),this.updatePluginViews(r),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var f=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(t){return t(n)})||(t.selection instanceof e.NodeSelection?D(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),f):D(this,this.coordsAtPos(t.selection.head),f))}else p&&O(p)}},yn.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},yn.prototype.updatePluginViews=function(t){var e=this.state.plugins;if(t&&t.plugins==e)for(var n=0;n<this.pluginViews.length;n++){var i=this.pluginViews[n];i.update&&i.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<e.length;r++){var o=e[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},yn.prototype.someProp=function(t,e){var n,i=this._props&&this._props[t];if(null!=i&&(n=e?e(i):i))return n;var r=this.state.plugins;if(r)for(var o=0;o<r.length;o++){var s=r[o].props[t];if(null!=s&&(n=e?e(s):s))return n}},yn.prototype.hasFocus=function(){return this.root.activeElement==this.dom},yn.prototype.focus=function(){this.domObserver.stop(),zt(this,!0),this.domObserver.start(),this.editable&&this.dom.focus()},gn.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return this._root=e;return t||document},yn.prototype.posAtCoords=function(t){var e=x(this,t);return this.inDOMChange&&e&&(e.pos=this.inDOMChange.mapping.map(e.pos),-1!=e.inside&&(e.inside=this.inDOMChange.mapping.map(e.inside))),e},yn.prototype.coordsAtPos=function(t){return this.inDOMChange&&(t=this.inDOMChange.mapping.invert().map(t)),k(this,t)},yn.prototype.domAtPos=function(t){return this.inDOMChange&&(t=this.inDOMChange.mapping.invert().map(t)),this.docView.domFromPos(t)},yn.prototype.nodeDOM=function(t){this.inDOMChange&&(t=this.inDOMChange.mapping.invert().map(t));var e=this.docView.descAt(t);return e?e.nodeDOM:null},yn.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var i=this.docView.posFromDOM(t,e,n);if(null==i)throw new RangeError("DOM position not inside the editor");return this.inDOMChange&&(i=this.inDOMChange.mapping.map(i)),i},yn.prototype.endOfTextblock=function(t,e){return L(this,e||this.state,t)},yn.prototype.destroy=function(){this.docView&&(Oe(this),this.destroyPluginViews(),this.selectionReader.destroy(),this.mounted?(this.docView.update(this.state.doc,[],mn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},yn.prototype.dispatchEvent=function(t){return we(this,t)},yn.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(yn.prototype,gn),exports.EditorView=yn,exports.Decoration=$e,exports.DecorationSet=rn,exports.__serializeForClipboard=se,exports.__parseFromClipboard=ae;
},{"prosemirror-model":"jjSS","prosemirror-state":"QIdp","prosemirror-transform":"aJvy"}],"Kav5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-keymap"),r=require("prosemirror-state"),t=require("prosemirror-view"),o=require("prosemirror-model"),n=function(e){function r(r){e.call(this,r,r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.map=function(t,o){var n=t.resolve(o.map(this.head));return r.valid(n)?new r(n):e.near(n)},r.prototype.content=function(){return o.Slice.empty},r.prototype.eq=function(e){return e instanceof r&&e.head==this.head},r.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},r.fromJSON=function(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new r(e.resolve(t.pos))},r.prototype.getBookmark=function(){return new i(this.anchor)},r.valid=function(e){var r=e.parent;if(r.isTextblock||!a(e)||!u(e))return!1;var t=r.type.spec.allowGapCursor;if(null!=t)return t;var o=r.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock},r.findFrom=function(e,t,o){if(!o&&r.valid(e))return e;for(var n=e.pos,i=null,a=e.depth;;a--){var u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){i=u.maybeChild(t>0?e.indexAfter(a):e.index(a)-1);break}if(0==a)return null;n+=t;var l=e.doc.resolve(n);if(r.valid(l))return l}for(;i=t>0?i.firstChild:i.lastChild;){n+=t;var c=e.doc.resolve(n);if(r.valid(c))return c}return null},r}(r.Selection);n.prototype.visible=!1,r.Selection.jsonID("gapcursor",n);var i=function(e){this.pos=e};function a(e){for(var r=e.depth;r>=0;r--){var t=e.index(r);if(0!=t)for(var o=e.node(r).child(t-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function u(e){for(var r=e.depth;r>=0;r--){var t=e.indexAfter(r),o=e.node(r);if(t!=o.childCount)for(var n=o.child(t);;n=n.firstChild){if(0==n.childCount&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}i.prototype.map=function(e){return new i(e.map(this.pos))},i.prototype.resolve=function(e){var t=e.resolve(this.pos);return n.valid(t)?new n(t):r.Selection.near(t)};var l=function(){return new r.Plugin({props:{decorations:f,createSelectionBetween:function(e,r,t){if(r.pos==t.pos&&n.valid(t))return new n(t)},handleClick:p,handleKeyDown:c}})},c=e.keydownHandler({ArrowLeft:s("horiz",-1),ArrowRight:s("horiz",1),ArrowUp:s("vert",-1),ArrowDown:s("vert",1)});function s(e,t){var o="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,i,a){var u=e.selection,l=t>0?u.$to:u.$from,c=u.empty;if(u instanceof r.TextSelection){if(!a.endOfTextblock(o))return!1;c=!1,l=e.doc.resolve(t>0?l.after():l.before())}var s=n.findFrom(l,t,c);return!!s&&(i&&i(e.tr.setSelection(new n(s))),!0)}}function p(e,t,o){var i=e.state.doc.resolve(t);if(!n.valid(i))return!1;var a=e.posAtCoords({left:o.clientX,top:o.clientY}).inside;return!(a>-1&&r.NodeSelection.isSelectable(e.state.doc.nodeAt(a)))&&(e.dispatch(e.state.tr.setSelection(new n(i))),!0)}function f(e){if(!(e.selection instanceof n))return null;var r=document.createElement("div");return r.className="ProseMirror-gapcursor",t.DecorationSet.create(e.doc,[t.Decoration.widget(e.selection.head,r,{key:"gapcursor"})])}exports.gapCursor=l,exports.GapCursor=n;
},{"prosemirror-keymap":"JyXL","prosemirror-state":"QIdp","prosemirror-view":"zSD1","prosemirror-model":"jjSS"}],"Srba":[function(require,module,exports) {
var t=200,e=function(){};e.prototype.append=function(n){return n.length?(n=e.from(n),!this.length&&n||n.length<t&&this.leafAppend(n)||this.length<t&&n.leafPrepend(this)||this.appendInner(n)):this},e.prototype.prepend=function(t){return t.length?e.from(t).append(this):this},e.prototype.appendInner=function(t){return new r(this,t)},e.prototype.slice=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=this.length),t>=n?e.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))},e.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},e.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},e.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(e,n){return r.push(t(e,n))},e,n),r},e.from=function(t){return t instanceof e?t:t&&t.length?new n(t):e.empty};var n=function(e){function n(t){e.call(this),this.values=t}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={length:{},depth:{}};return n.prototype.flatten=function(){return this.values},n.prototype.sliceInner=function(t,e){return 0==t&&e==this.length?this:new n(this.values.slice(t,e))},n.prototype.getInner=function(t){return this.values[t]},n.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},n.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},n.prototype.leafAppend=function(e){if(this.length+e.length<=t)return new n(this.values.concat(e.flatten()))},n.prototype.leafPrepend=function(e){if(this.length+e.length<=t)return new n(e.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(n.prototype,r),n}(e);e.empty=new n([]);var r=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(e);module.exports=e;
},{}],"iGDy":[function(require,module,exports) {
"use strict";function n(n){return n&&"object"==typeof n&&"default"in n?n.default:n}Object.defineProperty(exports,"__esModule",{value:!0});var e=n(require("rope-sequence")),t=require("prosemirror-transform"),r=require("prosemirror-state"),i=500,o=function(n,e){this.items=n,this.eventCount=e};function u(n,e){var t;return n.forEach(function(n,r){if(n.selection&&0==e--)return t=r,!1}),n.slice(t)}o.prototype.popEvent=function(n,e){var t=this;if(0==this.eventCount)return null;for(var r,i,u=this.items.length;;u--){if(t.items.get(u-1).selection){--u;break}}e&&(r=this.remapping(u,this.items.length),i=r.maps.length);var p,a,h=n.tr,l=[],c=[];return this.items.forEach(function(n,e){if(!n.step)return r||(r=t.remapping(u,e+1),i=r.maps.length),i--,void c.push(n);if(r){c.push(new s(n.map));var f,g=n.step.map(r.slice(i));g&&h.maybeStep(g).doc&&(f=h.mapping.maps[h.mapping.maps.length-1],l.push(new s(f,null,null,l.length+c.length))),i--,f&&r.appendMap(f,i)}else h.maybeStep(n.step);return n.selection?(p=r?n.selection.map(r.slice(i)):n.selection,a=new o(t.items.slice(0,u).append(c.reverse().concat(l)),t.eventCount-1),!1):void 0},this.items.length,0),{remaining:a,transform:h,selection:p}},o.prototype.addTransform=function(n,e,t,r){for(var i=[],p=this.eventCount,h=this.items,l=!r&&h.length?h.get(h.length-1):null,c=0;c<n.steps.length;c++){var f,g=n.steps[c].invert(n.docs[c]),v=new s(n.mapping.maps[c],g,e);(f=l&&l.merge(v))&&(v=f,c?i.pop():h=h.slice(0,h.length-1)),i.push(v),e&&(p++,e=null),r||(l=v)}var d=p-t.depth;return d>a&&(h=u(h,d),p-=d),new o(h.append(i),p)},o.prototype.remapping=function(n,e){var r=new t.Mapping;return this.items.forEach(function(e,t){var i=null!=e.mirrorOffset&&t-e.mirrorOffset>=n?i=r.maps.length-e.mirrorOffset:null;r.appendMap(e.map,i)},n,e),r},o.prototype.addMaps=function(n){return 0==this.eventCount?this:new o(this.items.append(n.map(function(n){return new s(n)})),this.eventCount)},o.prototype.rebased=function(n,e){if(!this.eventCount)return this;var t=[],r=Math.max(0,this.items.length-e),u=n.mapping,p=n.steps.length,a=this.eventCount;this.items.forEach(function(n){n.selection&&a--},r);var h=e;this.items.forEach(function(e){var r=u.getMirror(--h);if(null!=r){p=Math.min(p,r);var i=u.maps[r];if(e.step){var o=n.steps[r].invert(n.docs[r]),l=e.selection&&e.selection.map(u.slice(h,r));l&&a++,t.push(new s(i,o,l))}else t.push(new s(i))}},r);for(var l=[],c=e;c<p;c++)l.push(new s(u.maps[c]));var f=this.items.slice(0,r).append(l).append(t),g=new o(f,a);return g.emptyItemCount()>i&&(g=g.compress(this.items.length-t.length)),g},o.prototype.emptyItemCount=function(){var n=0;return this.items.forEach(function(e){e.step||n++}),n},o.prototype.compress=function(n){void 0===n&&(n=this.items.length);var t=this.remapping(0,n),r=t.maps.length,i=[],u=0;return this.items.forEach(function(e,o){if(o>=n)i.push(e),e.selection&&u++;else if(e.step){var p=e.step.map(t.slice(r)),a=p&&p.getMap();if(r--,a&&t.appendMap(a,r),p){var h=e.selection&&e.selection.map(t.slice(r));h&&u++;var l,c=new s(a.invert(),p,h),f=i.length-1;(l=i.length&&i[f].merge(c))?i[f]=l:i.push(c)}}else e.map&&r--},this.items.length,0),new o(e.from(i.reverse()),u)},o.empty=new o(e.empty,0);var s=function(n,e,t,r){this.map=n,this.step=e,this.selection=t,this.mirrorOffset=r};s.prototype.merge=function(n){if(this.step&&n.step&&!n.selection){var e=n.step.merge(this.step);if(e)return new s(e.getMap().invert(),e,this.selection)}};var p=function(n,e,t,r){this.done=n,this.undone=e,this.prevRanges=t,this.prevTime=r},a=20;function h(n,e,t,r){var i,u=t.getMeta(M);if(u)return u.historyState;t.getMeta(C)&&(n=new p(n.done,n.undone,null,0));var s=t.getMeta("appendedTransaction");if(0==t.steps.length)return n;if(s&&s.getMeta(M))return s.getMeta(M).redo?new p(n.done.addTransform(t,null,r,y(e)),n.undone,c(t.mapping.maps[t.steps.length-1]),n.prevTime):new p(n.done,n.undone.addTransform(t,null,r,y(e)),null,n.prevTime);if(!1===t.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=t.getMeta("rebased"))?new p(n.done.rebased(t,i),n.undone.rebased(t,i),f(n.prevRanges,t.mapping),n.prevTime):new p(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),f(n.prevRanges,t.mapping),n.prevTime);var a=n.prevTime<(t.time||0)-r.newGroupDelay||!s&&!l(t,n.prevRanges),h=s?f(n.prevRanges,t.mapping):c(t.mapping.maps[t.steps.length-1]);return new p(n.done.addTransform(t,a?e.selection.getBookmark():null,r,y(e)),o.empty,h,t.time)}function l(n,e){if(!e)return!1;if(!n.docChanged)return!0;var t=!1;return n.mapping.maps[0].forEach(function(n,r){for(var i=0;i<e.length;i+=2)n<=e[i+1]&&r>=e[i]&&(t=!0)}),t}function c(n){var e=[];return n.forEach(function(n,t,r,i){return e.push(r,i)}),e}function f(n,e){if(!n)return null;for(var t=[],r=0;r<n.length;r+=2){var i=e.map(n[r],1),o=e.map(n[r+1],-1);i<=o&&t.push(i,o)}return t}function g(n,e,t,r){var i=y(e),o=M.get(e).spec.config,u=(r?n.undone:n.done).popEvent(e,i);if(u){var s=u.selection.resolve(u.transform.doc),a=(r?n.done:n.undone).addTransform(u.transform,e.selection.getBookmark(),o,i),h=new p(r?a:u.remaining,r?u.remaining:a,null,0);t(u.transform.setSelection(s).setMeta(M,{redo:r,historyState:h}).scrollIntoView())}}var v=!1,d=null;function y(n){var e=n.plugins;if(d!=e){v=!1,d=e;for(var t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){v=!0;break}}return v}function w(n){return n.setMeta(C,!0)}var M=new r.PluginKey("history"),C=new r.PluginKey("closeHistory");function E(n){return n={depth:n&&n.depth||100,newGroupDelay:n&&n.newGroupDelay||500},new r.Plugin({key:M,state:{init:function(){return new p(o.empty,o.empty,null,0)},apply:function(e,t,r){return h(t,r,e,n)}},config:n})}function S(n,e){var t=M.getState(n);return!(!t||0==t.done.eventCount)&&(e&&g(t,n,e,!1),!0)}function T(n,e){var t=M.getState(n);return!(!t||0==t.undone.eventCount)&&(e&&g(t,n,e,!0),!0)}function x(n){var e=M.getState(n);return e?e.done.eventCount:0}function k(n){var e=M.getState(n);return e?e.undone.eventCount:0}exports.HistoryState=p,exports.closeHistory=w,exports.history=E,exports.undo=S,exports.redo=T,exports.undoDepth=x,exports.redoDepth=k;
},{"rope-sequence":"Srba","prosemirror-transform":"aJvy","prosemirror-state":"QIdp"}],"+Ewx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-state"),t=require("prosemirror-transform"),r=function(e,t){this.match=e,this.handler="string"==typeof t?n(t):t};function n(e){return function(t,r,n,o){var s=e;if(r[1]){var u=r[0].lastIndexOf(r[1]);s+=r[0].slice(u+r[1].length);var a=(n+=u)-o;a>0&&(s=r[0].slice(u-a,u)+s,n=o)}var i=t.doc.resolve(n).marks();return t.tr.replaceWith(n,o,t.schema.text(s,i))}}var o=500;function s(t){var r=t.rules;return new e.Plugin({state:{init:function(){return null},apply:function(e,t){var r=e.getMeta(this);return r||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,t,n,s){var u=e.state,a=u.doc.resolve(t);if(a.parent.type.spec.code)return!1;for(var i=a.parent.textBetween(Math.max(0,a.parentOffset-o),a.parentOffset,null,"")+s,l=0;l<r.length;l++){var p=r[l].match.exec(i),c=p&&r[l].handler(u,p,t-(p[0].length-s.length),n);if(c)return e.dispatch(c.setMeta(this,{transform:c,from:t,to:n,text:s})),!0}return!1}},isInputRules:!0})}function u(e,t){for(var r=e.plugins,n=0;n<r.length;n++){var o=r[n],s=void 0;if(o.spec.isInputRules&&(s=o.getState(e))){if(t){for(var u=e.tr,a=s.transform,i=a.steps.length-1;i>=0;i--)u.step(a.steps[i].invert(a.docs[i]));var l=u.doc.resolve(s.from).marks();t(u.replaceWith(s.from,s.to,e.schema.text(s.text,l)))}return!0}}return!1}var a=new r(/--$/,""),i=new r(/\.\.\.$/,""),l=new r(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),p=new r(/"$/,""),c=new r(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),f=new r(/'$/,""),v=[l,p,c,f];function d(e,n,o,s){return new r(e,function(e,r,u,a){var i=o instanceof Function?o(r):o,l=e.tr.delete(u,a),p=l.doc.resolve(u).blockRange(),c=p&&t.findWrapping(p,n,i);if(!c)return null;l.wrap(p,c);var f=l.doc.resolve(u-1).nodeBefore;return f&&f.type==n&&t.canJoin(l.doc,u-1)&&(!s||s(r,f))&&l.join(u-1),l})}function x(e,t,n){return new r(e,function(e,r,o,s){var u=e.doc.resolve(o),a=n instanceof Function?n(r):n;return u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),t)?e.tr.delete(o,s).setBlockType(o,o,t,a):null})}exports.InputRule=r,exports.inputRules=s,exports.undoInputRule=u,exports.emDash=a,exports.ellipsis=i,exports.openDoubleQuote=l,exports.closeDoubleQuote=p,exports.openSingleQuote=c,exports.closeSingleQuote=f,exports.smartQuotes=v,exports.wrappingInputRule=d,exports.textblockTypeInputRule=x;
},{"prosemirror-state":"QIdp","prosemirror-transform":"aJvy"}],"GCAF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildTodoInputRules=t;var e=require("option-t/lib/Undefinable"),r=require("option-t/lib/Undefinable/map"),n=require("prosemirror-inputrules");const i=e=>(0,n.wrappingInputRule)(/^\s*(\[\s?\])\s$/,e);function t(t){const o=[(0,r.mapForUndefinable)(t.nodes.todo,i)].filter(e.isNotUndefined);return(0,n.inputRules)({rules:o})}
},{"option-t/lib/Undefinable":"TiSL","option-t/lib/Undefinable/map":"Xz9R","prosemirror-inputrules":"+Ewx"}],"0hAx":[function(require,module,exports) {
"use strict";function e({className:e}){const t=document.createElement("li");return t.className=e,t.style.listStyleType="none",t}function t({checked:e}){const t=document.createElement("input");return t.type="checkbox",t.checked=e,t}function c(){const e=document.createElement("span");return e.style.display="inline-block",e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TodoNodeView=void 0;class n{constructor(n){const o=e({className:"todo"}),s=t({checked:n.attrs.checked}),d=c();o.appendChild(s),o.appendChild(d),this.contentDOM=d,this.dom=o}}exports.TodoNodeView=n;
},{}],"5Inq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isTodo=n,exports.buildTodoPlugins=d;var e=require("option-t/lib/Nullable"),t=require("prosemirror-state"),o=require("../../../utils/unwrapUnsafeValue"),r=require("./TodoInputRule"),u=require("./TodoNodeView");function n(e){return"todo"===e.type.name}function i(t){if((0,e.isNull)(t))return!1;const r=(0,o.unwrapUnsafeValue)(t);return"input"===r.nodeName.toLowerCase()&&"checkbox"===r.getAttribute("type")}const s=new t.Plugin({props:{nodeViews:{todo:e=>new u.TodoNodeView(e)},handleClickOn:(e,t,o,r,u)=>!(!n(o)||!i(u.target))&&(e.dispatch(e.state.tr.setNodeMarkup(r,void 0,{checked:!o.attrs.checked})),!0)}});function d(e){return[(0,r.buildTodoInputRules)(e),s]}
},{"option-t/lib/Nullable":"Co55","prosemirror-state":"QIdp","../../../utils/unwrapUnsafeValue":"wUp7","./TodoInputRule":"GCAF","./TodoNodeView":"0hAx"}],"KSYQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.todoSchema=void 0;var e=require("../../../utils/unwrapUnsafeValue");const t={attrs:{checked:{default:!1}},content:"paragraph",defining:!0,group:"block",parseDOM:[{tag:"li.todo",getAttrs(t){if("string"==typeof t)return{};const r=(0,e.unwrapUnsafeValue)(t);return{checked:!!r.hasAttribute("checked")&&Boolean(r.getAttribute("checked"))}}}]},r={spec:{nodes:{todo:t}}};exports.todoSchema=r;
},{"../../../utils/unwrapUnsafeValue":"wUp7"}],"OTxq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"buildTodoPlugins",{enumerable:!0,get:function(){return e.buildTodoPlugins}}),Object.defineProperty(exports,"todoSchema",{enumerable:!0,get:function(){return o.todoSchema}});var e=require("./TodoPlugin"),o=require("./TodoSchema");
},{"./TodoPlugin":"5Inq","./TodoSchema":"KSYQ"}],"I927":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildInputRules=u;var e=require("option-t/lib/Undefinable"),n=require("option-t/lib/Undefinable/map"),t=require("prosemirror-inputrules");const r=e=>(0,t.wrappingInputRule)(/^\s*>\s$/,e),o=e=>(0,t.wrappingInputRule)(/^(\d+)\.\s$/,e,e=>({order:+e[1]}),(e,n)=>n.childCount+n.attrs.order===+e[1]),l=e=>(0,t.wrappingInputRule)(/^\s*([-+*])\s$/,e),i=e=>(0,t.textblockTypeInputRule)(/^```$/,e);function s(e,n){return(0,t.textblockTypeInputRule)(new RegExp("^(#{1,"+n+"})\\s$"),e,e=>({level:e[1].length}))}function u(u){const p=[...t.smartQuotes.concat(t.ellipsis,t.emDash),(0,n.mapForUndefinable)(u.nodes.blockquote,r),(0,n.mapForUndefinable)(u.nodes.ordered_list,o),(0,n.mapForUndefinable)(u.nodes.bullet_list,l),(0,n.mapForUndefinable)(u.nodes.code_block,i),(0,n.mapForUndefinable)(u.nodes.heading,e=>s(e,6))].filter(e.isNotUndefined);return(0,t.inputRules)({rules:p})}
},{"option-t/lib/Undefinable":"TiSL","option-t/lib/Undefinable/map":"Xz9R","prosemirror-inputrules":"+Ewx"}],"ugME":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-transform"),t=require("prosemirror-model"),r=["ol",0],n=["ul",0],o=["li",0],i={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?r:["ol",{start:e.attrs.order},0]}},a={parseDOM:[{tag:"ul"}],toDOM:function(){return n}},l={parseDOM:[{tag:"li"}],toDOM:function(){return o},defining:!0};function d(e,t){var r={};for(var n in e)r[n]=e[n];for(var o in t)r[o]=t[o];return r}function p(e,t,r){return e.append({ordered_list:d(i,{content:"list_item+",group:r}),bullet_list:d(a,{content:"list_item+",group:r}),list_item:d(l,{content:t})})}function s(r,n){return function(o,i){var a=o.selection,l=a.$from,d=a.$to,p=l.blockRange(d),s=!1,u=p;if(!p)return!1;if(p.depth>=2&&l.node(p.depth-1).type.compatibleContent(r)&&0==p.startIndex){if(0==l.index(p.depth-1))return!1;var f=o.doc.resolve(p.start-2);u=new t.NodeRange(f,f,p.depth),p.endIndex<p.parent.childCount&&(p=new t.NodeRange(l,o.doc.resolve(d.end(p.depth)),p.depth)),s=!0}var m=e.findWrapping(u,r,n,p);return!!m&&(i&&i(c(o.tr,p,m,s,r).scrollIntoView()),!0)}}function c(r,n,o,i,a){for(var l=t.Fragment.empty,d=o.length-1;d>=0;d--)l=t.Fragment.from(o[d].type.create(o[d].attrs,l));r.step(new e.ReplaceAroundStep(n.start-(i?2:0),n.end,n.start,n.end,new t.Slice(l,0,0),o.length,!0));for(var p=0,s=0;s<o.length;s++)o[s].type==a&&(p=s+1);for(var c=o.length-p,u=n.start+o.length-(i?2:0),f=n.parent,m=n.startIndex,g=n.endIndex,h=!0;m<g;m++,h=!1)!h&&e.canSplit(r.doc,u,c)&&(r.split(u,c),u+=2*c),u+=f.child(m).nodeSize;return r}function u(r){return function(n,o){var i=n.selection,a=i.$from,l=i.$to,d=i.node;if(d&&d.isBlock||a.depth<2||!a.sameParent(l))return!1;var p=a.node(-1);if(p.type!=r)return!1;if(0==a.parent.content.size){if(2==a.depth||a.node(-3).type!=r||a.index(-2)!=a.node(-2).childCount-1)return!1;if(o){for(var s=t.Fragment.empty,c=a.index(-1)>0,u=a.depth-(c?1:2);u>=a.depth-3;u--)s=t.Fragment.from(a.node(u).copy(s));s=s.append(t.Fragment.from(r.createAndFill()));var f=n.tr.replace(a.before(c?null:-1),a.after(-3),new t.Slice(s,c?3:2,2));f.setSelection(n.selection.constructor.near(f.doc.resolve(a.pos+(c?3:2)))),o(f.scrollIntoView())}return!0}var m=l.pos==a.end()?p.defaultContentType(0):null,g=n.tr.delete(a.pos,l.pos),h=m&&[null,{type:m}];return!!e.canSplit(g.doc,a.pos,2,h)&&(o&&o(g.split(a.pos,2,h).scrollIntoView()),!0)}}function f(e){return function(t,r){var n=t.selection,o=n.$from,i=n.$to,a=o.blockRange(i,function(t){return t.childCount&&t.firstChild.type==e});return!!a&&(!r||(o.node(a.depth-1).type==e?m(t,r,e,a):g(t,r,a)))}}function m(r,n,o,i){var a=r.tr,l=i.end,d=i.$to.end(i.depth);return l<d&&(a.step(new e.ReplaceAroundStep(l-1,d,l,d,new t.Slice(t.Fragment.from(o.create(null,i.parent.copy())),1,0),1,!0)),i=new t.NodeRange(a.doc.resolve(i.$from.pos),a.doc.resolve(d),i.depth)),n(a.lift(i,e.liftTarget(i)).scrollIntoView()),!0}function g(r,n,o){for(var i=r.tr,a=o.parent,l=o.end,d=o.endIndex-1,p=o.startIndex;d>p;d--)l-=a.child(d).nodeSize,i.delete(l-1,l+1);var s=i.doc.resolve(o.start),c=s.nodeAfter,u=0==o.startIndex,f=o.endIndex==a.childCount,m=s.node(-1),g=s.index(-1);if(!m.canReplace(g+(u?0:1),g+1,c.content.append(f?t.Fragment.empty:t.Fragment.from(a))))return!1;var h=s.pos,v=h+c.nodeSize;return i.step(new e.ReplaceAroundStep(h-(u?1:0),v+(f?1:0),h+1,v-1,new t.Slice((u?t.Fragment.empty:t.Fragment.from(a.copy(t.Fragment.empty))).append(f?t.Fragment.empty:t.Fragment.from(a.copy(t.Fragment.empty))),u?0:1,f?0:1),u?0:1)),n(i.scrollIntoView()),!0}function h(r){return function(n,o){var i=n.selection,a=i.$from,l=i.$to,d=a.blockRange(l,function(e){return e.childCount&&e.firstChild.type==r});if(!d)return!1;var p=d.startIndex;if(0==p)return!1;var s=d.parent,c=s.child(p-1);if(c.type!=r)return!1;if(o){var u=c.lastChild&&c.lastChild.type==s.type,f=t.Fragment.from(u?r.create():null),m=new t.Slice(t.Fragment.from(r.create(null,t.Fragment.from(s.copy(f)))),u?3:1,0),g=d.start,h=d.end;o(n.tr.step(new e.ReplaceAroundStep(g-(u?3:1),h,g,h,m,1,!0)).scrollIntoView())}return!0}}exports.orderedList=i,exports.bulletList=a,exports.listItem=l,exports.addListNodes=p,exports.wrapInList=s,exports.splitListItem=u,exports.liftListItem=f,exports.sinkListItem=h;
},{"prosemirror-transform":"aJvy","prosemirror-model":"jjSS"}],"5E88":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildKeymap=s;var e=require("option-t/lib/Undefinable"),t=require("option-t/lib/Undefinable/tap"),n=require("option-t/lib/Undefinable/unwrapOr"),r=require("prosemirror-commands"),i=require("prosemirror-history"),o=require("prosemirror-inputrules"),a=require("prosemirror-schema-list");const l=!!(0,e.isUndefined)(navigator)&&/Mac/.test(navigator.platform);function s(s,d={}){const p={};function f(e,t){const r=d[e];if(!1===r)return;const i=(0,n.unwrapOrFromUndefinable)(r,e);p[i]=t}return f("Mod-z",i.undo),f("Shift-Mod-z",i.redo),f("Backspace",o.undoInputRule),l||f("Mod-y",i.redo),f("Alt-ArrowUp",r.joinUp),f("Alt-ArrowDown",r.joinDown),f("Mod-BracketLeft",r.lift),f("Escape",r.selectParentNode),(0,t.tapUndefinable)(s.marks.strong,e=>{f("Mod-b",(0,r.toggleMark)(e))}),(0,t.tapUndefinable)(s.marks.em,e=>{f("Mod-i",(0,r.toggleMark)(e))}),(0,t.tapUndefinable)(s.marks.code,e=>{f("Mod-`",(0,r.toggleMark)(e))}),(0,t.tapUndefinable)(s.nodes.bullet_list,e=>{f("Shift-Ctrl-8",(0,a.wrapInList)(e))}),(0,t.tapUndefinable)(s.nodes.ordered_list,e=>{f("Shift-Ctrl-9",(0,a.wrapInList)(e))}),(0,t.tapUndefinable)(s.nodes.blockquote,e=>{f("Ctrl->",(0,r.wrapIn)(e))}),(0,t.tapUndefinable)(s.nodes.hard_break,t=>{const n=t,i=(0,r.chainCommands)(r.exitCode,(t,r)=>((0,e.isNotUndefined)(r)&&r(t.tr.replaceSelectionWith(n.create()).scrollIntoView()),!0));f("Mod-Enter",i),f("Shift-Enter",i),l&&f("Ctrl-Enter",i)}),(0,t.tapUndefinable)(s.nodes.list_item,e=>{f("Enter",(0,a.splitListItem)(e)),f("Shift-Tab",(0,a.liftListItem)(e)),f("Tab",(0,a.sinkListItem)(e))}),(0,t.tapUndefinable)(s.nodes.todo,e=>{f("Enter",(0,a.splitListItem)(e)),f("Shift-Tab",(0,a.liftListItem)(e)),f("Tab",(0,a.sinkListItem)(e))}),(0,t.tapUndefinable)(s.nodes.paragraph,e=>{f("Shift-Ctrl-0",(0,r.setBlockType)(e))}),(0,t.tapUndefinable)(s.nodes.code_block,e=>{f("Shift-Ctrl-\\",(0,r.setBlockType)(e))}),(0,t.tapUndefinable)(s.nodes.heading,e=>{for(let t=1;t<=6;t++)f("Shift-Ctrl-"+t,(0,r.setBlockType)(e,{level:t}))}),(0,t.tapUndefinable)(s.nodes.horizontal_rule,t=>{const n=t;f("Mod-_",(t,r)=>((0,e.isNotUndefined)(r)&&r(t.tr.replaceSelectionWith(n.create()).scrollIntoView()),!0))}),p}
},{"option-t/lib/Undefinable":"TiSL","option-t/lib/Undefinable/tap":"aipE","option-t/lib/Undefinable/unwrapOr":"lwCh","prosemirror-commands":"B80I","prosemirror-history":"iGDy","prosemirror-inputrules":"+Ewx","prosemirror-schema-list":"ugME"}],"Jb3j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildPlugins=t;var r=require("prosemirror-commands"),e=require("prosemirror-dropcursor"),u=require("prosemirror-gapcursor"),o=require("prosemirror-history"),i=require("prosemirror-keymap"),s=require("../TodoPlugin"),p=require("./DefaultInputRule"),a=require("./DefaultKeymap");function t(t){return[(0,p.buildInputRules)(t),...(0,s.buildTodoPlugins)(t),(0,i.keymap)((0,a.buildKeymap)(t,{})),(0,i.keymap)(r.baseKeymap),(0,o.history)(),(0,e.dropCursor)(),(0,u.gapCursor)()]}
},{"prosemirror-commands":"B80I","prosemirror-dropcursor":"19n2","prosemirror-gapcursor":"Kav5","prosemirror-history":"iGDy","prosemirror-keymap":"JyXL","../TodoPlugin":"OTxq","./DefaultInputRule":"I927","./DefaultKeymap":"5E88"}],"Tyn4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("prosemirror-model"),e={doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},r={link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){return["a",t.attrs]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!=t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong"]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}},n=new t.Schema({nodes:e,marks:r});exports.nodes=e,exports.marks=r,exports.schema=n;
},{"prosemirror-model":"jjSS"}],"pnku":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSchema=c;var e=require("prosemirror-model"),r=require("prosemirror-schema-basic"),s=require("prosemirror-schema-list"),a=require("../../../utils/unwrapUnsafeValue"),o=require("../TodoPlugin");function c(){const c=(0,a.unwrapUnsafeValue)(r.schema.spec.nodes),u=(0,s.addListNodes)(c,"paragraph block*","block"),n=(0,a.unwrapUnsafeValue)(o.todoSchema.spec.nodes);return new e.Schema({marks:r.schema.spec.marks,nodes:u.append(n)})}
},{"prosemirror-model":"jjSS","prosemirror-schema-basic":"Tyn4","prosemirror-schema-list":"ugME","../../../utils/unwrapUnsafeValue":"wUp7","../TodoPlugin":"OTxq"}],"nW5w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"buildPlugins",{enumerable:!0,get:function(){return e.buildPlugins}}),Object.defineProperty(exports,"createSchema",{enumerable:!0,get:function(){return r.createSchema}});var e=require("./DefaultPlugin"),r=require("./DefaultSchema");
},{"./DefaultPlugin":"Jb3j","./DefaultSchema":"pnku"}],"hfxi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStateFromContent=n,exports.serializeEditorState=a;var e=require("option-t/lib/Nullable/mapOrElse"),r=require("prosemirror-state"),t=require("../../utils/unwrapUnsafeValue"),o=require("./DefaultPlugin");function u(e){return e.node("doc",{},[e.node("paragraph",{},[])])}function n(t,n){const a=(0,e.mapOrElseForNullable)(n,()=>u(t),t.nodeFromJSON);return r.EditorState.create({doc:a,plugins:(0,o.buildPlugins)(t)})}function a(e){return(0,t.unwrapUnsafeValue)(e.doc.toJSON())}
},{"option-t/lib/Nullable/mapOrElse":"Myb+","prosemirror-state":"QIdp","../../utils/unwrapUnsafeValue":"wUp7","./DefaultPlugin":"nW5w"}],"wgx3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.editorStyle=void 0;var e=require("../../styled-components");const t=e.css`
  .ProseMirror {
    padding: 4px 8px 4px 14px;
    line-height: 1.2;

    p {
      margin: 0;
    }

    input[type='checkbox']:checked + span {
      opacity: ${({theme:e})=>e.inactiveOpacity};
      text-decoration: line-through;
    }
  }

  .ProseMirror-focused {
    outline: none;
  }
`;exports.editorStyle=t;
},{"../../styled-components":"SO6s"}],"RLB6":[function(require,module,exports) {
"use strict";function e(e,t){return null!=e&&t(e),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.tapMaybe=e;
},{}],"ExGN":[function(require,module,exports) {
module.exports={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"",in:"",infin:"",infintie:"",inodot:"",intcal:"",int:"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""};
},{}],"1OBv":[function(require,module,exports) {
"use strict";module.exports=require("entities/maps/entities.json");
},{"entities/maps/entities.json":"ExGN"}],"0qNf":[function(require,module,exports) {
module.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E49\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/;
},{}],"rc+z":[function(require,module,exports) {
"use strict";var f={};function o(o){var a,e,n=f[o];if(n)return n;for(n=f[o]=[],a=0;a<128;a++)e=String.fromCharCode(a),/^[0-9a-z]$/i.test(e)?n.push(e):n.push("%"+("0"+a.toString(16).toUpperCase()).slice(-2));for(a=0;a<o.length;a++)n[o.charCodeAt(a)]=o[a];return n}function a(f,e,n){var r,h,p,t,C,m="";for("string"!=typeof e&&(n=e,e=a.defaultChars),void 0===n&&(n=!0),C=o(e),r=0,h=f.length;r<h;r++)if(p=f.charCodeAt(r),n&&37===p&&r+2<h&&/^[0-9a-f]{2}$/i.test(f.slice(r+1,r+3)))m+=f.slice(r,r+3),r+=2;else if(p<128)m+=C[p];else if(p>=55296&&p<=57343){if(p>=55296&&p<=56319&&r+1<h&&(t=f.charCodeAt(r+1))>=56320&&t<=57343){m+=encodeURIComponent(f[r]+f[r+1]),r++;continue}m+="%EF%BF%BD"}else m+=encodeURIComponent(f[r]);return m}a.defaultChars=";/?:@&=+$,-_.!~*'()#",a.componentChars="-_.!~*'()",module.exports=a;
},{}],"Lum3":[function(require,module,exports) {
"use strict";var r={};function e(e){var t,n,a=r[e];if(a)return a;for(a=r[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),a.push(n);for(t=0;t<e.length;t++)a[n=e.charCodeAt(t)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return a}function t(r,n){var a;return"string"!=typeof n&&(n=t.defaultChars),a=e(n),r.replace(/(%[a-f0-9]{2})+/gi,function(r){var e,t,n,s,o,i,c,f="";for(e=0,t=r.length;e<t;e+=3)(n=parseInt(r.slice(e+1,e+3),16))<128?f+=a[n]:192==(224&n)&&e+3<t&&128==(192&(s=parseInt(r.slice(e+4,e+6),16)))?(f+=(c=n<<6&1984|63&s)<128?"":String.fromCharCode(c),e+=3):224==(240&n)&&e+6<t&&(s=parseInt(r.slice(e+4,e+6),16),o=parseInt(r.slice(e+7,e+9),16),128==(192&s)&&128==(192&o))?(f+=(c=n<<12&61440|s<<6&4032|63&o)<2048||c>=55296&&c<=57343?"":String.fromCharCode(c),e+=6):240==(248&n)&&e+9<t&&(s=parseInt(r.slice(e+4,e+6),16),o=parseInt(r.slice(e+7,e+9),16),i=parseInt(r.slice(e+10,e+12),16),128==(192&s)&&128==(192&o)&&128==(192&i))?((c=n<<18&1835008|s<<12&258048|o<<6&4032|63&i)<65536||c>1114111?f+="":(c-=65536,f+=String.fromCharCode(55296+(c>>10),56320+(1023&c))),e+=9):f+="";return f})}t.defaultChars=";/?:@&=+$,#",t.componentChars="",module.exports=t;
},{}],"GCGW":[function(require,module,exports) {
"use strict";module.exports=function(t){var a="";return a+=t.protocol||"",a+=t.slashes?"//":"",a+=t.auth?t.auth+"@":"",t.hostname&&-1!==t.hostname.indexOf(":")?a+="["+t.hostname+"]":a+=t.hostname||"",a+=t.port?":"+t.port:"",a+=t.pathname||"",a+=t.search||"",a+=t.hash||""};
},{}],"xvhI":[function(require,module,exports) {
"use strict";function t(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var s=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,a=["<",">",'"',"`"," ","\r","\n","\t"],i=["{","}","|","\\","^","`"].concat(a),n=["'"].concat(i),r=["%","/","?",";","#"].concat(n),o=["/","?","#"],l=255,c=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,u={javascript:!0,"javascript:":!0},f={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function m(s,h){if(s&&s instanceof t)return s;var e=new t;return e.parse(s,h),e}t.prototype.parse=function(t,h){var a,i,n,m,v,g=t;if(g=g.trim(),!h&&1===t.split("#").length){var x=e.exec(g);if(x)return this.pathname=x[1],x[2]&&(this.search=x[2]),this}var b=s.exec(g);if(b&&(n=(b=b[0]).toLowerCase(),this.protocol=b,g=g.substr(b.length)),(h||b||g.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(v="//"===g.substr(0,2))||b&&u[b]||(g=g.substr(2),this.slashes=!0)),!u[b]&&(v||b&&!f[b])){var d,O,j=-1;for(a=0;a<o.length;a++)-1!==(m=g.indexOf(o[a]))&&(-1===j||m<j)&&(j=m);for(-1!==(O=-1===j?g.lastIndexOf("@"):g.lastIndexOf("@",j))&&(d=g.slice(0,O),g=g.slice(O+1),this.auth=d),j=-1,a=0;a<r.length;a++)-1!==(m=g.indexOf(r[a]))&&(-1===j||m<j)&&(j=m);-1===j&&(j=g.length),":"===g[j-1]&&j--;var $=g.slice(0,j);g=g.slice(j),this.parseHost($),this.hostname=this.hostname||"";var z="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!z){var A=this.hostname.split(/\./);for(a=0,i=A.length;a<i;a++){var w=A[a];if(w&&!w.match(c)){for(var y="",C=0,H=w.length;C<H;C++)w.charCodeAt(C)>127?y+="x":y+=w[C];if(!y.match(c)){var I=A.slice(0,a),Z=A.slice(a+1),_=w.match(p);_&&(I.push(_[1]),Z.unshift(_[2])),Z.length&&(g=Z.join(".")+g),this.hostname=I.join(".");break}}}}this.hostname.length>l&&(this.hostname=""),z&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var k=g.indexOf("#");-1!==k&&(this.hash=g.substr(k),g=g.slice(0,k));var L=g.indexOf("?");return-1!==L&&(this.search=g.substr(L),g=g.slice(0,L)),g&&(this.pathname=g),f[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this},t.prototype.parseHost=function(t){var s=h.exec(t);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)},module.exports=m;
},{}],"MGUm":[function(require,module,exports) {
"use strict";module.exports.encode=require("./encode"),module.exports.decode=require("./decode"),module.exports.format=require("./format"),module.exports.parse=require("./parse");
},{"./encode":"rc+z","./decode":"Lum3","./format":"GCGW","./parse":"xvhI"}],"u0D5":[function(require,module,exports) {
module.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;
},{}],"Koj5":[function(require,module,exports) {
module.exports=/[\0-\x1F\x7F-\x9F]/;
},{}],"MR1q":[function(require,module,exports) {
module.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804\uDCBD|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/;
},{}],"oncj":[function(require,module,exports) {
module.exports=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/;
},{}],"a8HB":[function(require,module,exports) {
"use strict";exports.Any=require("./properties/Any/regex"),exports.Cc=require("./categories/Cc/regex"),exports.Cf=require("./categories/Cf/regex"),exports.P=require("./categories/P/regex"),exports.Z=require("./categories/Z/regex");
},{"./properties/Any/regex":"u0D5","./categories/Cc/regex":"Koj5","./categories/Cf/regex":"MR1q","./categories/P/regex":"0qNf","./categories/Z/regex":"oncj"}],"HfbM":[function(require,module,exports) {
"use strict";function e(e){return Object.prototype.toString.call(e)}function r(r){return"[object String]"===e(r)}var t=Object.prototype.hasOwnProperty;function c(e,r){return t.call(e,r)}function s(e){return Array.prototype.slice.call(arguments,1).forEach(function(r){if(r){if("object"!=typeof r)throw new TypeError(r+"must be object");Object.keys(r).forEach(function(t){e[t]=r[t]})}}),e}function a(e,r,t){return[].concat(e.slice(0,r),t,e.slice(r+1))}function n(e){return!(e>=55296&&e<=57343)&&(!(e>=64976&&e<=65007)&&(65535!=(65535&e)&&65534!=(65535&e)&&(!(e>=0&&e<=8)&&(11!==e&&(!(e>=14&&e<=31)&&(!(e>=127&&e<=159)&&!(e>1114111)))))))}function o(e){if(e>65535){var r=55296+((e-=65536)>>10),t=56320+(1023&e);return String.fromCharCode(r,t)}return String.fromCharCode(e)}var i=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,u=/&([a-z#][a-z0-9]{1,31});/gi,p=new RegExp(i.source+"|"+u.source,"gi"),f=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,l=require("./entities");function x(e,r){var t=0;return c(l,r)?l[r]:35===r.charCodeAt(0)&&f.test(r)&&n(t="x"===r[1].toLowerCase()?parseInt(r.slice(2),16):parseInt(r.slice(1),10))?o(t):e}function g(e){return e.indexOf("\\")<0?e:e.replace(i,"$1")}function d(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(p,function(e,r,t){return r||x(e,t)})}var h=/[&<>"]/,m=/[&<>"]/g,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function y(e){return b[e]}function C(e){return h.test(e)?e.replace(m,y):e}var w=/[.?*+^$[\]\\(){}|-]/g;function v(e){return e.replace(w,"\\$&")}function O(e){switch(e){case 9:case 32:return!0}return!1}function S(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var j=require("uc.micro/categories/P/regex");function E(e){return j.test(e)}function q(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function A(e){return e.trim().replace(/\s+/g," ").toUpperCase()}exports.lib={},exports.lib.mdurl=require("mdurl"),exports.lib.ucmicro=require("uc.micro"),exports.assign=s,exports.isString=r,exports.has=c,exports.unescapeMd=g,exports.unescapeAll=d,exports.isValidEntityCode=n,exports.fromCodePoint=o,exports.escapeHtml=C,exports.arrayReplaceAt=a,exports.isSpace=O,exports.isWhiteSpace=S,exports.isMdAsciiPunct=q,exports.isPunctChar=E,exports.escapeRE=v,exports.normalizeReference=A;
},{"./entities":"1OBv","uc.micro/categories/P/regex":"0qNf","mdurl":"MGUm","uc.micro":"a8HB"}],"k5uo":[function(require,module,exports) {
"use strict";module.exports=function(o,s,p){var r,i,e,n,t=-1,f=o.posMax,u=o.pos;for(o.pos=s+1,r=1;o.pos<f;){if(93===(e=o.src.charCodeAt(o.pos))&&0===--r){i=!0;break}if(n=o.pos,o.md.inline.skipToken(o),91===e)if(n===o.pos-1)r++;else if(p)return o.pos=u,-1}return i&&(t=o.pos),o.pos=u,t};
},{}],"nsdL":[function(require,module,exports) {
"use strict";var r=require("../common/utils").isSpace,e=require("../common/utils").unescapeAll;module.exports=function(i,o,s){var t,u,c=o,n={ok:!1,pos:0,lines:0,str:""};if(60===i.charCodeAt(o)){for(o++;o<s;){if(10===(t=i.charCodeAt(o))||r(t))return n;if(62===t)return n.pos=o+1,n.str=e(i.slice(c+1,o)),n.ok=!0,n;92===t&&o+1<s?o+=2:o++}return n}for(u=0;o<s&&32!==(t=i.charCodeAt(o))&&!(t<32||127===t);)if(92===t&&o+1<s)o+=2;else{if(40===t&&u++,41===t){if(0===u)break;u--}o++}return c===o?n:0!==u?n:(n.str=e(i.slice(c,o)),n.lines=0,n.pos=o,n.ok=!0,n)};
},{"../common/utils":"HfbM"}],"GhR5":[function(require,module,exports) {
"use strict";var r=require("../common/utils").unescapeAll;module.exports=function(e,t,o){var s,i,n=0,u=t,c={ok:!1,pos:0,lines:0,str:""};if(t>=o)return c;if(34!==(i=e.charCodeAt(t))&&39!==i&&40!==i)return c;for(t++,40===i&&(i=41);t<o;){if((s=e.charCodeAt(t))===i)return c.pos=t+1,c.lines=n,c.str=r(e.slice(u+1,t)),c.ok=!0,c;10===s?n++:92===s&&t+1<o&&(t++,10===e.charCodeAt(t)&&n++),t++}return c};
},{"../common/utils":"HfbM"}],"nEY2":[function(require,module,exports) {
"use strict";exports.parseLinkLabel=require("./parse_link_label"),exports.parseLinkDestination=require("./parse_link_destination"),exports.parseLinkTitle=require("./parse_link_title");
},{"./parse_link_label":"k5uo","./parse_link_destination":"nsdL","./parse_link_title":"GhR5"}],"vxz6":[function(require,module,exports) {
"use strict";var e=require("./common/utils").assign,t=require("./common/utils").unescapeAll,n=require("./common/utils").escapeHtml,r={};function i(){this.rules=e({},r)}r.code_inline=function(e,t,r,i,o){var s=e[t];return"<code"+o.renderAttrs(s)+">"+n(e[t].content)+"</code>"},r.code_block=function(e,t,r,i,o){var s=e[t];return"<pre"+o.renderAttrs(s)+"><code>"+n(e[t].content)+"</code></pre>\n"},r.fence=function(e,r,i,o,s){var c,u,l,d,a=e[r],h=a.info?t(a.info).trim():"",p="";return h&&(p=h.split(/\s+/g)[0]),0===(c=i.highlight&&i.highlight(a.content,p)||n(a.content)).indexOf("<pre")?c+"\n":h?(u=a.attrIndex("class"),l=a.attrs?a.attrs.slice():[],u<0?l.push(["class",i.langPrefix+p]):l[u][1]+=" "+i.langPrefix+p,d={attrs:l},"<pre><code"+s.renderAttrs(d)+">"+c+"</code></pre>\n"):"<pre><code"+s.renderAttrs(a)+">"+c+"</code></pre>\n"},r.image=function(e,t,n,r,i){var o=e[t];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,n,r),i.renderToken(e,t,n)},r.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},r.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},r.text=function(e,t){return n(e[t].content)},r.html_block=function(e,t){return e[t].content},r.html_inline=function(e,t){return e[t].content},i.prototype.renderAttrs=function(e){var t,r,i;if(!e.attrs)return"";for(i="",t=0,r=e.attrs.length;t<r;t++)i+=" "+n(e.attrs[t][0])+'="'+n(e.attrs[t][1])+'"';return i},i.prototype.renderToken=function(e,t,n){var r,i="",o=!1,s=e[t];return s.hidden?"":(s.block&&-1!==s.nesting&&t&&e[t-1].hidden&&(i+="\n"),i+=(-1===s.nesting?"</":"<")+s.tag,i+=this.renderAttrs(s),0===s.nesting&&n.xhtmlOut&&(i+=" /"),s.block&&(o=!0,1===s.nesting&&t+1<e.length&&("inline"===(r=e[t+1]).type||r.hidden?o=!1:-1===r.nesting&&r.tag===s.tag&&(o=!1))),i+=o?">\n":">")},i.prototype.renderInline=function(e,t,n){for(var r,i="",o=this.rules,s=0,c=e.length;s<c;s++)void 0!==o[r=e[s].type]?i+=o[r](e,s,t,n,this):i+=this.renderToken(e,s,t);return i},i.prototype.renderInlineAsText=function(e,t,n){for(var r="",i=0,o=e.length;i<o;i++)"text"===e[i].type?r+=e[i].content:"image"===e[i].type&&(r+=this.renderInlineAsText(e[i].children,t,n));return r},i.prototype.render=function(e,t,n){var r,i,o,s="",c=this.rules;for(r=0,i=e.length;r<i;r++)"inline"===(o=e[r].type)?s+=this.renderInline(e[r].children,t,n):void 0!==c[o]?s+=c[e[r].type](e,r,t,n,this):s+=this.renderToken(e,r,t,n);return s},module.exports=i;
},{"./common/utils":"HfbM"}],"Je+y":[function(require,module,exports) {
"use strict";function _(){this.__rules__=[],this.__cache__=null}_.prototype.__find__=function(_){for(var r=0;r<this.__rules__.length;r++)if(this.__rules__[r].name===_)return r;return-1},_.prototype.__compile__=function(){var _=this,r=[""];_.__rules__.forEach(function(_){_.enabled&&_.alt.forEach(function(_){r.indexOf(_)<0&&r.push(_)})}),_.__cache__={},r.forEach(function(r){_.__cache__[r]=[],_.__rules__.forEach(function(e){e.enabled&&(r&&e.alt.indexOf(r)<0||_.__cache__[r].push(e.fn))})})},_.prototype.at=function(_,r,e){var t=this.__find__(_),n=e||{};if(-1===t)throw new Error("Parser rule not found: "+_);this.__rules__[t].fn=r,this.__rules__[t].alt=n.alt||[],this.__cache__=null},_.prototype.before=function(_,r,e,t){var n=this.__find__(_),i=t||{};if(-1===n)throw new Error("Parser rule not found: "+_);this.__rules__.splice(n,0,{name:r,enabled:!0,fn:e,alt:i.alt||[]}),this.__cache__=null},_.prototype.after=function(_,r,e,t){var n=this.__find__(_),i=t||{};if(-1===n)throw new Error("Parser rule not found: "+_);this.__rules__.splice(n+1,0,{name:r,enabled:!0,fn:e,alt:i.alt||[]}),this.__cache__=null},_.prototype.push=function(_,r,e){var t=e||{};this.__rules__.push({name:_,enabled:!0,fn:r,alt:t.alt||[]}),this.__cache__=null},_.prototype.enable=function(_,r){Array.isArray(_)||(_=[_]);var e=[];return _.forEach(function(_){var t=this.__find__(_);if(t<0){if(r)return;throw new Error("Rules manager: invalid rule name "+_)}this.__rules__[t].enabled=!0,e.push(_)},this),this.__cache__=null,e},_.prototype.enableOnly=function(_,r){Array.isArray(_)||(_=[_]),this.__rules__.forEach(function(_){_.enabled=!1}),this.enable(_,r)},_.prototype.disable=function(_,r){Array.isArray(_)||(_=[_]);var e=[];return _.forEach(function(_){var t=this.__find__(_);if(t<0){if(r)return;throw new Error("Rules manager: invalid rule name "+_)}this.__rules__[t].enabled=!1,e.push(_)},this),this.__cache__=null,e},_.prototype.getRules=function(_){return null===this.__cache__&&this.__compile__(),this.__cache__[_]||[]},module.exports=_;
},{}],"WaAs":[function(require,module,exports) {
"use strict";var r=/\r[\n\u0085]?|[\u2424\u2028\u0085]/g,u=/\u0000/g;module.exports=function(e){var c;c=(c=e.src.replace(r,"\n")).replace(u,""),e.src=c};
},{}],"+XGA":[function(require,module,exports) {
"use strict";module.exports=function(e){var n;e.inlineMode?((n=new e.Token("inline","",0)).content=e.src,n.map=[0,1],n.children=[],e.tokens.push(n)):e.md.block.parse(e.src,e.md,e.env,e.tokens)};
},{}],"UeWY":[function(require,module,exports) {
"use strict";module.exports=function(e){var n,t,i,o=e.tokens;for(t=0,i=o.length;t<i;t++)"inline"===(n=o[t]).type&&e.md.inline.parse(n.content,e.md,e.env,n.children)};
},{}],"rWba":[function(require,module,exports) {
"use strict";var i=require("../common/utils").arrayReplaceAt;function m(i){return/^<a[>\s]/i.test(i)}function f(i){return/^<\/a\s*>/i.test(i)}module.exports=function(p){var h,y,c,w,_,g,z,d,q,I,B,D,E,F,G,H,J,K=p.tokens;if(p.md.options.linkify)for(y=0,c=K.length;y<c;y++)if("inline"===K[y].type&&p.md.linkify.pretest(K[y].content))for(E=0,h=(w=K[y].children).length-1;h>=0;h--)if("link_close"!==(g=w[h]).type){if("html_inline"===g.type&&(m(g.content)&&E>0&&E--,f(g.content)&&E++),!(E>0)&&"text"===g.type&&p.md.linkify.test(g.content)){for(q=g.content,J=p.md.linkify.match(q),z=[],D=g.level,B=0,d=0;d<J.length;d++)F=J[d].url,G=p.md.normalizeLink(F),p.md.validateLink(G)&&(H=J[d].text,H=J[d].schema?"mailto:"!==J[d].schema||/^mailto:/i.test(H)?p.md.normalizeLinkText(H):p.md.normalizeLinkText("mailto:"+H).replace(/^mailto:/,""):p.md.normalizeLinkText("http://"+H).replace(/^http:\/\//,""),(I=J[d].index)>B&&((_=new p.Token("text","",0)).content=q.slice(B,I),_.level=D,z.push(_)),(_=new p.Token("link_open","a",1)).attrs=[["href",G]],_.level=D++,_.markup="linkify",_.info="auto",z.push(_),(_=new p.Token("text","",0)).content=H,_.level=D,z.push(_),(_=new p.Token("link_close","a",-1)).level=--D,_.markup="linkify",_.info="auto",z.push(_),B=J[d].lastIndex);B<q.length&&((_=new p.Token("text","",0)).content=q.slice(B),_.level=D,z.push(_)),K[y].children=w=i(w,h,z)}}else for(h--;w[h].level!==g.level&&"link_open"!==w[h].type;)h--};
},{"../common/utils":"HfbM"}],"Mi5d":[function(require,module,exports) {
"use strict";var e=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,t=/\((c|tm|r|p)\)/i,n=/\((c|tm|r|p)\)/gi,o={c:"",r:"",p:"",tm:""};function c(e,t){return o[t.toLowerCase()]}function r(e){var t,o,r=0;for(t=e.length-1;t>=0;t--)"text"!==(o=e[t]).type||r||(o.content=o.content.replace(n,c)),"link_open"===o.type&&"auto"===o.info&&r--,"link_close"===o.type&&"auto"===o.info&&r++}function p(t){var n,o,c=0;for(n=t.length-1;n>=0;n--)"text"!==(o=t[n]).type||c||e.test(o.content)&&(o.content=o.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1$2").replace(/(^|\s)--(\s|$)/gm,"$1$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1$2")),"link_open"===o.type&&"auto"===o.info&&c--,"link_close"===o.type&&"auto"===o.info&&c++}module.exports=function(n){var o;if(n.md.options.typographer)for(o=n.tokens.length-1;o>=0;o--)"inline"===n.tokens[o].type&&(t.test(n.tokens[o].content)&&r(n.tokens[o].children),e.test(n.tokens[o].content)&&p(n.tokens[o].children))};
},{}],"4Wwa":[function(require,module,exports) {
"use strict";var n=require("../common/utils").isWhiteSpace,r=require("../common/utils").isPunctChar,d=require("../common/utils").isMdAsciiPunct,f=/['"]/,h=/['"]/g,o="";function g(n,r,d){return n.substr(0,r)+d+n.substr(r+1)}function y(f,y){var b,q,u,i,x,v,C,I,M,W,l,w,z,B,D,F,G,J,K,N,V;for(K=[],b=0;b<f.length;b++){for(q=f[b],C=f[b].level,G=K.length-1;G>=0&&!(K[G].level<=C);G--);if(K.length=G+1,"text"===q.type){x=0,v=(u=q.content).length;n:for(;x<v&&(h.lastIndex=x,i=h.exec(u));){if(D=F=!0,x=i.index+1,J="'"===i[0],M=32,i.index-1>=0)M=u.charCodeAt(i.index-1);else for(G=b-1;G>=0&&("softbreak"!==f[G].type&&"hardbreak"!==f[G].type);G--)if("text"===f[G].type){M=f[G].content.charCodeAt(f[G].content.length-1);break}if(W=32,x<v)W=u.charCodeAt(x);else for(G=b+1;G<f.length&&("softbreak"!==f[G].type&&"hardbreak"!==f[G].type);G++)if("text"===f[G].type){W=f[G].content.charCodeAt(0);break}if(l=d(M)||r(String.fromCharCode(M)),w=d(W)||r(String.fromCharCode(W)),z=n(M),(B=n(W))?D=!1:w&&(z||l||(D=!1)),z?F=!1:l&&(B||w||(F=!1)),34===W&&'"'===i[0]&&M>=48&&M<=57&&(F=D=!1),D&&F&&(D=!1,F=w),D||F){if(F)for(G=K.length-1;G>=0&&(I=K[G],!(K[G].level<C));G--)if(I.single===J&&K[G].level===C){I=K[G],J?(N=y.md.options.quotes[2],V=y.md.options.quotes[3]):(N=y.md.options.quotes[0],V=y.md.options.quotes[1]),q.content=g(q.content,i.index,V),f[I.token].content=g(f[I.token].content,I.pos,N),x+=V.length-1,I.token===b&&(x+=N.length-1),v=(u=q.content).length,K.length=G;continue n}D?K.push({token:b,pos:i.index,single:J,level:C}):F&&J&&(q.content=g(q.content,i.index,o))}else J&&(q.content=g(q.content,i.index,o))}}}}module.exports=function(n){var r;if(n.md.options.typographer)for(r=n.tokens.length-1;r>=0;r--)"inline"===n.tokens[r].type&&f.test(n.tokens[r].content)&&y(n.tokens[r].children,n)};
},{"../common/utils":"HfbM"}],"wXcA":[function(require,module,exports) {
"use strict";function t(t,s,r){this.type=t,this.tag=s,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}t.prototype.attrIndex=function(t){var s,r,i;if(!this.attrs)return-1;for(r=0,i=(s=this.attrs).length;r<i;r++)if(s[r][0]===t)return r;return-1},t.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]},t.prototype.attrSet=function(t,s){var r=this.attrIndex(t),i=[t,s];r<0?this.attrPush(i):this.attrs[r]=i},t.prototype.attrGet=function(t){var s=this.attrIndex(t),r=null;return s>=0&&(r=this.attrs[s][1]),r},t.prototype.attrJoin=function(t,s){var r=this.attrIndex(t);r<0?this.attrPush([t,s]):this.attrs[r][1]=this.attrs[r][1]+" "+s},module.exports=t;
},{}],"BwQY":[function(require,module,exports) {
"use strict";var t=require("../token");function e(t,e,i){this.src=t,this.env=i,this.tokens=[],this.inlineMode=!1,this.md=e}e.prototype.Token=t,module.exports=e;
},{"../token":"wXcA"}],"JdwN":[function(require,module,exports) {
"use strict";var e=require("./ruler"),r=[["normalize",require("./rules_core/normalize")],["block",require("./rules_core/block")],["inline",require("./rules_core/inline")],["linkify",require("./rules_core/linkify")],["replacements",require("./rules_core/replacements")],["smartquotes",require("./rules_core/smartquotes")]];function u(){this.ruler=new e;for(var u=0;u<r.length;u++)this.ruler.push(r[u][0],r[u][1])}u.prototype.process=function(e){var r,u,l;for(r=0,u=(l=this.ruler.getRules("")).length;r<u;r++)l[r](e)},u.prototype.State=require("./rules_core/state_core"),module.exports=u;
},{"./ruler":"Je+y","./rules_core/normalize":"WaAs","./rules_core/block":"+XGA","./rules_core/inline":"UeWY","./rules_core/linkify":"rWba","./rules_core/replacements":"Mi5d","./rules_core/smartquotes":"4Wwa","./rules_core/state_core":"BwQY"}],"WPkk":[function(require,module,exports) {
"use strict";var t=require("../common/utils").isSpace;function e(t,e){var r=t.bMarks[e]+t.blkIndent,n=t.eMarks[e];return t.src.substr(r,n-r)}function r(t){var e,r=[],n=0,s=t.length,u=0,h=0,o=!1,i=0;for(e=t.charCodeAt(n);n<s;)96===e?o?(o=!1,i=n):u%2==0&&(o=!0,i=n):124!==e||u%2!=0||o||(r.push(t.substring(h,n)),h=n+1),92===e?u++:u=0,++n===s&&o&&(o=!1,n=i+1),e=t.charCodeAt(n);return r.push(t.substring(h)),r}module.exports=function(n,s,u,h){var o,i,l,p,a,c,d,f,b,g,m,_;if(s+2>u)return!1;if(a=s+1,n.sCount[a]<n.blkIndent)return!1;if(n.sCount[a]-n.blkIndent>=4)return!1;if((l=n.bMarks[a]+n.tShift[a])>=n.eMarks[a])return!1;if(124!==(o=n.src.charCodeAt(l++))&&45!==o&&58!==o)return!1;for(;l<n.eMarks[a];){if(124!==(o=n.src.charCodeAt(l))&&45!==o&&58!==o&&!t(o))return!1;l++}for(c=(i=e(n,s+1)).split("|"),b=[],p=0;p<c.length;p++){if(!(g=c[p].trim())){if(0===p||p===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(g))return!1;58===g.charCodeAt(g.length-1)?b.push(58===g.charCodeAt(0)?"center":"right"):58===g.charCodeAt(0)?b.push("left"):b.push("")}if(-1===(i=e(n,s).trim()).indexOf("|"))return!1;if(n.sCount[s]-n.blkIndent>=4)return!1;if((d=(c=r(i.replace(/^\||\|$/g,""))).length)>b.length)return!1;if(h)return!0;for((f=n.push("table_open","table",1)).map=m=[s,0],(f=n.push("thead_open","thead",1)).map=[s,s+1],(f=n.push("tr_open","tr",1)).map=[s,s+1],p=0;p<c.length;p++)(f=n.push("th_open","th",1)).map=[s,s+1],b[p]&&(f.attrs=[["style","text-align:"+b[p]]]),(f=n.push("inline","",0)).content=c[p].trim(),f.map=[s,s+1],f.children=[],f=n.push("th_close","th",-1);for(f=n.push("tr_close","tr",-1),f=n.push("thead_close","thead",-1),(f=n.push("tbody_open","tbody",1)).map=_=[s+2,0],a=s+2;a<u&&!(n.sCount[a]<n.blkIndent)&&-1!==(i=e(n,a).trim()).indexOf("|")&&!(n.sCount[a]-n.blkIndent>=4);a++){for(c=r(i.replace(/^\||\|$/g,"")),f=n.push("tr_open","tr",1),p=0;p<d;p++)f=n.push("td_open","td",1),b[p]&&(f.attrs=[["style","text-align:"+b[p]]]),(f=n.push("inline","",0)).content=c[p]?c[p].trim():"",f.children=[],f=n.push("td_close","td",-1);f=n.push("tr_close","tr",-1)}return f=n.push("tbody_close","tbody",-1),f=n.push("table_close","table",-1),m[1]=_[1]=a,n.line=a,!0};
},{"../common/utils":"HfbM"}],"kkQV":[function(require,module,exports) {
"use strict";module.exports=function(e,n,t){var o,r,s;if(e.sCount[n]-e.blkIndent<4)return!1;for(r=o=n+1;o<t;)if(e.isEmpty(o))o++;else{if(!(e.sCount[o]-e.blkIndent>=4))break;r=++o}return e.line=r,(s=e.push("code_block","code",0)).content=e.getLines(n,r,4+e.blkIndent,!0),s.map=[n,e.line],!0};
},{}],"BrIF":[function(require,module,exports) {
"use strict";module.exports=function(r,e,n,t){var s,i,u,f,o,a,c,k=!1,C=r.bMarks[e]+r.tShift[e],d=r.eMarks[e];if(r.sCount[e]-r.blkIndent>=4)return!1;if(C+3>d)return!1;if(126!==(s=r.src.charCodeAt(C))&&96!==s)return!1;if(o=C,(i=(C=r.skipChars(C,s))-o)<3)return!1;if(c=r.src.slice(o,C),(u=r.src.slice(C,d)).indexOf(String.fromCharCode(s))>=0)return!1;if(t)return!0;for(f=e;!(++f>=n)&&!((C=o=r.bMarks[f]+r.tShift[f])<(d=r.eMarks[f])&&r.sCount[f]<r.blkIndent);)if(r.src.charCodeAt(C)===s&&!(r.sCount[f]-r.blkIndent>=4||(C=r.skipChars(C,s))-o<i||(C=r.skipSpaces(C))<d)){k=!0;break}return i=r.sCount[e],r.line=f+(k?1:0),(a=r.push("fence","code",0)).info=u,a.content=r.getLines(e+1,f,i,!0),a.markup=c,a.map=[e,r.line],!0};
},{}],"r1YD":[function(require,module,exports) {
"use strict";var u=require("../common/utils").isSpace;module.exports=function(b,r,o,s){var k,h,c,C,p,f,M,A,q,I,g,v,_,l,y,z,d,j,w,D,F=b.lineMax,G=b.bMarks[r]+b.tShift[r],H=b.eMarks[r];if(b.sCount[r]-b.blkIndent>=4)return!1;if(62!==b.src.charCodeAt(G++))return!1;if(s)return!0;for(C=q=b.sCount[r]+G-(b.bMarks[r]+b.tShift[r]),32===b.src.charCodeAt(G)?(G++,C++,q++,k=!1,z=!0):9===b.src.charCodeAt(G)?(z=!0,(b.bsCount[r]+q)%4==3?(G++,C++,q++,k=!1):k=!0):z=!1,I=[b.bMarks[r]],b.bMarks[r]=G;G<H&&(h=b.src.charCodeAt(G),u(h));)9===h?q+=4-(q+b.bsCount[r]+(k?1:0))%4:q++,G++;for(g=[b.bsCount[r]],b.bsCount[r]=b.sCount[r]+1+(z?1:0),f=G>=H,l=[b.sCount[r]],b.sCount[r]=q-C,y=[b.tShift[r]],b.tShift[r]=G-b.bMarks[r],j=b.md.block.ruler.getRules("blockquote"),_=b.parentType,b.parentType="blockquote",D=!1,A=r+1;A<o&&(b.sCount[A]<b.blkIndent&&(D=!0),!((G=b.bMarks[A]+b.tShift[A])>=(H=b.eMarks[A])));A++)if(62!==b.src.charCodeAt(G++)||D){if(f)break;for(d=!1,c=0,p=j.length;c<p;c++)if(j[c](b,A,o,!0)){d=!0;break}if(d){b.lineMax=A,0!==b.blkIndent&&(I.push(b.bMarks[A]),g.push(b.bsCount[A]),y.push(b.tShift[A]),l.push(b.sCount[A]),b.sCount[A]-=b.blkIndent);break}I.push(b.bMarks[A]),g.push(b.bsCount[A]),y.push(b.tShift[A]),l.push(b.sCount[A]),b.sCount[A]=-1}else{for(C=q=b.sCount[A]+G-(b.bMarks[A]+b.tShift[A]),32===b.src.charCodeAt(G)?(G++,C++,q++,k=!1,z=!0):9===b.src.charCodeAt(G)?(z=!0,(b.bsCount[A]+q)%4==3?(G++,C++,q++,k=!1):k=!0):z=!1,I.push(b.bMarks[A]),b.bMarks[A]=G;G<H&&(h=b.src.charCodeAt(G),u(h));)9===h?q+=4-(q+b.bsCount[A]+(k?1:0))%4:q++,G++;f=G>=H,g.push(b.bsCount[A]),b.bsCount[A]=b.sCount[A]+1+(z?1:0),l.push(b.sCount[A]),b.sCount[A]=q-C,y.push(b.tShift[A]),b.tShift[A]=G-b.bMarks[A]}for(v=b.blkIndent,b.blkIndent=0,(w=b.push("blockquote_open","blockquote",1)).markup=">",w.map=M=[r,0],b.md.block.tokenize(b,r,A),(w=b.push("blockquote_close","blockquote",-1)).markup=">",b.lineMax=F,b.parentType=_,M[1]=b.line,c=0;c<y.length;c++)b.bMarks[c+r]=I[c],b.tShift[c+r]=y[c],b.sCount[c+r]=l[c],b.bsCount[c+r]=g[c];return b.blkIndent=v,!0};
},{"../common/utils":"HfbM"}],"vAj4":[function(require,module,exports) {
"use strict";var r=require("../common/utils").isSpace;module.exports=function(e,t,n,i){var o,u,a,s,c=e.bMarks[t]+e.tShift[t],f=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(42!==(o=e.src.charCodeAt(c++))&&45!==o&&95!==o)return!1;for(u=1;c<f;){if((a=e.src.charCodeAt(c++))!==o&&!r(a))return!1;a===o&&u++}return!(u<3)&&(!!i||(e.line=t+1,(s=e.push("hr","hr",0)).map=[t,e.line],s.markup=Array(u+1).join(String.fromCharCode(o)),!0))};
},{"../common/utils":"HfbM"}],"K73n":[function(require,module,exports) {
"use strict";var r=require("../common/utils").isSpace;function n(n,e){var i,t,o,l;return t=n.bMarks[e]+n.tShift[e],o=n.eMarks[e],42!==(i=n.src.charCodeAt(t++))&&45!==i&&43!==i?-1:t<o&&(l=n.src.charCodeAt(t),!r(l))?-1:t}function e(n,e){var i,t=n.bMarks[e]+n.tShift[e],o=t,l=n.eMarks[e];if(o+1>=l)return-1;if((i=n.src.charCodeAt(o++))<48||i>57)return-1;for(;;){if(o>=l)return-1;if(!((i=n.src.charCodeAt(o++))>=48&&i<=57)){if(41===i||46===i)break;return-1}if(o-t>=10)return-1}return o<l&&(i=n.src.charCodeAt(o),!r(i))?-1:o}function i(r,n){var e,i,t=r.level+2;for(e=n+2,i=r.tokens.length-2;e<i;e++)r.tokens[e].level===t&&"paragraph_open"===r.tokens[e].type&&(r.tokens[e+2].hidden=!0,r.tokens[e].hidden=!0,e+=2)}module.exports=function(r,t,o,l){var u,h,f,c,s,b,k,p,C,d,a,m,S,_,g,v,y,I,M,A,E,T,q,z,N,R,j,w,B=!1,D=!0;if(r.sCount[t]-r.blkIndent>=4)return!1;if(l&&"paragraph"===r.parentType&&r.tShift[t]>=r.blkIndent&&(B=!0),(q=e(r,t))>=0){if(k=!0,N=r.bMarks[t]+r.tShift[t],S=Number(r.src.substr(N,q-N-1)),B&&1!==S)return!1}else{if(!((q=n(r,t))>=0))return!1;k=!1}if(B&&r.skipSpaces(q)>=r.eMarks[t])return!1;if(m=r.src.charCodeAt(q-1),l)return!0;for(a=r.tokens.length,k?(w=r.push("ordered_list_open","ol",1),1!==S&&(w.attrs=[["start",S]])):w=r.push("bullet_list_open","ul",1),w.map=d=[t,0],w.markup=String.fromCharCode(m),g=t,z=!1,j=r.md.block.ruler.getRules("list"),M=r.parentType,r.parentType="list";g<o;){for(T=q,_=r.eMarks[g],b=v=r.sCount[g]+q-(r.bMarks[t]+r.tShift[t]);T<_;){if(9===(u=r.src.charCodeAt(T)))v+=4-(v+r.bsCount[g])%4;else{if(32!==u)break;v++}T++}if((s=(h=T)>=_?1:v-b)>4&&(s=1),c=b+s,(w=r.push("list_item_open","li",1)).markup=String.fromCharCode(m),w.map=p=[t,0],y=r.blkIndent,E=r.tight,A=r.tShift[t],I=r.sCount[t],r.blkIndent=c,r.tight=!0,r.tShift[t]=h-r.bMarks[t],r.sCount[t]=v,h>=_&&r.isEmpty(t+1)?r.line=Math.min(r.line+2,o):r.md.block.tokenize(r,t,o,!0),r.tight&&!z||(D=!1),z=r.line-t>1&&r.isEmpty(r.line-1),r.blkIndent=y,r.tShift[t]=A,r.sCount[t]=I,r.tight=E,(w=r.push("list_item_close","li",-1)).markup=String.fromCharCode(m),g=t=r.line,p[1]=g,h=r.bMarks[t],g>=o)break;if(r.sCount[g]<r.blkIndent)break;for(R=!1,f=0,C=j.length;f<C;f++)if(j[f](r,g,o,!0)){R=!0;break}if(R)break;if(k){if((q=e(r,g))<0)break}else if((q=n(r,g))<0)break;if(m!==r.src.charCodeAt(q-1))break}return(w=k?r.push("ordered_list_close","ol",-1):r.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(m),d[1]=g,r.line=g,r.parentType=M,D&&i(r,a),!0};
},{"../common/utils":"HfbM"}],"1UVq":[function(require,module,exports) {
"use strict";var e=require("../common/utils").normalizeReference,r=require("../common/utils").isSpace;module.exports=function(t,n,i,o){var f,a,s,c,d,l,u,h,k,C,p,m,A,b,v,L,g=0,y=t.bMarks[n]+t.tShift[n],T=t.eMarks[n],I=n+1;if(t.sCount[n]-t.blkIndent>=4)return!1;if(91!==t.src.charCodeAt(y))return!1;for(;++y<T;)if(93===t.src.charCodeAt(y)&&92!==t.src.charCodeAt(y-1)){if(y+1===T)return!1;if(58!==t.src.charCodeAt(y+1))return!1;break}for(c=t.lineMax,v=t.md.block.ruler.getRules("reference"),C=t.parentType,t.parentType="reference";I<c&&!t.isEmpty(I);I++)if(!(t.sCount[I]-t.blkIndent>3||t.sCount[I]<0)){for(b=!1,l=0,u=v.length;l<u;l++)if(v[l](t,I,c,!0)){b=!0;break}if(b)break}for(T=(A=t.getLines(n,I,t.blkIndent,!1).trim()).length,y=1;y<T;y++){if(91===(f=A.charCodeAt(y)))return!1;if(93===f){k=y;break}10===f?g++:92===f&&++y<T&&10===A.charCodeAt(y)&&g++}if(k<0||58!==A.charCodeAt(k+1))return!1;for(y=k+2;y<T;y++)if(10===(f=A.charCodeAt(y)))g++;else if(!r(f))break;if(!(p=t.md.helpers.parseLinkDestination(A,y,T)).ok)return!1;if(d=t.md.normalizeLink(p.str),!t.md.validateLink(d))return!1;for(a=y=p.pos,s=g+=p.lines,m=y;y<T;y++)if(10===(f=A.charCodeAt(y)))g++;else if(!r(f))break;for(p=t.md.helpers.parseLinkTitle(A,y,T),y<T&&m!==y&&p.ok?(L=p.str,y=p.pos,g+=p.lines):(L="",y=a,g=s);y<T&&(f=A.charCodeAt(y),r(f));)y++;if(y<T&&10!==A.charCodeAt(y)&&L)for(L="",y=a,g=s;y<T&&(f=A.charCodeAt(y),r(f));)y++;return!(y<T&&10!==A.charCodeAt(y))&&(!!(h=e(A.slice(1,k)))&&(!!o||(void 0===t.env.references&&(t.env.references={}),void 0===t.env.references[h]&&(t.env.references[h]={title:L,href:d}),t.parentType=C,t.line=n+g+1,!0)))};
},{"../common/utils":"HfbM"}],"v0Gj":[function(require,module,exports) {
"use strict";var r=require("../common/utils").isSpace;module.exports=function(e,i,s,c){var n,t,a,h,o=e.bMarks[i]+e.tShift[i],u=e.eMarks[i];if(e.sCount[i]-e.blkIndent>=4)return!1;if(35!==(n=e.src.charCodeAt(o))||o>=u)return!1;for(t=1,n=e.src.charCodeAt(++o);35===n&&o<u&&t<=6;)t++,n=e.src.charCodeAt(++o);return!(t>6||o<u&&!r(n))&&(!!c||(u=e.skipSpacesBack(u,o),(a=e.skipCharsBack(u,35,o))>o&&r(e.src.charCodeAt(a-1))&&(u=a),e.line=i+1,(h=e.push("heading_open","h"+String(t),1)).markup="########".slice(0,t),h.map=[i,e.line],(h=e.push("inline","",0)).content=e.src.slice(o,u).trim(),h.map=[i,e.line],h.children=[],(h=e.push("heading_close","h"+String(t),-1)).markup="########".slice(0,t),!0))};
},{"../common/utils":"HfbM"}],"qX33":[function(require,module,exports) {
"use strict";module.exports=function(e,r,n){var t,a,i,p,s,o,h,u,l,k,d=r+1,f=e.md.block.ruler.getRules("paragraph");if(e.sCount[r]-e.blkIndent>=4)return!1;for(k=e.parentType,e.parentType="paragraph";d<n&&!e.isEmpty(d);d++)if(!(e.sCount[d]-e.blkIndent>3)){if(e.sCount[d]>=e.blkIndent&&(o=e.bMarks[d]+e.tShift[d])<(h=e.eMarks[d])&&(45===(l=e.src.charCodeAt(o))||61===l)&&(o=e.skipChars(o,l),(o=e.skipSpaces(o))>=h)){u=61===l?1:2;break}if(!(e.sCount[d]<0)){for(a=!1,i=0,p=f.length;i<p;i++)if(f[i](e,d,n,!0)){a=!0;break}if(a)break}}return!!u&&(t=e.getLines(r,d,e.blkIndent,!1).trim(),e.line=d+1,(s=e.push("heading_open","h"+String(u),1)).markup=String.fromCharCode(l),s.map=[r,e.line],(s=e.push("inline","",0)).content=t,s.map=[r,e.line-1],s.children=[],(s=e.push("heading_close","h"+String(u),-1)).markup=String.fromCharCode(l),e.parentType=k,!0)};
},{}],"S3j6":[function(require,module,exports) {
"use strict";module.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"];
},{}],"1Kae":[function(require,module,exports) {
"use strict";var e="[a-zA-Z_:][a-zA-Z0-9:._-]*",s="[^\"'=<>`\\x00-\\x20]+",A="'[^']*'",x='"[^"]*"',_="(?:"+s+"|"+A+"|"+x+")",a="(?:\\s+"+e+"(?:\\s*=\\s*"+_+")?)",Z="<[A-Za-z][A-Za-z0-9\\-]*"+a+"*\\s*\\/?>",z="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",E="\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e",T="<[?].*?[?]>",o="<![A-Z]+\\s+[^>]*>",p="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",r=new RegExp("^(?:"+Z+"|"+z+"|"+E+"|"+T+"|"+o+"|"+p+")"),t=new RegExp("^(?:"+Z+"|"+z+")");module.exports.HTML_TAG_RE=r,module.exports.HTML_OPEN_CLOSE_TAG_RE=t;
},{}],"R6g6":[function(require,module,exports) {
"use strict";var e=require("../common/html_blocks"),t=require("../common/html_re").HTML_OPEN_CLOSE_TAG_RE,r=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+e.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(t.source+"\\s*$"),/^$/,!1]];module.exports=function(e,t,n,s){var i,o,l,c,u=e.bMarks[t]+e.tShift[t],f=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(u))return!1;for(c=e.src.slice(u,f),i=0;i<r.length&&!r[i][0].test(c);i++);if(i===r.length)return!1;if(s)return r[i][2];if(o=t+1,!r[i][1].test(c))for(;o<n&&!(e.sCount[o]<e.blkIndent);o++)if(u=e.bMarks[o]+e.tShift[o],f=e.eMarks[o],c=e.src.slice(u,f),r[i][1].test(c)){0!==c.length&&o++;break}return e.line=o,(l=e.push("html_block","",0)).map=[t,o],l.content=e.getLines(t,o,e.blkIndent,!0),!0};
},{"../common/html_blocks":"S3j6","../common/html_re":"1Kae"}],"Wtze":[function(require,module,exports) {
"use strict";module.exports=function(e,n){var p,r,a,t,i,l,s=n+1,o=e.md.block.ruler.getRules("paragraph"),u=e.lineMax;for(l=e.parentType,e.parentType="paragraph";s<u&&!e.isEmpty(s);s++)if(!(e.sCount[s]-e.blkIndent>3||e.sCount[s]<0)){for(r=!1,a=0,t=o.length;a<t;a++)if(o[a](e,s,u,!0)){r=!0;break}if(r)break}return p=e.getLines(n,s,e.blkIndent,!1).trim(),e.line=s,(i=e.push("paragraph_open","p",1)).map=[n,e.line],(i=e.push("inline","",0)).content=p,i.map=[n,e.line],i.children=[],i=e.push("paragraph_close","p",-1),e.parentType=l,!0};
},{}],"vFZw":[function(require,module,exports) {
"use strict";var t=require("../token"),s=require("../common/utils").isSpace;function r(t,r,i,h){var e,o,n,u,p,a,c,f;for(this.src=t,this.md=r,this.env=i,this.tokens=h,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.parentType="root",this.level=0,this.result="",f=!1,n=u=a=c=0,p=(o=this.src).length;u<p;u++){if(e=o.charCodeAt(u),!f){if(s(e)){a++,9===e?c+=4-c%4:c++;continue}f=!0}10!==e&&u!==p-1||(10!==e&&u++,this.bMarks.push(n),this.eMarks.push(u),this.tShift.push(a),this.sCount.push(c),this.bsCount.push(0),f=!1,a=0,c=0,n=u+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}r.prototype.push=function(s,r,i){var h=new t(s,r,i);return h.block=!0,i<0&&this.level--,h.level=this.level,i>0&&this.level++,this.tokens.push(h),h},r.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]},r.prototype.skipEmptyLines=function(t){for(var s=this.lineMax;t<s&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t},r.prototype.skipSpaces=function(t){for(var r,i=this.src.length;t<i&&(r=this.src.charCodeAt(t),s(r));t++);return t},r.prototype.skipSpacesBack=function(t,r){if(t<=r)return t;for(;t>r;)if(!s(this.src.charCodeAt(--t)))return t+1;return t},r.prototype.skipChars=function(t,s){for(var r=this.src.length;t<r&&this.src.charCodeAt(t)===s;t++);return t},r.prototype.skipCharsBack=function(t,s,r){if(t<=r)return t;for(;t>r;)if(s!==this.src.charCodeAt(--t))return t+1;return t},r.prototype.getLines=function(t,r,i,h){var e,o,n,u,p,a,c,f=t;if(t>=r)return"";for(a=new Array(r-t),e=0;f<r;f++,e++){for(o=0,c=u=this.bMarks[f],p=f+1<r||h?this.eMarks[f]+1:this.eMarks[f];u<p&&o<i;){if(n=this.src.charCodeAt(u),s(n))9===n?o+=4-(o+this.bsCount[f])%4:o++;else{if(!(u-c<this.tShift[f]))break;o++}u++}a[e]=o>i?new Array(o-i+1).join(" ")+this.src.slice(u,p):this.src.slice(u,p)}return a.join("")},r.prototype.Token=t,module.exports=r;
},{"../token":"wXcA","../common/utils":"HfbM"}],"n2RC":[function(require,module,exports) {
"use strict";var e=require("./ruler"),r=[["table",require("./rules_block/table"),["paragraph","reference"]],["code",require("./rules_block/code")],["fence",require("./rules_block/fence"),["paragraph","reference","blockquote","list"]],["blockquote",require("./rules_block/blockquote"),["paragraph","reference","blockquote","list"]],["hr",require("./rules_block/hr"),["paragraph","reference","blockquote","list"]],["list",require("./rules_block/list"),["paragraph","reference","blockquote"]],["reference",require("./rules_block/reference")],["heading",require("./rules_block/heading"),["paragraph","reference","blockquote"]],["lheading",require("./rules_block/lheading")],["html_block",require("./rules_block/html_block"),["paragraph","reference","blockquote"]],["paragraph",require("./rules_block/paragraph")]];function l(){this.ruler=new e;for(var l=0;l<r.length;l++)this.ruler.push(r[l][0],r[l][1],{alt:(r[l][2]||[]).slice()})}l.prototype.tokenize=function(e,r,l){for(var t,o=this.ruler.getRules(""),i=o.length,a=r,u=!1,c=e.md.options.maxNesting;a<l&&(e.line=a=e.skipEmptyLines(a),!(a>=l))&&!(e.sCount[a]<e.blkIndent);){if(e.level>=c){e.line=l;break}for(t=0;t<i&&!o[t](e,a,l,!1);t++);e.tight=!u,e.isEmpty(e.line-1)&&(u=!0),(a=e.line)<l&&e.isEmpty(a)&&(u=!0,a++,e.line=a)}},l.prototype.parse=function(e,r,l,t){var o;e&&(o=new this.State(e,r,l,t),this.tokenize(o,o.line,o.lineMax))},l.prototype.State=require("./rules_block/state_block"),module.exports=l;
},{"./ruler":"Je+y","./rules_block/table":"WPkk","./rules_block/code":"kkQV","./rules_block/fence":"BrIF","./rules_block/blockquote":"r1YD","./rules_block/hr":"vAj4","./rules_block/list":"K73n","./rules_block/reference":"1UVq","./rules_block/heading":"v0Gj","./rules_block/lheading":"qX33","./rules_block/html_block":"R6g6","./rules_block/paragraph":"Wtze","./rules_block/state_block":"vFZw"}],"DNHc":[function(require,module,exports) {
"use strict";function s(s){switch(s){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}module.exports=function(e,c){for(var a=e.pos;a<e.posMax&&!s(e.src.charCodeAt(a));)a++;return a!==e.pos&&(c||(e.pending+=e.src.slice(e.pos,a)),e.pos=a,!0)};
},{}],"UMMB":[function(require,module,exports) {
"use strict";var e=require("../common/utils").isSpace;module.exports=function(r,n){var p,s,o=r.pos;if(10!==r.src.charCodeAt(o))return!1;for(p=r.pending.length-1,s=r.posMax,n||(p>=0&&32===r.pending.charCodeAt(p)?p>=1&&32===r.pending.charCodeAt(p-1)?(r.pending=r.pending.replace(/ +$/,""),r.push("hardbreak","br",0)):(r.pending=r.pending.slice(0,-1),r.push("softbreak","br",0)):r.push("softbreak","br",0)),o++;o<s&&e(r.src.charCodeAt(o));)o++;return r.pos=o,!0};
},{"../common/utils":"HfbM"}],"7BuS":[function(require,module,exports) {
"use strict";for(var r=require("../common/utils").isSpace,o=[],e=0;e<256;e++)o.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(r){o[r.charCodeAt(0)]=1}),module.exports=function(e,s){var t,c=e.pos,i=e.posMax;if(92!==e.src.charCodeAt(c))return!1;if(++c<i){if((t=e.src.charCodeAt(c))<256&&0!==o[t])return s||(e.pending+=e.src[c]),e.pos+=2,!0;if(10===t){for(s||e.push("hardbreak","br",0),c++;c<i&&(t=e.src.charCodeAt(c),r(t));)c++;return e.pos=c,!0}}return s||(e.pending+="\\"),e.pos++,!0};
},{"../common/utils":"HfbM"}],"/xyq":[function(require,module,exports) {
"use strict";module.exports=function(r,e){var c,o,s,n,t,i,p=r.pos;if(96!==r.src.charCodeAt(p))return!1;for(c=p,p++,o=r.posMax;p<o&&96===r.src.charCodeAt(p);)p++;for(s=r.src.slice(c,p),n=t=p;-1!==(n=r.src.indexOf("`",t));){for(t=n+1;t<o&&96===r.src.charCodeAt(t);)t++;if(t-n===s.length)return e||((i=r.push("code_inline","code",0)).markup=s,i.content=r.src.slice(p,n).replace(/[ \n]+/g," ").trim()),r.pos=t,!0}return e||(r.pending+=s),r.pos+=s.length,!0};
},{}],"uRMO":[function(require,module,exports) {
"use strict";module.exports.tokenize=function(e,t){var n,o,s,r,k=e.pos,p=e.src.charCodeAt(k);if(t)return!1;if(126!==p)return!1;if(s=(o=e.scanDelims(e.pos,!0)).length,r=String.fromCharCode(p),s<2)return!1;for(s%2&&(e.push("text","",0).content=r,s--),n=0;n<s;n+=2)e.push("text","",0).content=r+r,e.delimiters.push({marker:p,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0},module.exports.postProcess=function(e){var t,n,o,s,r,k=[],p=e.delimiters,l=e.delimiters.length;for(t=0;t<l;t++)126===(o=p[t]).marker&&-1!==o.end&&(s=p[o.end],(r=e.tokens[o.token]).type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",(r=e.tokens[s.token]).type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="","text"===e.tokens[s.token-1].type&&"~"===e.tokens[s.token-1].content&&k.push(s.token-1));for(;k.length;){for(n=(t=k.pop())+1;n<e.tokens.length&&"s_close"===e.tokens[n].type;)n++;t!==--n&&(r=e.tokens[n],e.tokens[n]=e.tokens[t],e.tokens[t]=r)}};
},{}],"5/Hb":[function(require,module,exports) {
"use strict";module.exports.tokenize=function(e,n){var t,o,r=e.pos,s=e.src.charCodeAt(r);if(n)return!1;if(95!==s&&42!==s)return!1;for(o=e.scanDelims(e.pos,42===s),t=0;t<o.length;t++)e.push("text","",0).content=String.fromCharCode(s),e.delimiters.push({marker:s,length:o.length,jump:t,token:e.tokens.length-1,level:e.level,end:-1,open:o.can_open,close:o.can_close});return e.pos+=o.length,!0},module.exports.postProcess=function(e){var n,t,o,r,s,k,m=e.delimiters;for(n=e.delimiters.length-1;n>=0;n--)95!==(t=m[n]).marker&&42!==t.marker||-1!==t.end&&(o=m[t.end],k=n>0&&m[n-1].end===t.end+1&&m[n-1].token===t.token-1&&m[t.end+1].token===o.token+1&&m[n-1].marker===t.marker,s=String.fromCharCode(t.marker),(r=e.tokens[t.token]).type=k?"strong_open":"em_open",r.tag=k?"strong":"em",r.nesting=1,r.markup=k?s+s:s,r.content="",(r=e.tokens[o.token]).type=k?"strong_close":"em_close",r.tag=k?"strong":"em",r.nesting=-1,r.markup=k?s+s:s,r.content="",k&&(e.tokens[m[n-1].token].content="",e.tokens[m[t.end+1].token].content="",n--))};
},{}],"zPPy":[function(require,module,exports) {
"use strict";var r=require("../common/utils").normalizeReference,e=require("../common/utils").isSpace;module.exports=function(s,i){var n,o,t,a,c,l,p,f,h,u="",m=s.pos,d=s.posMax,k=s.pos,L=!0;if(91!==s.src.charCodeAt(s.pos))return!1;if(c=s.pos+1,(a=s.md.helpers.parseLinkLabel(s,s.pos,!0))<0)return!1;if((l=a+1)<d&&40===s.src.charCodeAt(l)){for(L=!1,l++;l<d&&(o=s.src.charCodeAt(l),e(o)||10===o);l++);if(l>=d)return!1;for(k=l,(p=s.md.helpers.parseLinkDestination(s.src,l,s.posMax)).ok&&(u=s.md.normalizeLink(p.str),s.md.validateLink(u)?l=p.pos:u=""),k=l;l<d&&(o=s.src.charCodeAt(l),e(o)||10===o);l++);if(p=s.md.helpers.parseLinkTitle(s.src,l,s.posMax),l<d&&k!==l&&p.ok)for(h=p.str,l=p.pos;l<d&&(o=s.src.charCodeAt(l),e(o)||10===o);l++);else h="";(l>=d||41!==s.src.charCodeAt(l))&&(L=!0),l++}if(L){if(void 0===s.env.references)return!1;if(l<d&&91===s.src.charCodeAt(l)?(k=l+1,(l=s.md.helpers.parseLinkLabel(s,l))>=0?t=s.src.slice(k,l++):l=a+1):l=a+1,t||(t=s.src.slice(c,a)),!(f=s.env.references[r(t)]))return s.pos=m,!1;u=f.href,h=f.title}return i||(s.pos=c,s.posMax=a,s.push("link_open","a",1).attrs=n=[["href",u]],h&&n.push(["title",h]),s.md.inline.tokenize(s),s.push("link_close","a",-1)),s.pos=l,s.posMax=d,!0};
},{"../common/utils":"HfbM"}],"uWIY":[function(require,module,exports) {
"use strict";var n=require("../common/utils").normalizeReference,r=require("../common/utils").isSpace;module.exports=function(i,u){var f,l,h,k,A,C,L,v,M,b,g,q,z,D="",R=i.pos,T=i.posMax;if(33!==i.src.charCodeAt(i.pos))return!1;if(91!==i.src.charCodeAt(i.pos+1))return!1;if(C=i.pos+2,(A=i.md.helpers.parseLinkLabel(i,i.pos+1,!1))<0)return!1;if((L=A+1)<T&&40===i.src.charCodeAt(L)){for(L++;L<T&&(l=i.src.charCodeAt(L),r(l)||10===l);L++);if(L>=T)return!1;for(z=L,(M=i.md.helpers.parseLinkDestination(i.src,L,i.posMax)).ok&&(D=i.md.normalizeLink(M.str),i.md.validateLink(D)?L=M.pos:D=""),z=L;L<T&&(l=i.src.charCodeAt(L),r(l)||10===l);L++);if(M=i.md.helpers.parseLinkTitle(i.src,L,i.posMax),L<T&&z!==L&&M.ok)for(b=M.str,L=M.pos;L<T&&(l=i.src.charCodeAt(L),r(l)||10===l);L++);else b="";if(L>=T||41!==i.src.charCodeAt(L))return i.pos=R,!1;L++}else{if(void 0===i.env.references)return!1;if(L<T&&91===i.src.charCodeAt(L)?(z=L+1,(L=i.md.helpers.parseLinkLabel(i,L))>=0?k=i.src.slice(z,L++):L=A+1):L=A+1,k||(k=i.src.slice(C,A)),!(v=i.env.references[n(k)]))return i.pos=R,!1;D=v.href,b=v.title}return u||(h=i.src.slice(C,A),i.md.inline.parse(h,i.md,i.env,q=[]),(g=i.push("image","img",0)).attrs=f=[["src",D],["alt",""]],g.children=q,g.content=h,b&&f.push(["title",b])),i.pos=L,i.posMax=T,!0};
},{"../common/utils":"HfbM"}],"S4l9":[function(require,module,exports) {
"use strict";var a=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,t=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;module.exports=function(n,e){var i,o,l,s,u,r,k=n.pos;return 60===n.src.charCodeAt(k)&&(!((i=n.src.slice(k)).indexOf(">")<0)&&(t.test(i)?(s=(o=i.match(t))[0].slice(1,-1),u=n.md.normalizeLink(s),!!n.md.validateLink(u)&&(e||((r=n.push("link_open","a",1)).attrs=[["href",u]],r.markup="autolink",r.info="auto",(r=n.push("text","",0)).content=n.md.normalizeLinkText(s),(r=n.push("link_close","a",-1)).markup="autolink",r.info="auto"),n.pos+=o[0].length,!0)):!!a.test(i)&&(s=(l=i.match(a))[0].slice(1,-1),u=n.md.normalizeLink("mailto:"+s),!!n.md.validateLink(u)&&(e||((r=n.push("link_open","a",1)).attrs=[["href",u]],r.markup="autolink",r.info="auto",(r=n.push("text","",0)).content=n.md.normalizeLinkText(s),(r=n.push("link_close","a",-1)).markup="autolink",r.info="auto"),n.pos+=l[0].length,!0))))};
},{}],"DmJ/":[function(require,module,exports) {
"use strict";var r=require("../common/html_re").HTML_TAG_RE;function t(r){var t=32|r;return t>=97&&t<=122}module.exports=function(e,c){var n,o,s,h=e.pos;return!!e.md.options.html&&(s=e.posMax,!(60!==e.src.charCodeAt(h)||h+2>=s)&&(!(33!==(n=e.src.charCodeAt(h+1))&&63!==n&&47!==n&&!t(n))&&(!!(o=e.src.slice(h).match(r))&&(c||(e.push("html_inline","",0).content=e.src.slice(h,h+o[0].length)),e.pos+=o[0].length,!0))))};
},{"../common/html_re":"1Kae"}],"G0F0":[function(require,module,exports) {
"use strict";var r=require("../common/entities"),i=require("../common/utils").has,e=require("../common/utils").isValidEntityCode,n=require("../common/utils").fromCodePoint,u=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,s=/^&([a-z][a-z0-9]{1,31});/i;module.exports=function(p,l){var g,f,q=p.pos,x=p.posMax;if(38!==p.src.charCodeAt(q))return!1;if(q+1<x)if(35===p.src.charCodeAt(q+1)){if(f=p.src.slice(q).match(u))return l||(g="x"===f[1][0].toLowerCase()?parseInt(f[1].slice(1),16):parseInt(f[1],10),p.pending+=e(g)?n(g):n(65533)),p.pos+=f[0].length,!0}else if((f=p.src.slice(q).match(s))&&i(r,f[1]))return l||(p.pending+=r[f[1]]),p.pos+=f[0].length,!0;return l||(p.pending+="&"),p.pos++,!0};
},{"../common/entities":"1OBv","../common/utils":"HfbM"}],"R2pM":[function(require,module,exports) {
"use strict";module.exports=function(e){var l,n,o,r,i=e.delimiters,t=e.delimiters.length;for(l=0;l<t;l++)if((o=i[l]).close)for(n=l-o.jump-1;n>=0;){if((r=i[n]).open&&r.marker===o.marker&&r.end<0&&r.level===o.level)if(!((r.close||o.open)&&void 0!==r.length&&void 0!==o.length&&(r.length+o.length)%3==0)){o.jump=l-n,o.open=!1,r.end=l,r.jump=0;break}n-=r.jump+1}};
},{}],"q1mE":[function(require,module,exports) {
"use strict";module.exports=function(t){var e,n,o=0,s=t.tokens,c=t.tokens.length;for(e=n=0;e<c;e++)o+=s[e].nesting,s[e].level=o,"text"===s[e].type&&e+1<c&&"text"===s[e+1].type?s[e+1].content=s[e].content+s[e+1].content:(e!==n&&(s[n]=s[e]),n++);e!==n&&(s.length=n)};
},{}],"TNoe":[function(require,module,exports) {
"use strict";var e=require("../token"),t=require("../common/utils").isWhiteSpace,i=require("../common/utils").isPunctChar,s=require("../common/utils").isMdAsciiPunct;function n(e,t,i,s){this.src=e,this.env=i,this.md=t,this.tokens=s,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[]}n.prototype.pushPending=function(){var t=new e("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t},n.prototype.push=function(t,i,s){this.pending&&this.pushPending();var n=new e(t,i,s);return s<0&&this.level--,n.level=this.level,s>0&&this.level++,this.pendingLevel=this.level,this.tokens.push(n),n},n.prototype.scanDelims=function(e,n){var h,r,o,c,l,p,u,d,a,v=e,g=!0,m=!0,C=this.posMax,f=this.src.charCodeAt(e);for(h=e>0?this.src.charCodeAt(e-1):32;v<C&&this.src.charCodeAt(v)===f;)v++;return o=v-e,r=v<C?this.src.charCodeAt(v):32,u=s(h)||i(String.fromCharCode(h)),a=s(r)||i(String.fromCharCode(r)),p=t(h),(d=t(r))?g=!1:a&&(p||u||(g=!1)),p?m=!1:u&&(d||a||(m=!1)),n?(c=g,l=m):(c=g&&(!m||u),l=m&&(!g||a)),{can_open:c,can_close:l,length:o}},n.prototype.Token=e,module.exports=n;
},{"../token":"wXcA","../common/utils":"HfbM"}],"G7T1":[function(require,module,exports) {
"use strict";var e=require("./ruler"),r=[["text",require("./rules_inline/text")],["newline",require("./rules_inline/newline")],["escape",require("./rules_inline/escape")],["backticks",require("./rules_inline/backticks")],["strikethrough",require("./rules_inline/strikethrough").tokenize],["emphasis",require("./rules_inline/emphasis").tokenize],["link",require("./rules_inline/link")],["image",require("./rules_inline/image")],["autolink",require("./rules_inline/autolink")],["html_inline",require("./rules_inline/html_inline")],["entity",require("./rules_inline/entity")]],i=[["balance_pairs",require("./rules_inline/balance_pairs")],["strikethrough",require("./rules_inline/strikethrough").postProcess],["emphasis",require("./rules_inline/emphasis").postProcess],["text_collapse",require("./rules_inline/text_collapse")]];function n(){var n;for(this.ruler=new e,n=0;n<r.length;n++)this.ruler.push(r[n][0],r[n][1]);for(this.ruler2=new e,n=0;n<i.length;n++)this.ruler2.push(i[n][0],i[n][1])}n.prototype.skipToken=function(e){var r,i,n=e.pos,l=this.ruler.getRules(""),u=l.length,p=e.md.options.maxNesting,s=e.cache;if(void 0===s[n]){if(e.level<p)for(i=0;i<u&&(e.level++,r=l[i](e,!0),e.level--,!r);i++);else e.pos=e.posMax;r||e.pos++,s[n]=e.pos}else e.pos=s[n]},n.prototype.tokenize=function(e){for(var r,i,n=this.ruler.getRules(""),l=n.length,u=e.posMax,p=e.md.options.maxNesting;e.pos<u;){if(e.level<p)for(i=0;i<l&&!(r=n[i](e,!1));i++);if(r){if(e.pos>=u)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},n.prototype.parse=function(e,r,i,n){var l,u,p,s=new this.State(e,r,i,n);for(this.tokenize(s),p=(u=this.ruler2.getRules("")).length,l=0;l<p;l++)u[l](s)},n.prototype.State=require("./rules_inline/state_inline"),module.exports=n;
},{"./ruler":"Je+y","./rules_inline/text":"DNHc","./rules_inline/newline":"UMMB","./rules_inline/escape":"7BuS","./rules_inline/backticks":"/xyq","./rules_inline/strikethrough":"uRMO","./rules_inline/emphasis":"5/Hb","./rules_inline/link":"zPPy","./rules_inline/image":"uWIY","./rules_inline/autolink":"S4l9","./rules_inline/html_inline":"DmJ/","./rules_inline/entity":"G0F0","./rules_inline/balance_pairs":"R2pM","./rules_inline/text_collapse":"q1mE","./rules_inline/state_inline":"TNoe"}],"HopJ":[function(require,module,exports) {
"use strict";module.exports=function(_){var r={};r.src_Any=require("uc.micro/properties/Any/regex").source,r.src_Cc=require("uc.micro/categories/Cc/regex").source,r.src_Z=require("uc.micro/categories/Z/regex").source,r.src_P=require("uc.micro/categories/P/regex").source,r.src_ZPCc=[r.src_Z,r.src_P,r.src_Cc].join("|"),r.src_ZCc=[r.src_Z,r.src_Cc].join("|");return r.src_pseudo_letter="(?:(?![><]|"+r.src_ZPCc+")"+r.src_Any+")",r.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",r.src_auth="(?:(?:(?!"+r.src_ZCc+"|[@/\\[\\]()]).)+@)?",r.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",r.src_host_terminator="(?=$|[><]|"+r.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+r.src_ZPCc+"))",r.src_path="(?:[/?#](?:(?!"+r.src_ZCc+"|[><]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+r.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+r.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+r.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+r.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+r.src_ZCc+"|[']).)+\\'|\\'(?="+r.src_pseudo_letter+"|[-]).|\\.{2,3}[a-zA-Z0-9%/]|\\.(?!"+r.src_ZCc+"|[.]).|"+(_&&_["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+r.src_ZCc+").|\\!(?!"+r.src_ZCc+"|[!]).|\\?(?!"+r.src_ZCc+"|[?]).)+|\\/)?",r.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+',r.src_xn="xn--[a-z0-9\\-]{1,59}",r.src_domain_root="(?:"+r.src_xn+"|"+r.src_pseudo_letter+"{1,63})",r.src_domain="(?:"+r.src_xn+"|(?:"+r.src_pseudo_letter+")|(?:"+r.src_pseudo_letter+"(?:-|"+r.src_pseudo_letter+"){0,61}"+r.src_pseudo_letter+"))",r.src_host="(?:(?:(?:(?:"+r.src_domain+")\\.)*"+r.src_domain+"))",r.tpl_host_fuzzy="(?:"+r.src_ip4+"|(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%)))",r.tpl_host_no_ip_fuzzy="(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%))",r.src_host_strict=r.src_host+r.src_host_terminator,r.tpl_host_fuzzy_strict=r.tpl_host_fuzzy+r.src_host_terminator,r.src_host_port_strict=r.src_host+r.src_port+r.src_host_terminator,r.tpl_host_port_fuzzy_strict=r.tpl_host_fuzzy+r.src_port+r.src_host_terminator,r.tpl_host_port_no_ip_fuzzy_strict=r.tpl_host_no_ip_fuzzy+r.src_port+r.src_host_terminator,r.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+r.src_ZPCc+"|>|$))",r.tpl_email_fuzzy="(^|[><]|\\(|"+r.src_ZCc+")("+r.src_email_name+"@"+r.tpl_host_fuzzy_strict+")",r.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+r.src_ZPCc+"))((?![$+<=>^`|])"+r.tpl_host_port_fuzzy_strict+r.src_path+")",r.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+r.src_ZPCc+"))((?![$+<=>^`|])"+r.tpl_host_port_no_ip_fuzzy_strict+r.src_path+")",r};
},{"uc.micro/properties/Any/regex":"u0D5","uc.micro/categories/Cc/regex":"Koj5","uc.micro/categories/Z/regex":"oncj","uc.micro/categories/P/regex":"0qNf"}],"cs3C":[function(require,module,exports) {
"use strict";function t(t){return Array.prototype.slice.call(arguments,1).forEach(function(_){_&&Object.keys(_).forEach(function(e){t[e]=_[e]})}),t}function _(t){return Object.prototype.toString.call(t)}function e(t){return"[object String]"===_(t)}function i(t){return"[object Object]"===_(t)}function s(t){return"[object RegExp]"===_(t)}function n(t){return"[object Function]"===_(t)}function r(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var o={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function h(t){return Object.keys(t||{}).reduce(function(t,_){return t||o.hasOwnProperty(_)},!1)}var a={"http:":{validate:function(t,_,e){var i=t.slice(_);return e.re.http||(e.re.http=new RegExp("^\\/\\/"+e.re.src_auth+e.re.src_host_port_strict+e.re.src_path,"i")),e.re.http.test(i)?i.match(e.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,_,e){var i=t.slice(_);return e.re.no_http||(e.re.no_http=new RegExp("^"+e.re.src_auth+"(?:localhost|(?:(?:"+e.re.src_domain+")\\.)+"+e.re.src_domain_root+")"+e.re.src_port+e.re.src_host_terminator+e.re.src_path,"i")),e.re.no_http.test(i)?_>=3&&":"===t[_-3]?0:_>=3&&"/"===t[_-3]?0:i.match(e.re.no_http)[0].length:0}},"mailto:":{validate:function(t,_,e){var i=t.slice(_);return e.re.mailto||(e.re.mailto=new RegExp("^"+e.re.src_email_name+"@"+e.re.src_host_strict,"i")),e.re.mailto.test(i)?i.match(e.re.mailto)[0].length:0}}},c="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function u(t){t.__index__=-1,t.__text_cache__=""}function p(t){return function(_,e){var i=_.slice(e);return t.test(i)?i.match(t)[0].length:0}}function m(){return function(t,_){_.normalize(t)}}function d(t){var _=t.re=require("./lib/re")(t.__opts__),o=t.__tlds__.slice();function h(t){return t.replace("%TLDS%",_.src_tlds)}t.onCompile(),t.__tlds_replaced__||o.push(c),o.push(_.src_xn),_.src_tlds=o.join("|"),_.email_fuzzy=RegExp(h(_.tpl_email_fuzzy),"i"),_.link_fuzzy=RegExp(h(_.tpl_link_fuzzy),"i"),_.link_no_ip_fuzzy=RegExp(h(_.tpl_link_no_ip_fuzzy),"i"),_.host_fuzzy_test=RegExp(h(_.tpl_host_fuzzy_test),"i");var a=[];function l(t,_){throw new Error('(LinkifyIt) Invalid schema "'+t+'": '+_)}t.__compiled__={},Object.keys(t.__schemas__).forEach(function(_){var r=t.__schemas__[_];if(null!==r){var o={validate:null,link:null};if(t.__compiled__[_]=o,i(r))return s(r.validate)?o.validate=p(r.validate):n(r.validate)?o.validate=r.validate:l(_,r),void(n(r.normalize)?o.normalize=r.normalize:r.normalize?l(_,r):o.normalize=m());e(r)?a.push(_):l(_,r)}}),a.forEach(function(_){t.__compiled__[t.__schemas__[_]]&&(t.__compiled__[_].validate=t.__compiled__[t.__schemas__[_]].validate,t.__compiled__[_].normalize=t.__compiled__[t.__schemas__[_]].normalize)}),t.__compiled__[""]={validate:null,normalize:m()};var d=Object.keys(t.__compiled__).filter(function(_){return _.length>0&&t.__compiled__[_]}).map(r).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+_.src_ZPCc+"))("+d+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+_.src_ZPCc+"))("+d+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),u(t)}function f(t,_){var e=t.__index__,i=t.__last_index__,s=t.__text_cache__.slice(e,i);this.schema=t.__schema__.toLowerCase(),this.index=e+_,this.lastIndex=i+_,this.raw=s,this.text=s,this.url=s}function x(t,_){var e=new f(t,_);return t.__compiled__[e.schema].normalize(e,t),e}function z(_,e){if(!(this instanceof z))return new z(_,e);e||h(_)&&(e=_,_={}),this.__opts__=t({},o,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=t({},a,_),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},d(this)}z.prototype.add=function(t,_){return this.__schemas__[t]=_,d(this),this},z.prototype.set=function(_){return this.__opts__=t(this.__opts__,_),this},z.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var _,e,i,s,n,r,o,h;if(this.re.schema_test.test(t))for((o=this.re.schema_search).lastIndex=0;null!==(_=o.exec(t));)if(s=this.testSchemaAt(t,_[2],o.lastIndex)){this.__schema__=_[2],this.__index__=_.index+_[1].length,this.__last_index__=_.index+_[0].length+s;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(h=t.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||h<this.__index__)&&null!==(e=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(n=e.index+e[1].length,(this.__index__<0||n<this.__index__)&&(this.__schema__="",this.__index__=n,this.__last_index__=e.index+e[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&t.indexOf("@")>=0&&null!==(i=t.match(this.re.email_fuzzy))&&(n=i.index+i[1].length,r=i.index+i[0].length,(this.__index__<0||n<this.__index__||n===this.__index__&&r>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=n,this.__last_index__=r)),this.__index__>=0},z.prototype.pretest=function(t){return this.re.pretest.test(t)},z.prototype.testSchemaAt=function(t,_,e){return this.__compiled__[_.toLowerCase()]?this.__compiled__[_.toLowerCase()].validate(t,e,this):0},z.prototype.match=function(t){var _=0,e=[];this.__index__>=0&&this.__text_cache__===t&&(e.push(x(this,_)),_=this.__last_index__);for(var i=_?t.slice(_):t;this.test(i);)e.push(x(this,_)),i=i.slice(this.__last_index__),_+=this.__last_index__;return e.length?e:null},z.prototype.tlds=function(t,_){return t=Array.isArray(t)?t:[t],_?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(t,_,e){return t!==e[_-1]}).reverse(),d(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,d(this),this)},z.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),"mailto:"!==t.schema||/^mailto:/i.test(t.url)||(t.url="mailto:"+t.url)},z.prototype.onCompile=function(){},module.exports=z;
},{"./lib/re":"HopJ"}],"FIMm":[function(require,module,exports) {
var global = arguments[3];
var define;
var t,n=arguments[3];!function(o){var r="object"==typeof exports&&exports&&!exports.nodeType&&exports,i="object"==typeof module&&module&&!module.nodeType&&module,e="object"==typeof n&&n;e.global!==e&&e.window!==e&&e.self!==e||(o=e);var f,a,s=2147483647,u=36,l=1,c=26,h=38,v=700,p=72,g=128,w="-",m=/^xn--/,x=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=u-l,d=Math.floor,A=String.fromCharCode;function I(t){throw new RangeError(b[t])}function F(t,n){for(var o=t.length,r=[];o--;)r[o]=n(t[o]);return r}function O(t,n){var o=t.split("@"),r="";return o.length>1&&(r=o[0]+"@",t=o[1]),r+F((t=t.replace(C,".")).split("."),n).join(".")}function S(t){for(var n,o,r=[],i=0,e=t.length;i<e;)(n=t.charCodeAt(i++))>=55296&&n<=56319&&i<e?56320==(64512&(o=t.charCodeAt(i++)))?r.push(((1023&n)<<10)+(1023&o)+65536):(r.push(n),i--):r.push(n);return r}function T(t){return F(t,function(t){var n="";return t>65535&&(n+=A((t-=65536)>>>10&1023|55296),t=56320|1023&t),n+=A(t)}).join("")}function L(t,n){return t+22+75*(t<26)-((0!=n)<<5)}function P(t,n,o){var r=0;for(t=o?d(t/v):t>>1,t+=d(t/n);t>j*c>>1;r+=u)t=d(t/j);return d(r+(j+1)*t/(t+h))}function R(t){var n,o,r,i,e,f,a,h,v,m,x,C=[],b=t.length,j=0,A=g,F=p;for((o=t.lastIndexOf(w))<0&&(o=0),r=0;r<o;++r)t.charCodeAt(r)>=128&&I("not-basic"),C.push(t.charCodeAt(r));for(i=o>0?o+1:0;i<b;){for(e=j,f=1,a=u;i>=b&&I("invalid-input"),((h=(x=t.charCodeAt(i++))-48<10?x-22:x-65<26?x-65:x-97<26?x-97:u)>=u||h>d((s-j)/f))&&I("overflow"),j+=h*f,!(h<(v=a<=F?l:a>=F+c?c:a-F));a+=u)f>d(s/(m=u-v))&&I("overflow"),f*=m;F=P(j-e,n=C.length+1,0==e),d(j/n)>s-A&&I("overflow"),A+=d(j/n),j%=n,C.splice(j++,0,A)}return T(C)}function U(t){var n,o,r,i,e,f,a,h,v,m,x,C,b,j,F,O=[];for(C=(t=S(t)).length,n=g,o=0,e=p,f=0;f<C;++f)(x=t[f])<128&&O.push(A(x));for(r=i=O.length,i&&O.push(w);r<C;){for(a=s,f=0;f<C;++f)(x=t[f])>=n&&x<a&&(a=x);for(a-n>d((s-o)/(b=r+1))&&I("overflow"),o+=(a-n)*b,n=a,f=0;f<C;++f)if((x=t[f])<n&&++o>s&&I("overflow"),x==n){for(h=o,v=u;!(h<(m=v<=e?l:v>=e+c?c:v-e));v+=u)F=h-m,j=u-m,O.push(A(L(m+F%j,0))),h=d(F/j);O.push(A(L(h,0))),e=P(o,b,r==i),o=0,++r}++o,++n}return O.join("")}if(f={version:"1.4.1",ucs2:{decode:S,encode:T},decode:R,encode:U,toASCII:function(t){return O(t,function(t){return x.test(t)?"xn--"+U(t):t})},toUnicode:function(t){return O(t,function(t){return m.test(t)?R(t.slice(4).toLowerCase()):t})}},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return f});else if(r&&i)if(module.exports==r)i.exports=f;else for(a in f)f.hasOwnProperty(a)&&(r[a]=f[a]);else o.punycode=f}(this);
},{}],"f7r/":[function(require,module,exports) {
"use strict";module.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}};
},{}],"voi7":[function(require,module,exports) {
"use strict";module.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}};
},{}],"4t+F":[function(require,module,exports) {
"use strict";module.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}};
},{}],"BOY+":[function(require,module,exports) {
"use strict";var e=require("./common/utils"),r=require("./helpers"),t=require("./renderer"),n=require("./parser_core"),o=require("./parser_block"),i=require("./parser_inline"),s=require("linkify-it"),a=require("mdurl"),c=require("punycode"),u={default:require("./presets/default"),zero:require("./presets/zero"),commonmark:require("./presets/commonmark")},l=/^(vbscript|javascript|file|data):/,p=/^data:image\/(gif|png|jpeg|webp);/;function h(e){var r=e.trim().toLowerCase();return!l.test(r)||!!p.test(r)}var f=["http:","https:","mailto:"];function d(e){var r=a.parse(e,!0);if(r.hostname&&(!r.protocol||f.indexOf(r.protocol)>=0))try{r.hostname=c.toASCII(r.hostname)}catch(t){}return a.encode(a.format(r))}function m(e){var r=a.parse(e,!0);if(r.hostname&&(!r.protocol||f.indexOf(r.protocol)>=0))try{r.hostname=c.toUnicode(r.hostname)}catch(t){}return a.decode(a.format(r))}function w(a,c){if(!(this instanceof w))return new w(a,c);c||e.isString(a)||(c=a||{},a="default"),this.inline=new i,this.block=new o,this.core=new n,this.renderer=new t,this.linkify=new s,this.validateLink=h,this.normalizeLink=d,this.normalizeLinkText=m,this.utils=e,this.helpers=e.assign({},r),this.options={},this.configure(a),c&&this.set(c)}w.prototype.set=function(r){return e.assign(this.options,r),this},w.prototype.configure=function(r){var t,n=this;if(e.isString(r)&&!(r=u[t=r]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!r)throw new Error("Wrong `markdown-it` preset, can't be empty");return r.options&&n.set(r.options),r.components&&Object.keys(r.components).forEach(function(e){r.components[e].rules&&n[e].ruler.enableOnly(r.components[e].rules),r.components[e].rules2&&n[e].ruler2.enableOnly(r.components[e].rules2)}),this},w.prototype.enable=function(e,r){var t=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(r){t=t.concat(this[r].ruler.enable(e,!0))},this),t=t.concat(this.inline.ruler2.enable(e,!0));var n=e.filter(function(e){return t.indexOf(e)<0});if(n.length&&!r)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this},w.prototype.disable=function(e,r){var t=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(r){t=t.concat(this[r].ruler.disable(e,!0))},this),t=t.concat(this.inline.ruler2.disable(e,!0));var n=e.filter(function(e){return t.indexOf(e)<0});if(n.length&&!r)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this},w.prototype.use=function(e){var r=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,r),this},w.prototype.parse=function(e,r){if("string"!=typeof e)throw new Error("Input data should be a String");var t=new this.core.State(e,this,r);return this.core.process(t),t.tokens},w.prototype.render=function(e,r){return r=r||{},this.renderer.render(this.parse(e,r),this.options,r)},w.prototype.parseInline=function(e,r){var t=new this.core.State(e,this,r);return t.inlineMode=!0,this.core.process(t),t.tokens},w.prototype.renderInline=function(e,r){return r=r||{},this.renderer.render(this.parseInline(e,r),this.options,r)},module.exports=w;
},{"./common/utils":"HfbM","./helpers":"nEY2","./renderer":"vxz6","./parser_core":"JdwN","./parser_block":"n2RC","./parser_inline":"G7T1","linkify-it":"cs3C","mdurl":"MGUm","punycode":"FIMm","./presets/default":"f7r/","./presets/zero":"voi7","./presets/commonmark":"4t+F"}],"gOsT":[function(require,module,exports) {
"use strict";module.exports=require("./lib/");
},{"./lib/":"BOY+"}],"R7C+":[function(require,module,exports) {
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-model"),r=t(require("markdown-it")),n=new e.Schema({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:!0,getAttrs:function(t){return{params:t.getAttribute("data-params")}}}],toDOM:function(t){return["pre",t.attrs.params?{"data-params":t.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1,tight:t.hasAttribute("data-tight")}}}],toDOM:function(t){return["ol",{start:1==t.attrs.order?null:t.attrs.order,"data-tight":t.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:function(t){return{tight:t.hasAttribute("data-tight")}}}],toDOM:function(t){return["ul",{"data-tight":t.attrs.tight?"true":null},0]}},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}},text:{group:"inline",toDOM:function(t){return t.text}},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(t){return"italic"==t&&null}}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}}});function o(t,r){if(t.isText&&r.isText&&e.Mark.sameSet(t.marks,r.marks))return t.copy(t.text+r.text)}var i=function(t,r){this.schema=t,this.stack=[{type:t.topNodeType,content:[]}],this.marks=e.Mark.none,this.tokenHandlers=r};function s(t,e){return t.getAttrs?t.getAttrs(e):t.attrs instanceof Function?t.attrs(e):t.attrs}function a(t){return"code_inline"==t||"code_block"==t||"fence"==t}function l(t){return"\n"==t[t.length-1]?t.slice(0,t.length-1):t}function c(){}function u(t,e){var r=Object.create(null),n=function(n){var o=e[n];if(o.block){var i=t.nodeType(o.block);a(n)?r[n]=function(t,e){t.openNode(i,s(o,e)),t.addText(l(e.content)),t.closeNode()}:(r[n+"_open"]=function(t,e){return t.openNode(i,s(o,e))},r[n+"_close"]=function(t){return t.closeNode()})}else if(o.node){var u=t.nodeType(o.node);r[n]=function(t,e){return t.addNode(u,s(o,e))}}else if(o.mark){var h=t.marks[o.mark];a(n)?r[n]=function(t,e){t.openMark(h.create(s(o,e))),t.addText(l(e.content)),t.closeMark(h)}:(r[n+"_open"]=function(t,e){return t.openMark(h.create(s(o,e)))},r[n+"_close"]=function(t){return t.closeMark(h)})}else{if(!o.ignore)throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o));a(n)?r[n]=c:(r[n+"_open"]=c,r[n+"_close"]=c)}};for(var o in e)n(o);return r.text=function(t,e){return t.addText(e.content)},r.inline=function(t,e){return t.parseTokens(e.children)},r.softbreak=r.softbreak||function(t){return t.addText("\n")},r}i.prototype.top=function(){return this.stack[this.stack.length-1]},i.prototype.push=function(t){this.stack.length&&this.top().content.push(t)},i.prototype.addText=function(t){if(t){var e,r=this.top().content,n=r[r.length-1],i=this.schema.text(t,this.marks);n&&(e=o(n,i))?r[r.length-1]=e:r.push(i)}},i.prototype.openMark=function(t){this.marks=t.addToSet(this.marks)},i.prototype.closeMark=function(t){this.marks=t.removeFromSet(this.marks)},i.prototype.parseTokens=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=this.tokenHandlers[r.type];if(!n)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");n(this,r)}},i.prototype.addNode=function(t,e,r){var n=t.createAndFill(e,r,this.marks);return n?(this.push(n),n):null},i.prototype.openNode=function(t,e){this.stack.push({type:t,attrs:e,content:[]})},i.prototype.closeNode=function(){this.marks.length&&(this.marks=e.Mark.none);var t=this.stack.pop();return this.addNode(t.type,t.attrs,t.content)};var h=function(t,e,r){this.tokens=r,this.schema=t,this.tokenizer=e,this.tokenHandlers=u(t,r)};h.prototype.parse=function(t){var e,r=new i(this.schema,this.tokenHandlers);r.parseTokens(this.tokenizer.parse(t,{}));do{e=r.closeNode()}while(r.stack.length);return e};var f=new h(n,r("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",getAttrs:function(t){return{order:+t.attrGet("order")||1}}},heading:{block:"heading",getAttrs:function(t){return{level:+t.tag.slice(1)}}},code_block:{block:"code_block"},fence:{block:"code_block",getAttrs:function(t){return{params:t.info||""}}},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:function(t){return{src:t.attrGet("src"),title:t.attrGet("title")||null,alt:t.children[0]&&t.children[0].content||null}}},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:function(t){return{href:t.attrGet("href"),title:t.attrGet("title")||null}}},code_inline:{mark:"code"}}),d=function(t,e){this.nodes=t,this.marks=e};d.prototype.serialize=function(t,e){var r=new p(this.nodes,this.marks,e);return r.renderContent(t),r.out};var g=new d({blockquote:function(t,e){t.wrapBlock("> ",null,e,function(){return t.renderContent(e)})},code_block:function(t,e){t.write("```"+(e.attrs.params||"")+"\n"),t.text(e.textContent,!1),t.ensureNewLine(),t.write("```"),t.closeBlock(e)},heading:function(t,e){t.write(t.repeat("#",e.attrs.level)+" "),t.renderInline(e),t.closeBlock(e)},horizontal_rule:function(t,e){t.write(e.attrs.markup||"---"),t.closeBlock(e)},bullet_list:function(t,e){t.renderList(e,"  ",function(){return(e.attrs.bullet||"*")+" "})},ordered_list:function(t,e){var r=e.attrs.order||1,n=String(r+e.childCount-1).length,o=t.repeat(" ",n+2);t.renderList(e,o,function(e){var o=String(r+e);return t.repeat(" ",n-o.length)+o+". "})},list_item:function(t,e){t.renderContent(e)},paragraph:function(t,e){t.renderInline(e),t.closeBlock(e)},image:function(t,e){t.write("!["+t.esc(e.attrs.alt||"")+"]("+t.esc(e.attrs.src)+(e.attrs.title?" "+t.quote(e.attrs.title):"")+")")},hard_break:function(t,e,r,n){for(var o=n+1;o<r.childCount;o++)if(r.child(o).type!=e.type)return void t.write("\\\n")},text:function(t,e){t.text(e.text)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open:"[",close:function(t,e){return"]("+t.esc(e.attrs.href)+(e.attrs.title?" "+t.quote(e.attrs.title):"")+")"}},code:{open:"`",close:"`",escape:!1}}),p=function(t,e,r){this.nodes=t,this.marks=e,this.delim=this.out="",this.closed=!1,this.inTightList=!1,this.options=r||{},void 0===this.options.tightLists&&(this.options.tightLists=!1)};p.prototype.flushClose=function(t){if(this.closed){if(this.atBlank()||(this.out+="\n"),null==t&&(t=2),t>1){var e=this.delim,r=/\s+$/.exec(e);r&&(e=e.slice(0,e.length-r[0].length));for(var n=1;n<t;n++)this.out+=e+"\n"}this.closed=!1}},p.prototype.wrapBlock=function(t,e,r,n){var o=this.delim;this.write(e||t),this.delim+=t,n(),this.delim=o,this.closeBlock(r)},p.prototype.atBlank=function(){return/(^|\n)$/.test(this.out)},p.prototype.ensureNewLine=function(){this.atBlank()||(this.out+="\n")},p.prototype.write=function(t){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),t&&(this.out+=t)},p.prototype.closeBlock=function(t){this.closed=t},p.prototype.text=function(t,e){for(var r=t.split("\n"),n=0;n<r.length;n++){var o=this.atBlank()||this.closed;this.write(),this.out+=!1!==e?this.esc(r[n],o):r[n],n!=r.length-1&&(this.out+="\n")}},p.prototype.render=function(t,e,r){if("number"==typeof e)throw new Error("!");this.nodes[t.type.name](this,t,e,r)},p.prototype.renderContent=function(t){var e=this;t.forEach(function(r,n,o){return e.render(r,t,o)})},p.prototype.renderInline=function(t){var e=this,r=[],n="",o=function(o,i,s){var a=o?o.marks:[];o&&"hard_break"===o.type.name&&(a=a.filter(function(e){if(s+1==t.childCount)return!1;var r=t.child(s+1);return e.isInSet(r.marks)&&(!r.isText||/\S/.test(r.text))}));var l=n;if(n="",o&&o.isText&&a.some(function(t){var r=e.marks[t.type.name];return r&&r.expelEnclosingWhitespace})){var c=/^(\s*)(.*?)(\s*)$/m.exec(o.text),u=c[1],h=c[2],f=c[3];l+=u,n=f,(u||f)&&((o=h?o.withText(h):null)||(a=r))}var d=a.length&&a[a.length-1],g=d&&!1===e.marks[d.type.name].escape,p=a.length-(g?1:0);t:for(var k=0;k<p;k++){var m=a[k];if(!e.marks[m.type.name].mixable)break;for(var b=0;b<r.length;b++){var v=r[b];if(!e.marks[v.type.name].mixable)break;if(m.eq(v)){k>b?a=a.slice(0,b).concat(m).concat(a.slice(b,k)).concat(a.slice(k+1,p)):b>k&&(a=a.slice(0,k).concat(a.slice(k+1,b)).concat(m).concat(a.slice(b,p)));continue t}}}for(var x=0;x<Math.min(r.length,p)&&a[x].eq(r[x]);)++x;for(;x<r.length;)e.text(e.markString(r.pop(),!1),!1);if(l&&e.text(l),o){for(;r.length<p;){var M=a[r.length];r.push(M),e.text(e.markString(M,!0),!1)}g&&o.isText?e.text(e.markString(d,!0)+o.text+e.markString(d,!1),!1):e.render(o,t,s)}};t.forEach(o),o(null)},p.prototype.renderList=function(t,e,r){var n=this;this.closed&&this.closed.type==t.type?this.flushClose(3):this.inTightList&&this.flushClose(1);var o=void 0!==t.attrs.tight?t.attrs.tight:this.options.tightLists,i=this.inTightList;this.inTightList=o,t.forEach(function(i,s,a){a&&o&&n.flushClose(1),n.wrapBlock(e,r(a),t,function(){return n.render(i,t,a)})}),this.inTightList=i},p.prototype.esc=function(t,e){return t=t.replace(/[`*\\~\[\]]/g,"\\$&"),e&&(t=t.replace(/^[:#\-*+]/,"\\$&").replace(/^(\d+)\./,"$1\\.")),t},p.prototype.quote=function(t){var e=-1==t.indexOf('"')?'""':-1==t.indexOf("'")?"''":"()";return e[0]+t+e[1]},p.prototype.repeat=function(t,e){for(var r="",n=0;n<e;n++)r+=t;return r},p.prototype.markString=function(t,e){var r=this.marks[t.type.name],n=e?r.open:r.close;return"string"==typeof n?n:n(this,t)},p.prototype.getEnclosingWhitespace=function(t){return{leading:(t.match(/^(\s+)/)||[])[0],trailing:(t.match(/(\s+)$/)||[])[0]}},exports.schema=n,exports.defaultMarkdownParser=f,exports.MarkdownParser=h,exports.MarkdownSerializer=d,exports.defaultMarkdownSerializer=g,exports.MarkdownSerializerState=p;
},{"prosemirror-model":"jjSS","markdown-it":"gOsT"}],"9yPx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.customMarkdownSerializer=void 0;var e=require("option-t/lib/Maybe/tap"),t=require("prosemirror-markdown");const r=new t.MarkdownSerializer({blockquote(e,t){e.wrapBlock("> ",void 0,t,()=>e.renderContent(t))},code_block(e,t){e.write("```"+(t.attrs.params||"")+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},heading(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t),e.closeBlock(t)},horizontal_rule(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},bullet_list(e,t){e.renderList(t,"  ",()=>(t.attrs.bullet||"*")+" ")},ordered_list(e,t){const r=t.attrs.order||1,o=String(r+t.childCount-1).length,n=e.repeat(" ",o+2);e.renderList(t,n,t=>{const n=String(r+t);return e.repeat(" ",o-n.length)+n+". "})},list_item(e,t){e.renderContent(t)},todo(e,t){const r=t.attrs.checked?"x":" ";e.write(`- [${r}] `),e.renderContent(t)},paragraph(e,t){e.renderInline(t),e.closeBlock(t)},image(e,t){e.write("!["+e.esc(t.attrs.alt||"")+"]("+e.esc(t.attrs.src)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")")},hard_break(e,t,r,o){for(let n=o+1;n<r.childCount;n++)if(r.child(n).type!==t.type)return void e.write("\\\n")},text(t,r){(0,e.tapMaybe)(r.text,e=>t.text(e))}},{code:{open:"`",close:"`",escape:!1},em:{close:"*",expelEnclosingWhitespace:!0,mixable:!0,open:"*"},link:{open:"[",close:(e,t)=>"]("+e.esc(t.attrs.href)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")"},strong:{close:"**",expelEnclosingWhitespace:!0,mixable:!0,open:"**"}});exports.customMarkdownSerializer=r;
},{"option-t/lib/Maybe/tap":"RLB6","prosemirror-markdown":"R7C+"}],"uf/O":[function(require,module,exports) {
"use strict";function e(e){return t=>{const{$from:r}=t;for(let o=r.depth;o>0;o-=1){const t=r.node(o);if(e(t))return{depth:o,node:t,pos:o>0?r.before(o):0,start:r.start(o)}}return null}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.findParentNode=e;
},{}],"exyH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toggleCheckbox=void 0;var e=require("option-t/lib/Nullable"),t=require("option-t/lib/Undefinable"),o=require("../utils/findParentNode");const r=(0,o.findParentNode)(e=>"todo"===e.type.name),i=(o,i)=>{if(!(0,t.isNotUndefined)(i))return!1;const n=r(o.selection);if((0,e.isNull)(n))return!1;const{node:d,pos:s}=n,l={checked:!d.attrs.checked};return i(o.tr.setNodeMarkup(s,void 0,l)),!0};exports.toggleCheckbox=i;
},{"option-t/lib/Nullable":"Co55","option-t/lib/Undefinable":"TiSL","../utils/findParentNode":"uf/O"}],"EqEq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setBlockTypeMenu=n,exports.createMenuItems=s;var e=require("prosemirror-commands"),t=require("prosemirror-schema-list"),o=require("./TodoPlugin/TodoCommand"),l=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&(o[l[r]]=e[l[r]])}return o};function r(){return!0}function n(t,o){var{longTitle:r,shortTitle:n}=o,i=l(o,["longTitle","shortTitle"]);const s=(0,e.setBlockType)(t,i);return{active(e){const{$from:o,to:l}=e.selection;return l<=o.end()&&o.parent.hasMarkup(t)},enable:e=>s(e),longTitle:r,run:s,shortTitle:n}}function i({longTitle:e,run:t,shortTitle:o,active:l=r,enable:n=r}){return{active:l,enable:n,longTitle:e,run:t,shortTitle:o}}function s(l){return[n(l.nodes.text,{level:1,longTitle:"plain",shortTitle:"Plain"}),{longTitle:"paragraph",run:(0,e.setBlockType)(l.marks.strong),shortTitle:"Para"},{longTitle:"blockquote",run:(0,e.wrapIn)(l.nodes.blockquote),shortTitle:">"},{longTitle:"bullet list",run:(0,t.wrapInList)(l.nodes.bullet_list),shortTitle:"-"},{longTitle:"bullet list",run:(0,t.wrapInList)(l.nodes.ordered_list),shortTitle:"1."},{longTitle:"todo list",run:(0,e.wrapIn)(l.nodes.todo),shortTitle:""},{longTitle:"toggle checkbox",run:o.toggleCheckbox,shortTitle:""},{longTitle:"heading",run:(0,e.setBlockType)(l.nodes.heading,{level:1}),shortTitle:"H1"},{longTitle:"heading",run:(0,e.setBlockType)(l.nodes.heading,{level:2}),shortTitle:"H2"},{longTitle:"heading",run:(0,e.setBlockType)(l.nodes.heading,{level:3}),shortTitle:"H3"},{longTitle:"select parent",run:e.selectParentNode,shortTitle:""},{longTitle:"strong",run:(0,e.toggleMark)(l.marks.strong),shortTitle:"Bold"},{longTitle:"em",run:(0,e.toggleMark)(l.marks.strong),shortTitle:"italic"}].map(i)}
},{"prosemirror-commands":"B80I","prosemirror-schema-list":"ugME","./TodoPlugin/TodoCommand":"exyH"}],"/DvV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEditorView=r;var e=require("prosemirror-view"),t=require("../../utils/noop");function r({editorState:r,onChange:o=t.noop}){const i=new e.EditorView(void 0,{dispatchTransaction(e){const t=i.state,r=t.apply(e);o(r,t,e.docChanged)},state:r});return i}
},{"prosemirror-view":"zSD1","../../utils/noop":"Q6NR"}],"3UjY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useEditor=void 0;var e=require("option-t/lib/Nullable"),t=require("react"),r=require("../../utils/noop"),o=require("./EditorView");const u=({editorState:u,editorRef:i,onChange:n,onFocus:s=r.noop,onBlur:d=r.noop})=>{const[a]=(0,t.useState)(()=>(0,o.createEditorView)({editorState:u,onChange:n}));return(0,t.useLayoutEffect)(()=>{a.updateState(u)},[a,u]),(0,t.useEffect)(()=>{if(!(0,e.isNull)(i.current))return i.current.appendChild(a.dom),a.update(Object.assign({},a.props)),a.dom.addEventListener("focus",s),a.dom.addEventListener("blur",d),()=>{a.dom.removeEventListener("focus",s),a.dom.removeEventListener("blur",d),a.destroy()}},[]),a};exports.useEditor=u;
},{"option-t/lib/Nullable":"Co55","react":"1n8/","../../utils/noop":"Q6NR","./EditorView":"/DvV"}],"yEZa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"EditorMenu",{enumerable:!0,get:function(){return e.EditorMenu}}),Object.defineProperty(exports,"createSchema",{enumerable:!0,get:function(){return r.createSchema}}),Object.defineProperty(exports,"createStateFromContent",{enumerable:!0,get:function(){return t.createStateFromContent}}),Object.defineProperty(exports,"serializeEditorState",{enumerable:!0,get:function(){return t.serializeEditorState}}),Object.defineProperty(exports,"editorStyle",{enumerable:!0,get:function(){return n.editorStyle}}),Object.defineProperty(exports,"customMarkdownSerializer",{enumerable:!0,get:function(){return o.customMarkdownSerializer}}),Object.defineProperty(exports,"createMenuItems",{enumerable:!0,get:function(){return i.createMenuItems}}),Object.defineProperty(exports,"useEditor",{enumerable:!0,get:function(){return u.useEditor}}),require("./registerProseMirror");var e=require("./components/EditorMenu"),r=require("./DefaultPlugin"),t=require("./EditorState"),n=require("./editorStyle"),o=require("./MarkdownPlugin/MarkdownSerializer"),i=require("./MenuItem"),u=require("./useEditor");
},{"./registerProseMirror":"aPQJ","./components/EditorMenu":"6wHY","./DefaultPlugin":"nW5w","./EditorState":"hfxi","./editorStyle":"wgx3","./MarkdownPlugin/MarkdownSerializer":"9yPx","./MenuItem":"EqEq","./useEditor":"3UjY"}],"mY7n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.stickToTop=o;const e=200;function o(){setTimeout(()=>{window.scrollTo(0,0)},e)}
},{}],"R1WR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useDebouncedCallback=r;var e=require("react");function r(r,t,u){return(0,e.useMemo)(()=>{let e;return(...u)=>{e&&clearTimeout(e),e=setTimeout(()=>{r(...u)},t)}},[...u,t])}
},{"react":"1n8/"}],"xiht":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NotePage=void 0;var e=require("option-t/lib/Nullable"),t=require("option-t/lib/Nullable/map"),o=E(require("react")),r=require("../../../app/components/layouts/CenterLayout"),n=require("../../../app/components/layouts/VerticalStackItemLayout"),a=require("../../../app/components/layouts/VerticalStackLayout"),l=require("../../../app/components/layouts/VirtualKeyboardSpacer"),u=h(require("../../../app/useRedux")),i=require("../../../components/Button"),c=require("../../../components/Icon"),s=require("../../../components/Text"),d=require("../../../modules/editor"),f=require("../../../styled-components"),p=require("../../../theme/theme-type"),m=require("../../../utils/stickToTop"),y=require("../../../utils/unwrapUnsafeValue"),b=require("../../../utils/useDebouncedCallback"),g=require("../NoteEffect");function h(e){return e&&e.__esModule?e:{default:e}}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,o):{};r.get||r.set?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,t}const v=4e3,S=f.styled.div`
  display: flex;
  flex-direction: column;
  font-size: ${({theme:e})=>e.fontSize.large};
  height: 100%;
  width: 100%;

  .ProseMirror {
    font-size: ${({theme:e})=>e.fontSize.default};
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
    height: 100%;
    padding-bottom: 30%;
    padding-top: ${({theme:e})=>e.space};
  }

  ${d.editorStyle}
`,k=f.styled.div`
  height: 100%;
`,q=f.styled.div`
  align-items: center;
  bottom: ${({theme:e})=>e.space};
  display: flex;
  left: 0;
  margin-left: ${({theme:e})=>e.space};
  opacity: ${({theme:e})=>e.inactiveOpacity};
  position: absolute;
  text-align: left;
  transition: ${({theme:e})=>e.transition};
  z-index: 100;

  :hover {
    opacity: ${({theme:e})=>e.activeOpacity};
  }
`,C=f.styled.div`
  ${i.Button} + ${i.Button} {
    margin-left: ${({theme:e})=>e.space};
  }
`,x=f.styled.div`
  margin-left: ${({theme:e})=>e.space};
`,$=(0,f.styled)(r.CenterLayout)`
  font-size: 96px;
  color: ${({theme:e})=>e.loadingColorFg};
`,w=(0,d.createSchema)(),z=(0,d.createMenuItems)(w),I=()=>{const[{userId:r,saving:f,loading:h,note:E},v]=(0,u.default)(N),[I,O]=(0,o.useState)(!1),V=(0,o.useRef)((0,t.mapForNullable)(E,e=>e.content)),P=(0,o.useRef)(null),L="1",[M,B]=(0,o.useState)(()=>(0,d.createStateFromContent)(w,(0,t.mapForNullable)(E,e=>e.content)));function F(t){if((0,e.isNull)(r)||(0,e.isNull)(t))return;const o={note:{content:t,id:L},userId:r};v(g.noteEffects.save(o))}(0,o.useEffect)(()=>{if((0,e.isNull)(E))return;const t=(0,d.createStateFromContent)(w,E.content);B(t)},[E]),(0,o.useEffect)(()=>{(0,e.isNull)(r)||v(g.noteEffects.load({userId:r,noteId:L}))},[r]);const T=(0,o.useCallback)(()=>{F(V.current)},[v,r,L,V.current]),j=(0,b.useDebouncedCallback)(e=>{const t=(0,d.serializeEditorState)(e);V.current=t,F(t)},4e3,[v,r,L]),_=(0,o.useCallback)((e,t,o)=>{o&&j(e),B(e)},[j]),D=(0,o.useCallback)(()=>{const e={text:d.customMarkdownSerializer.serialize(M.doc)};v(g.noteEffects.copyText(e))},[v,M.doc]),R=(0,o.useCallback)(()=>{O(!0),(0,m.stickToTop)()},[]),K=(0,o.useCallback)(()=>{O(!1)},[]),U=(0,d.useEditor)({editorRef:P,editorState:M,onBlur:K,onChange:_,onFocus:R}),A=(0,o.useCallback)(()=>{(0,y.unwrapUnsafeValue)(U.dom).blur()},[U]);return h?o.default.createElement($,null,o.default.createElement(c.Icon,{icon:"spinner",spin:!0,pulse:!0})):o.default.createElement(S,null,o.default.createElement(a.VerticalStackLayout,null,o.default.createElement(n.VerticalStackItemLayout,{autoScale:!0},o.default.createElement(k,{ref:P}),o.default.createElement(q,null,o.default.createElement(C,null,o.default.createElement(i.Button,{onClick:A},"Done"),o.default.createElement(i.Button,{onClick:T},"Save"),o.default.createElement(i.Button,{onClick:D},"Copy")),o.default.createElement(x,null,o.default.createElement(s.Text,{size:p.FontSize.SMALL},f?"saving...":"saved"))),o.default.createElement(d.EditorMenu,{editorState:M,menuItems:z,editorView:U})),o.default.createElement(l.VirtualKeyboardSpacer,{isVirtualKeyboardVisible:I})))};function N(e){const{saving:t,note:o}=e.note,{loading:r,user:n}=e.routing;return{loading:r,note:o,saving:t,userId:n?n.uid:null}}exports.NotePage=I;
},{"option-t/lib/Nullable":"Co55","option-t/lib/Nullable/map":"bgYJ","react":"1n8/","../../../app/components/layouts/CenterLayout":"DIPD","../../../app/components/layouts/VerticalStackItemLayout":"u48L","../../../app/components/layouts/VerticalStackLayout":"D5Nm","../../../app/components/layouts/VirtualKeyboardSpacer":"ESLq","../../../app/useRedux":"fg82","../../../components/Button":"UI9U","../../../components/Icon":"TMj6","../../../components/Text":"5Mw3","../../../modules/editor":"yEZa","../../../styled-components":"SO6s","../../../theme/theme-type":"v6Jv","../../../utils/stickToTop":"mY7n","../../../utils/unwrapUnsafeValue":"wUp7","../../../utils/useDebouncedCallback":"R1WR","../NoteEffect":"YrLs"}]},{},[], null)
//# sourceMappingURL=/notebook/NotePage.9fdf1e89.map